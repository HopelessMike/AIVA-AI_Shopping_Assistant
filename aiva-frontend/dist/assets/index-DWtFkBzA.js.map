{"version":3,"file":"index-DWtFkBzA.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/pages/HomePage.jsx","../../node_modules/axios/lib/helpers/bind.js","../../node_modules/axios/lib/utils.js","../../node_modules/axios/lib/core/AxiosError.js","../../node_modules/axios/lib/helpers/null.js","../../node_modules/axios/lib/helpers/toFormData.js","../../node_modules/axios/lib/helpers/AxiosURLSearchParams.js","../../node_modules/axios/lib/helpers/buildURL.js","../../node_modules/axios/lib/core/InterceptorManager.js","../../node_modules/axios/lib/defaults/transitional.js","../../node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","../../node_modules/axios/lib/platform/browser/classes/FormData.js","../../node_modules/axios/lib/platform/browser/classes/Blob.js","../../node_modules/axios/lib/platform/browser/index.js","../../node_modules/axios/lib/platform/common/utils.js","../../node_modules/axios/lib/platform/index.js","../../node_modules/axios/lib/helpers/toURLEncodedForm.js","../../node_modules/axios/lib/helpers/formDataToJSON.js","../../node_modules/axios/lib/defaults/index.js","../../node_modules/axios/lib/helpers/parseHeaders.js","../../node_modules/axios/lib/core/AxiosHeaders.js","../../node_modules/axios/lib/core/transformData.js","../../node_modules/axios/lib/cancel/isCancel.js","../../node_modules/axios/lib/cancel/CanceledError.js","../../node_modules/axios/lib/core/settle.js","../../node_modules/axios/lib/helpers/parseProtocol.js","../../node_modules/axios/lib/helpers/speedometer.js","../../node_modules/axios/lib/helpers/throttle.js","../../node_modules/axios/lib/helpers/progressEventReducer.js","../../node_modules/axios/lib/helpers/isURLSameOrigin.js","../../node_modules/axios/lib/helpers/cookies.js","../../node_modules/axios/lib/helpers/isAbsoluteURL.js","../../node_modules/axios/lib/helpers/combineURLs.js","../../node_modules/axios/lib/core/buildFullPath.js","../../node_modules/axios/lib/core/mergeConfig.js","../../node_modules/axios/lib/helpers/resolveConfig.js","../../node_modules/axios/lib/adapters/xhr.js","../../node_modules/axios/lib/helpers/composeSignals.js","../../node_modules/axios/lib/helpers/trackStream.js","../../node_modules/axios/lib/adapters/fetch.js","../../node_modules/axios/lib/adapters/adapters.js","../../node_modules/axios/lib/core/dispatchRequest.js","../../node_modules/axios/lib/env/data.js","../../node_modules/axios/lib/helpers/validator.js","../../node_modules/axios/lib/core/Axios.js","../../node_modules/axios/lib/cancel/CancelToken.js","../../node_modules/axios/lib/helpers/spread.js","../../node_modules/axios/lib/helpers/isAxiosError.js","../../node_modules/axios/lib/helpers/HttpStatusCode.js","../../node_modules/axios/lib/axios.js","../../node_modules/axios/index.js","../../src/services/api.js","../../src/lib/basePath.ts","../../node_modules/zustand/esm/vanilla.mjs","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js","../../node_modules/use-sync-external-store/shim/index.js","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js","../../node_modules/use-sync-external-store/shim/with-selector.js","../../node_modules/zustand/esm/index.mjs","../../node_modules/zustand/esm/middleware.mjs","../../src/store/index.js","../../src/hooks/useCart.js","../../src/hooks/useFavorites.js","../../src/pages/ProductsPage.jsx","../../src/pages/OffersPage.jsx","../../src/pages/CartPage.jsx","../../src/pages/ProductPage.jsx","../../src/components/VoiceVisualizer.jsx","../../src/hooks/useVoiceAssistantNative.js","../../src/App.jsx","../../src/polyfills.js","../../src/main.jsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// src/pages/HomePage.jsx - Colorful Homepage with Shopping Icons\nimport React from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  Mic, Sparkles, ShoppingBag, Heart, Star, Shirt, \n  ShoppingCart, Gift, Crown, Zap, Palette, Camera \n} from 'lucide-react';\n\nconst HomePage = ({ onVoiceToggle }) => {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100\">\n      {/* Hero Section */}\n      <motion.section \n        className=\"relative overflow-hidden py-20 px-4\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 0.8 }}\n      >\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"relative z-10 text-center\">\n            {/* Main Title */}\n            <motion.h1 \n              className=\"text-6xl md:text-7xl font-bold mb-8\"\n              initial={{ y: 50, opacity: 0 }}\n              animate={{ y: 0, opacity: 1 }}\n              transition={{ delay: 0.2, duration: 0.8 }}\n            >\n              <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600\">\n                Il Futuro dello Shopping\n              </span>\n              <br />\n              <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600\">\n                è Vocale\n              </span>\n            </motion.h1>\n\n            {/* Subtitle */}\n            <motion.p \n              className=\"text-xl md:text-2xl text-gray-700 mb-12 max-w-4xl mx-auto leading-relaxed\"\n              initial={{ y: 30, opacity: 0 }}\n              animate={{ y: 0, opacity: 1 }}\n              transition={{ delay: 0.4, duration: 0.8 }}\n            >\n              Scopri AIVA, il tuo personal shopper AI che ti aiuta a trovare l'outfit perfetto con comandi vocali in italiano.\n            </motion.p>\n\n            {/* Central CTA Button */}\n            <motion.div\n              initial={{ scale: 0, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              transition={{ delay: 0.6, duration: 0.8, type: \"spring\", stiffness: 200 }}\n              className=\"mb-16\"\n            >\n              <motion.button\n                onClick={onVoiceToggle}\n                className=\"group relative px-12 py-6 bg-gradient-to-r from-purple-600 to-blue-600 text-white text-2xl font-bold rounded-full shadow-2xl hover:shadow-purple-500/25 transform transition-all duration-300\"\n                whileHover={{ \n                  scale: 1.05,\n                  boxShadow: \"0 20px 40px rgba(147, 51, 234, 0.3)\"\n                }}\n                whileTap={{ scale: 0.95 }}\n              >\n                <div className=\"flex items-center space-x-4\">\n                  <motion.div\n                    className=\"relative\"\n                    animate={{ rotate: [0, 10, -10, 0] }}\n                    transition={{ duration: 2, repeat: Infinity }}\n                  >\n                    <Mic size={32} />\n                    <motion.div\n                      className=\"absolute -inset-2 bg-white/20 rounded-full\"\n                      animate={{ scale: [1, 1.2, 1] }}\n                      transition={{ duration: 1.5, repeat: Infinity }}\n                    />\n                  </motion.div>\n                  <span>Inizia Shopping Vocale</span>\n                  <Sparkles size={24} className=\"text-yellow-300\" />\n                </div>\n                \n                {/* Ripple Effect */}\n                <motion.div\n                  className=\"absolute inset-0 rounded-full bg-white/20\"\n                  initial={{ scale: 0, opacity: 1 }}\n                  animate={{ scale: 2, opacity: 0 }}\n                  transition={{ duration: 1, repeat: Infinity, delay: 0.5 }}\n                />\n              </motion.button>\n            </motion.div>\n\n            {/* Floating Elements - Many Colorful Shopping Icons */}\n            <div className=\"absolute inset-0 pointer-events-none hidden md:block z-0\">\n              {/* Top Row */}\n              <motion.div\n                className=\"absolute top-16 left-8 text-pink-400\"\n                animate={{ y: [0, -15, 0], rotate: [0, 10, 0] }}\n                transition={{ duration: 3, repeat: Infinity }}\n              >\n                <Shirt size={64} />\n              </motion.div>\n              <motion.div\n                className=\"absolute top-24 right-12 text-purple-400\"\n                animate={{ y: [0, 20, 0], rotate: [0, -8, 0] }}\n                transition={{ duration: 4, repeat: Infinity, delay: 0.5 }}\n              >\n                <ShoppingBag size={56} />\n              </motion.div>\n              <motion.div\n                className=\"absolute top-32 left-1/4 text-blue-400\"\n                animate={{ y: [0, -10, 0], rotate: [0, 5, 0] }}\n                transition={{ duration: 2.5, repeat: Infinity, delay: 1 }}\n              >\n                <Heart size={70} />\n              </motion.div>\n\n              {/* Middle Row */}\n              <motion.div\n                className=\"absolute top-48 right-8 text-green-400\"\n                animate={{ y: [0, 15, 0], rotate: [0, -12, 0] }}\n                transition={{ duration: 3.5, repeat: Infinity, delay: 0.3 }}\n              >\n                <ShoppingCart size={60} />\n              </motion.div>\n              <motion.div\n                className=\"absolute top-56 left-12 text-yellow-400\"\n                animate={{ y: [0, -20, 0], rotate: [0, 8, 0] }}\n                transition={{ duration: 2.8, repeat: Infinity, delay: 0.8 }}\n              >\n                <Gift size={60} />\n              </motion.div>\n              <motion.div\n                className=\"absolute top-64 right-1/3 text-red-400\"\n                animate={{ y: [0, 12, 0], rotate: [0, -6, 0] }}\n                transition={{ duration: 3.2, repeat: Infinity, delay: 1.2 }}\n              >              </motion.div>\n\n              {/* Bottom Row */}\n              <motion.div\n                className=\"absolute bottom-48 left-16 text-indigo-400\"\n                animate={{ y: [0, -18, 0], rotate: [0, 7, 0] }}\n                transition={{ duration: 2.7, repeat: Infinity, delay: 0.6 }}\n              >\n                <Star size={50} />\n              </motion.div>\n              <motion.div\n                className=\"absolute bottom-40 right-16 text-orange-400\"\n                animate={{ y: [0, 14, 0], rotate: [0, -9, 0] }}\n                transition={{ duration: 3.8, repeat: Infinity, delay: 1.1 }}\n              >\n                <Palette size={50} />\n              </motion.div>\n              <motion.div\n                className=\"absolute bottom-32 left-1/3 text-cyan-400\"\n                animate={{ y: [0, -16, 0], rotate: [0, 11, 0] }}\n                transition={{ duration: 2.9, repeat: Infinity, delay: 0.4 }}\n              >\n              </motion.div>\n              <motion.div\n                className=\"absolute bottom-24 right-1/4 text-rose-400\"\n                animate={{ y: [0, 22, 0], rotate: [0, -7, 0] }}\n                transition={{ duration: 3.3, repeat: Infinity, delay: 0.9 }}\n              >\n                <Crown size={75} />\n              </motion.div>\n            </div>\n          </div>\n        </div>\n      </motion.section>\n\n      {/* Features Section */}\n      <motion.section \n        className=\"py-20 px-4 bg-white/50 backdrop-blur-sm\"\n        initial={{ opacity: 0, y: 50 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.8, duration: 0.8 }}\n      >\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl font-bold text-gray-800 mb-4\">\n              Perché Scegliere AIVA\n            </h2>\n            <p className=\"text-xl text-gray-600\">\n              Un'esperienza di shopping rivoluzionaria\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-12\">\n            {/* Feature 1 */}\n            <motion.div\n              className=\"text-center p-8 bg-white/70 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300\"\n              whileHover={{ y: -5 }}\n            >\n              <div className=\"w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <Mic size={40} className=\"text-white\" />\n              </div>\n              <h3 className=\"text-2xl font-bold text-gray-800 mb-4\">Comandi Vocali</h3>\n              <p className=\"text-gray-600 text-lg\">\n                Cerca, filtra, apri le pagine e aggiungi al carrello con la voce\n              </p>\n            </motion.div>\n\n            {/* Feature 2 */}\n            <motion.div\n              className=\"text-center p-8 bg-white/70 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300\"\n              whileHover={{ y: -5 }}\n            >\n              <div className=\"w-20 h-20 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <Sparkles size={40} className=\"text-white\" />\n              </div>\n              <h3 className=\"text-2xl font-bold text-gray-800 mb-4\">Risposte in Tempo Reale</h3>\n              <p className=\"text-gray-600 text-lg\">\n                AIVA parla mentre elabora: risposte fluide e naturali, anche interruttibili\n              </p>\n            </motion.div>\n\n            {/* Feature 3 */}\n            <motion.div\n              className=\"text-center p-8 bg-white/70 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300\"\n              whileHover={{ y: -5 }}\n            >\n              <div className=\"w-20 h-20 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <Zap size={40} className=\"text-white\" />\n              </div>\n              <h3 className=\"text-2xl font-bold text-gray-800 mb-4\">Navigazione Istantanea</h3>\n              <p className=\"text-gray-600 text-lg\">\n                Vai a Prodotti, Offerte o Carrello senza toccare lo schermo: basta dirlo\n              </p>\n            </motion.div>\n          </div>\n        </div>\n      </motion.section>\n\n      {/* CTA Section */}\n      <motion.section \n        className=\"py-20 px-4 bg-gradient-to-r from-purple-600 to-blue-600\"\n        initial={{ opacity: 0, y: 50 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 1, duration: 0.8 }}\n      >\n        <div className=\"max-w-4xl mx-auto text-center text-white\">\n          <motion.div\n            initial={{ scale: 0.9, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ delay: 1.2, duration: 0.8 }}\n          >\n            <h2 className=\"text-4xl md:text-5xl font-bold mb-6\">\n              Prova l'Esperienza Shopping del Futuro\n            </h2>\n            <p className=\"text-xl md:text-2xl mb-8 opacity-90\">\n              Clicca sul microfono e dì \"Cerco una felpa nera\" per iniziare\n            </p>\n            <motion.button\n              onClick={onVoiceToggle}\n              className=\"px-10 py-5 bg-white text-purple-600 font-bold text-xl rounded-full shadow-2xl hover:shadow-white/25 transform transition-all duration-300\"\n              whileHover={{ \n                scale: 1.05,\n                boxShadow: \"0 20px 40px rgba(255, 255, 255, 0.3)\"\n              }}\n              whileTap={{ scale: 0.95 }}\n            >\n              <div className=\"flex items-center space-x-3\">\n                <Mic size={28} />\n                <span>Attiva Assistente Vocale</span>\n              </div>\n            </motion.button>\n          </motion.div>\n        </div>\n      </motion.section>\n    </div>\n  );\n};\n\nexport default HomePage;","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\nconst {iterator, toStringTag} = Symbol;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(toStringTag in val) && !(iterator in val);\n}\n\n/**\n * Determine if a value is an empty object (safely handles Buffers)\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an empty object, otherwise false\n */\nconst isEmptyObject = (val) => {\n  // Early return for non-objects or Buffers to prevent RangeError\n  if (!isObject(val) || isBuffer(val)) {\n    return false;\n  }\n\n  try {\n    return Object.keys(val).length === 0 && Object.getPrototypeOf(val) === Object.prototype;\n  } catch (e) {\n    // Fallback for any other objects that might cause RangeError with Object.keys()\n    return false;\n  }\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\nconst [isReadableStream, isRequest, isResponse, isHeaders] = ['ReadableStream', 'Request', 'Response', 'Headers'].map(kindOfTest);\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Buffer check\n    if (isBuffer(obj)) {\n      return;\n    }\n\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  if (isBuffer(obj)){\n    return null;\n  }\n\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless, skipUndefined} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else if (!skipUndefined || !isUndefined(val)) {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[iterator];\n\n  const _iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = _iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  return value != null && Number.isFinite(value = +value) ? value : defaultValue;\n}\n\n\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[toStringTag] === 'FormData' && thing[iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      //Buffer check\n      if (isBuffer(source)) {\n        return source;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\n// original code\n// https://github.com/DigitalBrainJS/AxiosPromise/blob/16deab13710ec09779922131f3fa5954320f83ab/lib/utils.js#L11-L34\n\nconst _setImmediate = ((setImmediateSupported, postMessageSupported) => {\n  if (setImmediateSupported) {\n    return setImmediate;\n  }\n\n  return postMessageSupported ? ((token, callbacks) => {\n    _global.addEventListener(\"message\", ({source, data}) => {\n      if (source === _global && data === token) {\n        callbacks.length && callbacks.shift()();\n      }\n    }, false);\n\n    return (cb) => {\n      callbacks.push(cb);\n      _global.postMessage(token, \"*\");\n    }\n  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);\n})(\n  typeof setImmediate === 'function',\n  isFunction(_global.postMessage)\n);\n\nconst asap = typeof queueMicrotask !== 'undefined' ?\n  queueMicrotask.bind(_global) : ( typeof process !== 'undefined' && process.nextTick || _setImmediate);\n\n// *********************\n\n\nconst isIterable = (thing) => thing != null && isFunction(thing[iterator]);\n\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isEmptyObject,\n  isReadableStream,\n  isRequest,\n  isResponse,\n  isHeaders,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable,\n  setImmediate: _setImmediate,\n  asap,\n  isIterable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  if (response) {\n    this.response = response;\n    this.status = response.status ? response.status : null;\n  }\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.status\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  const msg = error && error.message ? error.message : 'Error';\n\n  // Prefer explicit code; otherwise copy the low-level error's code (e.g. ECONNREFUSED)\n  const errCode = code == null && error ? error.code : code;\n  AxiosError.call(axiosError, msg, errCode, config, request, response);\n\n  // Chain the original error on the standard field; non-enumerable to avoid JSON noise\n  if (error && axiosError.cause == null) {\n    Object.defineProperty(axiosError, 'cause', { value: error, configurable: true });\n  }\n\n  axiosError.name = (error && error.name) || 'Error';\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (utils.isBoolean(value)) {\n      return value.toString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?(object|Function)} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  if (utils.isFunction(options)) {\n    options = {\n      serialize: options\n    };\n  } \n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nconst _navigator = typeof navigator === 'object' && navigator || undefined;\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = hasBrowserEnv &&\n  (!_navigator || ['ReactNative', 'NativeScript', 'NS'].indexOf(_navigator.product) < 0);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nconst origin = hasBrowserEnv && window.location.href || 'http://localhost';\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv,\n  _navigator as navigator,\n  origin\n}\n","import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), {\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    },\n    ...options\n  });\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n\n    if (name === '__proto__') return true;\n\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http', 'fetch'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data) ||\n      utils.isReadableStream(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (utils.isResponse(data) || utils.isReadableStream(data)) {\n      return data;\n    }\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data, this.parseReviver);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else if (utils.isObject(header) && utils.isIterable(header)) {\n      let obj = {}, dest, key;\n      for (const entry of header) {\n        if (!utils.isArray(entry)) {\n          throw TypeError('Object iterator must return a key-value pair');\n        }\n\n        obj[key = entry[0]] = (dest = obj[key]) ?\n          (utils.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]]) : entry[1];\n      }\n\n      setHeaders(obj, valueOrRewrite)\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  getSetCookie() {\n    return this.get(\"set-cookie\") || [];\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","/**\n * Throttle decorator\n * @param {Function} fn\n * @param {Number} freq\n * @return {Function}\n */\nfunction throttle(fn, freq) {\n  let timestamp = 0;\n  let threshold = 1000 / freq;\n  let lastArgs;\n  let timer;\n\n  const invoke = (args, now = Date.now()) => {\n    timestamp = now;\n    lastArgs = null;\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n    fn(...args);\n  }\n\n  const throttled = (...args) => {\n    const now = Date.now();\n    const passed = now - timestamp;\n    if ( passed >= threshold) {\n      invoke(args, now);\n    } else {\n      lastArgs = args;\n      if (!timer) {\n        timer = setTimeout(() => {\n          timer = null;\n          invoke(lastArgs)\n        }, threshold - passed);\n      }\n    }\n  }\n\n  const flush = () => lastArgs && invoke(lastArgs);\n\n  return [throttled, flush];\n}\n\nexport default throttle;\n","import speedometer from \"./speedometer.js\";\nimport throttle from \"./throttle.js\";\nimport utils from \"../utils.js\";\n\nexport const progressEventReducer = (listener, isDownloadStream, freq = 3) => {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return throttle(e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e,\n      lengthComputable: total != null,\n      [isDownloadStream ? 'download' : 'upload']: true\n    };\n\n    listener(data);\n  }, freq);\n}\n\nexport const progressEventDecorator = (total, throttled) => {\n  const lengthComputable = total != null;\n\n  return [(loaded) => throttled[0]({\n    lengthComputable,\n    total,\n    loaded\n  }), throttled[1]];\n}\n\nexport const asyncDecorator = (fn) => (...args) => utils.asap(() => fn(...args));\n","import platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ? ((origin, isMSIE) => (url) => {\n  url = new URL(url, platform.origin);\n\n  return (\n    origin.protocol === url.protocol &&\n    origin.host === url.host &&\n    (isMSIE || origin.port === url.port)\n  );\n})(\n  new URL(platform.origin),\n  platform.navigator && /(msie|trident)/i.test(platform.navigator.userAgent)\n) : () => true;\n","import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure) {\n      const cookie = [name + '=' + encodeURIComponent(value)];\n\n      utils.isNumber(expires) && cookie.push('expires=' + new Date(expires).toGMTString());\n\n      utils.isString(path) && cookie.push('path=' + path);\n\n      utils.isString(domain) && cookie.push('domain=' + domain);\n\n      secure === true && cookie.push('secure');\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return (match ? decodeURIComponent(match[3]) : null);\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/?\\/$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {\n  let isRelativeUrl = !isAbsoluteURL(requestedURL);\n  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? { ...thing } : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, prop, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, prop , caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, prop , caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, prop , caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b , prop) => mergeDeepProperties(headersToObject(a), headersToObject(b),prop, true)\n  };\n\n  utils.forEach(Object.keys({...config1, ...config2}), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport isURLSameOrigin from \"./isURLSameOrigin.js\";\nimport cookies from \"./cookies.js\";\nimport buildFullPath from \"../core/buildFullPath.js\";\nimport mergeConfig from \"../core/mergeConfig.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport buildURL from \"./buildURL.js\";\n\nexport default (config) => {\n  const newConfig = mergeConfig({}, config);\n\n  let { data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth } = newConfig;\n\n  newConfig.headers = headers = AxiosHeaders.from(headers);\n\n  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);\n\n  // HTTP basic authentication\n  if (auth) {\n    headers.set('Authorization', 'Basic ' +\n      btoa((auth.username || '') + ':' + (auth.password ? unescape(encodeURIComponent(auth.password)) : ''))\n    );\n  }\n\n  if (utils.isFormData(data)) {\n    if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n      headers.setContentType(undefined); // browser handles it\n    } else if (utils.isFunction(data.getHeaders)) {\n      // Node.js FormData (like form-data package)\n      const formHeaders = data.getHeaders();\n      // Only set safe headers to avoid overwriting security headers\n      const allowedHeaders = ['content-type', 'content-length'];\n      Object.entries(formHeaders).forEach(([key, val]) => {\n        if (allowedHeaders.includes(key.toLowerCase())) {\n          headers.set(key, val);\n        }\n      });\n    }\n  }  \n\n  // Add xsrf header\n  // This is only done if running in a standard browser environment.\n  // Specifically not if we're in a web worker, or react-native.\n\n  if (platform.hasStandardBrowserEnv) {\n    withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));\n\n    if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(newConfig.url))) {\n      // Add xsrf header\n      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies.read(xsrfCookieName);\n\n      if (xsrfValue) {\n        headers.set(xsrfHeaderName, xsrfValue);\n      }\n    }\n  }\n\n  return newConfig;\n}\n\n","import utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport {progressEventReducer} from '../helpers/progressEventReducer.js';\nimport resolveConfig from \"../helpers/resolveConfig.js\";\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    const _config = resolveConfig(config);\n    let requestData = _config.data;\n    const requestHeaders = AxiosHeaders.from(_config.headers).normalize();\n    let {responseType, onUploadProgress, onDownloadProgress} = _config;\n    let onCanceled;\n    let uploadThrottled, downloadThrottled;\n    let flushUpload, flushDownload;\n\n    function done() {\n      flushUpload && flushUpload(); // flush events\n      flushDownload && flushDownload(); // flush events\n\n      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);\n\n      _config.signal && _config.signal.removeEventListener('abort', onCanceled);\n    }\n\n    let request = new XMLHttpRequest();\n\n    request.open(_config.method.toUpperCase(), _config.url, true);\n\n    // Set the request timeout in MS\n    request.timeout = _config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n  request.onerror = function handleError(event) {\n       // Browsers deliver a ProgressEvent in XHR onerror\n       // (message may be empty; when present, surface it)\n       // See https://developer.mozilla.org/docs/Web/API/XMLHttpRequest/error_event\n       const msg = event && event.message ? event.message : 'Network Error';\n       const err = new AxiosError(msg, AxiosError.ERR_NETWORK, config, request);\n       // attach the underlying event for consumers who want details\n       err.event = event || null;\n       reject(err);\n       request = null;\n    };\n    \n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = _config.timeout ? 'timeout of ' + _config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = _config.transitional || transitionalDefaults;\n      if (_config.timeoutErrorMessage) {\n        timeoutErrorMessage = _config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(_config.withCredentials)) {\n      request.withCredentials = !!_config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = _config.responseType;\n    }\n\n    // Handle progress if needed\n    if (onDownloadProgress) {\n      ([downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true));\n      request.addEventListener('progress', downloadThrottled);\n    }\n\n    // Not all browsers support upload events\n    if (onUploadProgress && request.upload) {\n      ([uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress));\n\n      request.upload.addEventListener('progress', uploadThrottled);\n\n      request.upload.addEventListener('loadend', flushUpload);\n    }\n\n    if (_config.cancelToken || _config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);\n      if (_config.signal) {\n        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(_config.url);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","import CanceledError from \"../cancel/CanceledError.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport utils from '../utils.js';\n\nconst composeSignals = (signals, timeout) => {\n  const {length} = (signals = signals ? signals.filter(Boolean) : []);\n\n  if (timeout || length) {\n    let controller = new AbortController();\n\n    let aborted;\n\n    const onabort = function (reason) {\n      if (!aborted) {\n        aborted = true;\n        unsubscribe();\n        const err = reason instanceof Error ? reason : this.reason;\n        controller.abort(err instanceof AxiosError ? err : new CanceledError(err instanceof Error ? err.message : err));\n      }\n    }\n\n    let timer = timeout && setTimeout(() => {\n      timer = null;\n      onabort(new AxiosError(`timeout ${timeout} of ms exceeded`, AxiosError.ETIMEDOUT))\n    }, timeout)\n\n    const unsubscribe = () => {\n      if (signals) {\n        timer && clearTimeout(timer);\n        timer = null;\n        signals.forEach(signal => {\n          signal.unsubscribe ? signal.unsubscribe(onabort) : signal.removeEventListener('abort', onabort);\n        });\n        signals = null;\n      }\n    }\n\n    signals.forEach((signal) => signal.addEventListener('abort', onabort));\n\n    const {signal} = controller;\n\n    signal.unsubscribe = () => utils.asap(unsubscribe);\n\n    return signal;\n  }\n}\n\nexport default composeSignals;\n","\nexport const streamChunk = function* (chunk, chunkSize) {\n  let len = chunk.byteLength;\n\n  if (!chunkSize || len < chunkSize) {\n    yield chunk;\n    return;\n  }\n\n  let pos = 0;\n  let end;\n\n  while (pos < len) {\n    end = pos + chunkSize;\n    yield chunk.slice(pos, end);\n    pos = end;\n  }\n}\n\nexport const readBytes = async function* (iterable, chunkSize) {\n  for await (const chunk of readStream(iterable)) {\n    yield* streamChunk(chunk, chunkSize);\n  }\n}\n\nconst readStream = async function* (stream) {\n  if (stream[Symbol.asyncIterator]) {\n    yield* stream;\n    return;\n  }\n\n  const reader = stream.getReader();\n  try {\n    for (;;) {\n      const {done, value} = await reader.read();\n      if (done) {\n        break;\n      }\n      yield value;\n    }\n  } finally {\n    await reader.cancel();\n  }\n}\n\nexport const trackStream = (stream, chunkSize, onProgress, onFinish) => {\n  const iterator = readBytes(stream, chunkSize);\n\n  let bytes = 0;\n  let done;\n  let _onFinish = (e) => {\n    if (!done) {\n      done = true;\n      onFinish && onFinish(e);\n    }\n  }\n\n  return new ReadableStream({\n    async pull(controller) {\n      try {\n        const {done, value} = await iterator.next();\n\n        if (done) {\n         _onFinish();\n          controller.close();\n          return;\n        }\n\n        let len = value.byteLength;\n        if (onProgress) {\n          let loadedBytes = bytes += len;\n          onProgress(loadedBytes);\n        }\n        controller.enqueue(new Uint8Array(value));\n      } catch (err) {\n        _onFinish(err);\n        throw err;\n      }\n    },\n    cancel(reason) {\n      _onFinish(reason);\n      return iterator.return();\n    }\n  }, {\n    highWaterMark: 2\n  })\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport composeSignals from \"../helpers/composeSignals.js\";\nimport {trackStream} from \"../helpers/trackStream.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport {progressEventReducer, progressEventDecorator, asyncDecorator} from \"../helpers/progressEventReducer.js\";\nimport resolveConfig from \"../helpers/resolveConfig.js\";\nimport settle from \"../core/settle.js\";\n\nconst DEFAULT_CHUNK_SIZE = 64 * 1024;\n\nconst {isFunction} = utils;\n\nconst globalFetchAPI = (({Request, Response}) => ({\n  Request, Response\n}))(utils.global);\n\nconst {\n  ReadableStream, TextEncoder\n} = utils.global;\n\n\nconst test = (fn, ...args) => {\n  try {\n    return !!fn(...args);\n  } catch (e) {\n    return false\n  }\n}\n\nconst factory = (env) => {\n  env = utils.merge.call({\n    skipUndefined: true\n  }, globalFetchAPI, env);\n\n  const {fetch: envFetch, Request, Response} = env;\n  const isFetchSupported = envFetch ? isFunction(envFetch) : typeof fetch === 'function';\n  const isRequestSupported = isFunction(Request);\n  const isResponseSupported = isFunction(Response);\n\n  if (!isFetchSupported) {\n    return false;\n  }\n\n  const isReadableStreamSupported = isFetchSupported && isFunction(ReadableStream);\n\n  const encodeText = isFetchSupported && (typeof TextEncoder === 'function' ?\n      ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) :\n      async (str) => new Uint8Array(await new Request(str).arrayBuffer())\n  );\n\n  const supportsRequestStream = isRequestSupported && isReadableStreamSupported && test(() => {\n    let duplexAccessed = false;\n\n    const hasContentType = new Request(platform.origin, {\n      body: new ReadableStream(),\n      method: 'POST',\n      get duplex() {\n        duplexAccessed = true;\n        return 'half';\n      },\n    }).headers.has('Content-Type');\n\n    return duplexAccessed && !hasContentType;\n  });\n\n  const supportsResponseStream = isResponseSupported && isReadableStreamSupported &&\n    test(() => utils.isReadableStream(new Response('').body));\n\n  const resolvers = {\n    stream: supportsResponseStream && ((res) => res.body)\n  };\n\n  isFetchSupported && ((() => {\n    ['text', 'arrayBuffer', 'blob', 'formData', 'stream'].forEach(type => {\n      !resolvers[type] && (resolvers[type] = (res, config) => {\n        let method = res && res[type];\n\n        if (method) {\n          return method.call(res);\n        }\n\n        throw new AxiosError(`Response type '${type}' is not supported`, AxiosError.ERR_NOT_SUPPORT, config);\n      })\n    });\n  })());\n\n  const getBodyLength = async (body) => {\n    if (body == null) {\n      return 0;\n    }\n\n    if (utils.isBlob(body)) {\n      return body.size;\n    }\n\n    if (utils.isSpecCompliantForm(body)) {\n      const _request = new Request(platform.origin, {\n        method: 'POST',\n        body,\n      });\n      return (await _request.arrayBuffer()).byteLength;\n    }\n\n    if (utils.isArrayBufferView(body) || utils.isArrayBuffer(body)) {\n      return body.byteLength;\n    }\n\n    if (utils.isURLSearchParams(body)) {\n      body = body + '';\n    }\n\n    if (utils.isString(body)) {\n      return (await encodeText(body)).byteLength;\n    }\n  }\n\n  const resolveBodyLength = async (headers, body) => {\n    const length = utils.toFiniteNumber(headers.getContentLength());\n\n    return length == null ? getBodyLength(body) : length;\n  }\n\n  return async (config) => {\n    let {\n      url,\n      method,\n      data,\n      signal,\n      cancelToken,\n      timeout,\n      onDownloadProgress,\n      onUploadProgress,\n      responseType,\n      headers,\n      withCredentials = 'same-origin',\n      fetchOptions\n    } = resolveConfig(config);\n\n    let _fetch = envFetch || fetch;\n\n    responseType = responseType ? (responseType + '').toLowerCase() : 'text';\n\n    let composedSignal = composeSignals([signal, cancelToken && cancelToken.toAbortSignal()], timeout);\n\n    let request = null;\n\n    const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {\n      composedSignal.unsubscribe();\n    });\n\n    let requestContentLength;\n\n    try {\n      if (\n        onUploadProgress && supportsRequestStream && method !== 'get' && method !== 'head' &&\n        (requestContentLength = await resolveBodyLength(headers, data)) !== 0\n      ) {\n        let _request = new Request(url, {\n          method: 'POST',\n          body: data,\n          duplex: \"half\"\n        });\n\n        let contentTypeHeader;\n\n        if (utils.isFormData(data) && (contentTypeHeader = _request.headers.get('content-type'))) {\n          headers.setContentType(contentTypeHeader)\n        }\n\n        if (_request.body) {\n          const [onProgress, flush] = progressEventDecorator(\n            requestContentLength,\n            progressEventReducer(asyncDecorator(onUploadProgress))\n          );\n\n          data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);\n        }\n      }\n\n      if (!utils.isString(withCredentials)) {\n        withCredentials = withCredentials ? 'include' : 'omit';\n      }\n\n      // Cloudflare Workers throws when credentials are defined\n      // see https://github.com/cloudflare/workerd/issues/902\n      const isCredentialsSupported = isRequestSupported && \"credentials\" in Request.prototype;\n\n      const resolvedOptions = {\n        ...fetchOptions,\n        signal: composedSignal,\n        method: method.toUpperCase(),\n        headers: headers.normalize().toJSON(),\n        body: data,\n        duplex: \"half\",\n        credentials: isCredentialsSupported ? withCredentials : undefined\n      };\n\n      request = isRequestSupported && new Request(url, resolvedOptions);\n\n      let response = await (isRequestSupported ? _fetch(request, fetchOptions) : _fetch(url, resolvedOptions));\n\n      const isStreamResponse = supportsResponseStream && (responseType === 'stream' || responseType === 'response');\n\n      if (supportsResponseStream && (onDownloadProgress || (isStreamResponse && unsubscribe))) {\n        const options = {};\n\n        ['status', 'statusText', 'headers'].forEach(prop => {\n          options[prop] = response[prop];\n        });\n\n        const responseContentLength = utils.toFiniteNumber(response.headers.get('content-length'));\n\n        const [onProgress, flush] = onDownloadProgress && progressEventDecorator(\n          responseContentLength,\n          progressEventReducer(asyncDecorator(onDownloadProgress), true)\n        ) || [];\n\n        response = new Response(\n          trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {\n            flush && flush();\n            unsubscribe && unsubscribe();\n          }),\n          options\n        );\n      }\n\n      responseType = responseType || 'text';\n\n      let responseData = await resolvers[utils.findKey(resolvers, responseType) || 'text'](response, config);\n\n      !isStreamResponse && unsubscribe && unsubscribe();\n\n      return await new Promise((resolve, reject) => {\n        settle(resolve, reject, {\n          data: responseData,\n          headers: AxiosHeaders.from(response.headers),\n          status: response.status,\n          statusText: response.statusText,\n          config,\n          request\n        })\n      })\n    } catch (err) {\n      unsubscribe && unsubscribe();\n\n      if (err && err.name === 'TypeError' && /Load failed|fetch/i.test(err.message)) {\n        throw Object.assign(\n          new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request),\n          {\n            cause: err.cause || err\n          }\n        )\n      }\n\n      throw AxiosError.from(err, err && err.code, config, request);\n    }\n  }\n}\n\nconst seedCache = new Map();\n\nexport const getFetch = (config) => {\n  let env = config ? config.env : {};\n  const {fetch, Request, Response} = env;\n  const seeds = [\n    Request, Response, fetch\n  ];\n\n  let len = seeds.length, i = len,\n    seed, target, map = seedCache;\n\n  while (i--) {\n    seed = seeds[i];\n    target = map.get(seed);\n\n    target === undefined && map.set(seed, target = (i ? new Map() : factory(env)))\n\n    map = target;\n  }\n\n  return target;\n};\n\nconst adapter = getFetch();\n\nexport default adapter;\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport * as fetchAdapter from './fetch.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter,\n  fetch: {\n    get: fetchAdapter.getFetch,\n  }\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters, config) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter && (utils.isFunction(adapter) || (adapter = adapter.get(config)))) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter, config);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","export const VERSION = \"1.12.2\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\nvalidators.spelling = function spelling(correctSpelling) {\n  return (value, opt) => {\n    // eslint-disable-next-line no-console\n    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);\n    return true;\n  }\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig || {};\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  async request(configOrUrl, config) {\n    try {\n      return await this._request(configOrUrl, config);\n    } catch (err) {\n      if (err instanceof Error) {\n        let dummy = {};\n\n        Error.captureStackTrace ? Error.captureStackTrace(dummy) : (dummy = new Error());\n\n        // slice off the Error: ... line\n        const stack = dummy.stack ? dummy.stack.replace(/^.+\\n/, '') : '';\n        try {\n          if (!err.stack) {\n            err.stack = stack;\n            // match without the 2 top stack lines\n          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\\n.+\\n/, ''))) {\n            err.stack += '\\n' + stack\n          }\n        } catch (e) {\n          // ignore the case where \"stack\" is an un-writable property\n        }\n      }\n\n      throw err;\n    }\n  }\n\n  _request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.allowAbsoluteUrls\n    if (config.allowAbsoluteUrls !== undefined) {\n      // do nothing\n    } else if (this.defaults.allowAbsoluteUrls !== undefined) {\n      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;\n    } else {\n      config.allowAbsoluteUrls = true;\n    }\n\n    validator.assertOptions(config, {\n      baseUrl: validators.spelling('baseURL'),\n      withXsrfToken: validators.spelling('withXSRFToken')\n    }, true);\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift(...requestInterceptorChain);\n      chain.push(...responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  toAbortSignal() {\n    const controller = new AbortController();\n\n    const abort = (err) => {\n      controller.abort(err);\n    };\n\n    this.subscribe(abort);\n\n    controller.signal.unsubscribe = () => this.unsubscribe(abort);\n\n    return controller.signal;\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","import axios from './lib/axios.js';\n\n// This module is intended to unwrap Axios default export as named.\n// Keep top-level export same with static properties\n// so that it can keep same with es module or cjs\nconst {\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n} = axios;\n\nexport {\n  axios as default,\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n}\n","// src/services/api.js - API Service for Backend Integration\nimport axios from 'axios';\n\nconst BACKEND_URL = import.meta.env.VITE_BACKEND_URL || 'http://localhost:8000';\n\n// Create axios instance with default config\nconst api = axios.create({\n  baseURL: BACKEND_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor for logging\napi.interceptors.request.use(\n  (config) => {\n    console.log(`API Request: ${config.method?.toUpperCase()} ${config.url}`);\n    return config;\n  },\n  (error) => {\n    console.error('API Request Error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor for error handling\napi.interceptors.response.use(\n  (response) => {\n    console.log(`API Response: ${response.status} ${response.config.url}`);\n    return response;\n  },\n  (error) => {\n    console.error('API Response Error:', error.response?.data || error.message);\n    // Don't throw error for network issues, return empty data instead\n    if (error.code === 'ECONNREFUSED' || error.message.includes('Network Error')) {\n      console.warn('Backend not available, using mock data');\n      return { data: [] };\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Product API\nexport const productAPI = {\n  // Get all products with optional filters\n  getProducts: async (params = {}) => {\n    try {\n      const response = await api.get('/api/products', { params });\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching products:', error);\n      // Return mock data if backend is not available\n      if (error.code === 'ECONNREFUSED' || error.message.includes('Network Error')) {\n        return getMockProducts();\n      }\n      throw error;\n    }\n  },\n\n  // Get size from product details\n  getSizeGuide: async (category) => {\n    const response = await api.get(`/api/size-guide/${encodeURIComponent(category)}`);\n    return response.data;\n  },\n\n  // Get single product by ID\n  getProduct: async (productId) => {\n    try {\n      const response = await api.get(`/api/products/${productId}`);\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching product:', error);\n      if (error.code === 'ECONNREFUSED' || error.message.includes('Network Error')) {\n        return getMockProduct(productId);\n      }\n      throw error;\n    }\n  },\n\n  // Check product availability\n  checkAvailability: async (productId, size, color) => {\n    try {\n      const response = await api.get(`/api/products/${productId}/availability`, {\n        params: { size, color }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error checking availability:', error);\n      // Return available by default for mock\n      return { available: true, stock: 10 };\n    }\n  },\n\n  // Get product recommendations\n  getRecommendations: async (params = {}) => {\n    try {\n      const response = await api.get('/api/recommendations', { params });\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching recommendations:', error);\n      if (error.code === 'ECONNREFUSED' || error.message.includes('Network Error')) {\n        return getMockRecommendations();\n      }\n      throw error;\n    }\n  },\n\n  // Search products with Italian terms\n  searchProducts: async (query, filters = {}) => {\n    try {\n      const params = { q: query, ...filters };\n      const response = await api.get('/api/products', { params });\n      return response.data;\n    } catch (error) {\n      console.error('Error searching products:', error);\n      if (error.code === 'ECONNREFUSED' || error.message.includes('Network Error')) {\n        return getMockProducts().filter(product => \n          product.name.toLowerCase().includes(query.toLowerCase()) ||\n          product.brand.toLowerCase().includes(query.toLowerCase())\n        );\n      }\n      throw error;\n    }\n  }\n};\n\n// Cart API\nexport const cartAPI = {\n  // Get cart contents\n  getCart: async () => {\n    try {\n      const response = await api.get('/api/cart');\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching cart:', error);\n      throw error;\n    }\n  },\n\n  // Add item to cart\n  addToCart: async (productId, size, color, quantity = 1) => {\n    try {\n      const response = await api.post('/api/cart/items', {\n        product_id: productId,\n        size,\n        color,\n        quantity\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error adding to cart:', error);\n      throw error;\n    }\n  },\n\n  // Remove item from cart\n  removeFromCart: async (itemId) => {\n    try {\n      const response = await api.delete(`/api/cart/items/${itemId}`);\n      return response.data;\n    } catch (error) {\n      console.error('Error removing from cart:', error);\n      throw error;\n    }\n  },\n\n  // Update cart item quantity\n  updateQuantity: async (itemId, quantity) => {\n    try {\n      const response = await api.put(`/api/cart/items/${itemId}`, {\n        quantity\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error updating quantity:', error);\n      throw error;\n    }\n  },\n\n  // Clear entire cart\n  clearCart: async () => {\n    try {\n      const response = await api.post('/api/cart/clear');\n      return response.data;\n    } catch (error) {\n      console.error('Error clearing cart:', error);\n      throw error;\n    }\n  }\n};\n\n// Voice/AI API\nexport const voiceAPI = {\n  // Process voice command\n  processVoiceCommand: async (text, context = {}) => {\n    try {\n      const response = await api.post('/api/voice/process', {\n        text,\n        context\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error processing voice command:', error);\n      throw error;\n    }\n  }\n};\n\n// Information API\nexport const infoAPI = {\n  // Get size guide\n  getSizeGuide: async (category) => {\n    try {\n      const response = await api.get(`/api/size-guide/${category}`);\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching size guide:', error);\n      throw error;\n    }\n  },\n\n  // Get shipping info\n  getShippingInfo: async () => {\n    try {\n      const response = await api.get('/api/shipping-info');\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching shipping info:', error);\n      throw error;\n    }\n  },\n\n  // Get current promotions\n  getPromotions: async () => {\n    try {\n      const response = await api.get('/api/promotions');\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching promotions:', error);\n      throw error;\n    }\n  }\n};\n\n// WebSocket connection for real-time voice\nexport const createWebSocketConnection = (sessionId) => {\n  const wsUrl = `${BACKEND_URL.replace('http', 'ws')}/ws/${sessionId}`;\n  return new WebSocket(wsUrl);\n};\n\n// Health check\nexport const healthCheck = async () => {\n  try {\n    const response = await api.get('/health');\n    return response.data;\n  } catch (error) {\n    console.error('Health check failed:', error);\n    throw error;\n  }\n};\n\n// Mock data functions for fallback\nconst getMockProducts = () => [\n  {\n    id: \"550e8400-0001-41d4-a716-446655440001\",\n    name: \"T-Shirt Basic Cotone Bio\",\n    brand: \"EcoWear\",\n    price: 19.90,\n    original_price: 29.90,\n    discount_percentage: 33,\n    images: [\"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400\"],\n    rating: 4.6,\n    reviews: 234,\n    category: \"t-shirt\",\n    variants: [\n      { size: \"S\", color: \"bianco\", stock: 10 },\n      { size: \"M\", color: \"bianco\", stock: 15 },\n      { size: \"L\", color: \"bianco\", stock: 8 }\n    ]\n  },\n  {\n    id: \"550e8400-0002-41d4-a716-446655440002\",\n    name: \"Felpa con Cappuccio\",\n    brand: \"Street Urban\",\n    price: 59.90,\n    original_price: 79.90,\n    discount_percentage: 25,\n    images: [\"https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=400\"],\n    rating: 4.8,\n    reviews: 312,\n    category: \"felpa\",\n    variants: [\n      { size: \"M\", color: \"nero\", stock: 12 },\n      { size: \"L\", color: \"nero\", stock: 10 },\n      { size: \"XL\", color: \"nero\", stock: 5 }\n    ]\n  },\n  {\n    id: \"550e8400-0003-41d4-a716-446655440003\",\n    name: \"Jeans Slim Fit\",\n    brand: \"Denim Co\",\n    price: 79.90,\n    original_price: 99.90,\n    discount_percentage: 20,\n    images: [\"https://images.unsplash.com/photo-1542272604-787c3835535d?w=400\"],\n    rating: 4.7,\n    reviews: 456,\n    category: \"pantaloni\",\n    variants: [\n      { size: \"30\", color: \"blu\", stock: 8 },\n      { size: \"32\", color: \"blu\", stock: 15 },\n      { size: \"34\", color: \"blu\", stock: 12 }\n    ]\n  }\n];\n\nconst getMockProduct = (productId) => {\n  const products = getMockProducts();\n  return products.find(p => p.id === productId) || products[0];\n};\n\nconst getMockRecommendations = () => getMockProducts().slice(0, 3);\n\nexport default api;\n","const MICRO_MOUNT = \"/ldr-icons\";\r\n\r\nfunction isMounted(): boolean {\r\n  if (typeof window === \"undefined\") return false;\r\n  return window.location.pathname.startsWith(MICRO_MOUNT);\r\n}\r\n\r\n/** Prefissa i link interni con il mount quando serve */\r\nexport function withBase(p: string) {\r\n  const clean = p.startsWith(\"/\") ? p : `/${p}`;\r\n  if (typeof window !== \"undefined\" && isMounted()) {\r\n    return `${MICRO_MOUNT}${clean}`;\r\n  }\r\n  return clean; // standalone (child) o SSR: link relativo alla root\r\n}\r\n\r\n/** Costruisce il path API corretto (relativo) */\r\nexport function withApiPath(p: string) {\r\n  const clean = p.startsWith(\"/api\") ? p : `/api${p.startsWith(\"/\") ? p : `/${p}`}`;\r\n  if (typeof window !== \"undefined\" && isMounted()) {\r\n    return `${MICRO_MOUNT}${clean}`; // es. /ldr-icons/api/...\r\n  }\r\n  return clean; // es. /api/...\r\n}\r\n\r\n/** Alias per asset/static - QUESTO È PER LE IMMAGINI! */\r\nexport function withAssetPath(p: string) {\r\n  return withBase(p);\r\n}\r\n\r\n/** Helper: restituisce l'URL asset corretto preservando gli assoluti */\r\nexport function resolveAssetUrl(src?: string | null) {\r\n  if (!src) return src as any;\r\n  const s = String(src);\r\n  if (s.startsWith(\"http://\") || s.startsWith(\"https://\") || s.startsWith(\"data:\")) {\r\n    return s;\r\n  }\r\n  return withAssetPath(s);\r\n}\r\n\r\n\r\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n      );\n    }\n    listeners.clear();\n  };\n  const api = { setState, getState, getInitialState, subscribe, destroy };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\nvar vanilla = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'.\"\n    );\n  }\n  return createStore(createState);\n};\n\nexport { createStore, vanilla as default };\n","/**\n * @license React\n * use-sync-external-store-shim.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useState = React.useState,\n  useEffect = React.useEffect,\n  useLayoutEffect = React.useLayoutEffect,\n  useDebugValue = React.useDebugValue;\nfunction useSyncExternalStore$2(subscribe, getSnapshot) {\n  var value = getSnapshot(),\n    _useState = useState({ inst: { value: value, getSnapshot: getSnapshot } }),\n    inst = _useState[0].inst,\n    forceUpdate = _useState[1];\n  useLayoutEffect(\n    function () {\n      inst.value = value;\n      inst.getSnapshot = getSnapshot;\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n    },\n    [subscribe, value, getSnapshot]\n  );\n  useEffect(\n    function () {\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      return subscribe(function () {\n        checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      });\n    },\n    [subscribe]\n  );\n  useDebugValue(value);\n  return value;\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction useSyncExternalStore$1(subscribe, getSnapshot) {\n  return getSnapshot();\n}\nvar shim =\n  \"undefined\" === typeof window ||\n  \"undefined\" === typeof window.document ||\n  \"undefined\" === typeof window.document.createElement\n    ? useSyncExternalStore$1\n    : useSyncExternalStore$2;\nexports.useSyncExternalStore =\n  void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\"),\n  shim = require(\"use-sync-external-store/shim\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useSyncExternalStore = shim.useSyncExternalStore,\n  useRef = React.useRef,\n  useEffect = React.useEffect,\n  useMemo = React.useMemo,\n  useDebugValue = React.useDebugValue;\nexports.useSyncExternalStoreWithSelector = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot,\n  selector,\n  isEqual\n) {\n  var instRef = useRef(null);\n  if (null === instRef.current) {\n    var inst = { hasValue: !1, value: null };\n    instRef.current = inst;\n  } else inst = instRef.current;\n  instRef = useMemo(\n    function () {\n      function memoizedSelector(nextSnapshot) {\n        if (!hasMemo) {\n          hasMemo = !0;\n          memoizedSnapshot = nextSnapshot;\n          nextSnapshot = selector(nextSnapshot);\n          if (void 0 !== isEqual && inst.hasValue) {\n            var currentSelection = inst.value;\n            if (isEqual(currentSelection, nextSnapshot))\n              return (memoizedSelection = currentSelection);\n          }\n          return (memoizedSelection = nextSnapshot);\n        }\n        currentSelection = memoizedSelection;\n        if (objectIs(memoizedSnapshot, nextSnapshot)) return currentSelection;\n        var nextSelection = selector(nextSnapshot);\n        if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n          return (memoizedSnapshot = nextSnapshot), currentSelection;\n        memoizedSnapshot = nextSnapshot;\n        return (memoizedSelection = nextSelection);\n      }\n      var hasMemo = !1,\n        memoizedSnapshot,\n        memoizedSelection,\n        maybeGetServerSnapshot =\n          void 0 === getServerSnapshot ? null : getServerSnapshot;\n      return [\n        function () {\n          return memoizedSelector(getSnapshot());\n        },\n        null === maybeGetServerSnapshot\n          ? void 0\n          : function () {\n              return memoizedSelector(maybeGetServerSnapshot());\n            }\n      ];\n    },\n    [getSnapshot, getServerSnapshot, selector, isEqual]\n  );\n  var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n  useEffect(\n    function () {\n      inst.hasValue = !0;\n      inst.value = value;\n    },\n    [value]\n  );\n  useDebugValue(value);\n  return value;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","import { createStore } from 'zustand/vanilla';\nexport * from 'zustand/vanilla';\nimport ReactExports from 'react';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\n\nconst { useDebugValue } = ReactExports;\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\nlet didWarnAboutEqualityFn = false;\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity, equalityFn) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && equalityFn && !didWarnAboutEqualityFn) {\n    console.warn(\n      \"[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937\"\n    );\n    didWarnAboutEqualityFn = true;\n  }\n  const slice = useSyncExternalStoreWithSelector(\n    api.subscribe,\n    api.getState,\n    api.getServerState || api.getInitialState,\n    selector,\n    equalityFn\n  );\n  useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && typeof createState !== \"function\") {\n    console.warn(\n      \"[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.\"\n    );\n  }\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useBoundStore = (selector, equalityFn) => useStore(api, selector, equalityFn);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\nvar react = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`.\"\n    );\n  }\n  return create(createState);\n};\n\nexport { create, react as default, useStore };\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...a) => api.dispatch(...a), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (_e) {\n  }\n  if (!extensionConnector) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && enabled) {\n      console.warn(\n        \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n      );\n    }\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = (state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? { type: anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...a) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...a);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, f) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) f(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nconst combine = (initialState, create) => (...a) => Object.assign({}, initialState, create(...a));\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (_e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(\n      name,\n      JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n    ),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst oldImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    getStorage: () => localStorage,\n    serialize: JSON.stringify,\n    deserialize: JSON.parse,\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage;\n  try {\n    storage = options.getStorage();\n  } catch (_e) {\n  }\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const thenableSerialize = toThenable(options.serialize);\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version: options.version }).then(\n      (serializedValue) => storage.setItem(options.name, serializedValue)\n    ).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => cb(get()));\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\n      if (storageValue) {\n        return options.deserialize(storageValue);\n      }\n    }).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return deserializedStorageValue.state;\n        }\n      }\n    }).then((migratedState) => {\n      var _a2;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      return setItem();\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.getStorage) {\n        storage = newOptions.getStorage();\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  hydrate();\n  return stateFromStorage || configResult;\n};\nconst newImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return [\n              true,\n              options.migrate(\n                deserializedStorageValue.state,\n                deserializedStorageValue.version\n              )\n            ];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persistImpl = (config, baseOptions) => {\n  if (\"getStorage\" in baseOptions || \"serialize\" in baseOptions || \"deserialize\" in baseOptions) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead.\"\n      );\n    }\n    return oldImpl(config, baseOptions);\n  }\n  return newImpl(config, baseOptions);\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","// src/store/index.js - VERSIONE CORRETTA\r\n// Zustand Store for Global State Management with Enhanced Voice Integration\r\n\r\nimport { create } from 'zustand';\r\nimport { devtools, persist } from 'zustand/middleware';\r\n\r\n// Helpers per integrazione Voce ⇄ Carrello\r\nconst normalizeKey = (s) =>\r\n  (s || '')\r\n    .toString()\r\n    .normalize('NFD')\r\n    .replace(/\\p{Diacritic}/gu, '')\r\n    .toLowerCase()\r\n    .replace(/[^a-z0-9]+/g, ' ')\r\n    .trim();\r\n\r\nconst publishCartSnapshot = (cart) => {\r\n  if (typeof window === 'undefined') return;\r\n  const snapshot = (cart || []).map((item) => ({\r\n    item_id: item.id,\r\n    product_id: item.product?.id,\r\n    name: item.product?.name,\r\n    size: item.size,\r\n    color: item.color,\r\n    quantity: item.quantity,\r\n    price: item.product?.price,\r\n  }));\r\n  const map = {};\r\n  for (const it of snapshot) {\r\n    const key = normalizeKey(`${it.name} ${it.size || ''} ${it.color || ''}`);\r\n    if (key) map[key] = it.item_id;\r\n  }\r\n  window.cartSnapshot = snapshot;\r\n  window.cartItemsMap = map;\r\n};\r\n\r\nconst useStore = create(\r\n  devtools(\r\n    persist(\r\n      (set, get) => ({\r\n        // Cart State\r\n        cart: [],\r\n        cartTotal: 0,\r\n        cartCount: 0,\r\n        \r\n        // User Preferences\r\n        preferences: {\r\n          size: null,\r\n          color: null,\r\n          gender: null,\r\n          style: null,\r\n        },\r\n        \r\n        // UI State\r\n        isVoiceAssistantOpen: false,\r\n        isMobileMenuOpen: false,\r\n        isCartOpen: false,\r\n        currentPage: 'home',\r\n        \r\n        // Voice State\r\n        voiceHistory: [],\r\n        isListening: false,\r\n        \r\n        // ✅ PRODUCTS STATE MIGLIORATO\r\n        products: [],\r\n        filteredProducts: [],\r\n        selectedProduct: null,\r\n        searchQuery: '',\r\n        activeFilters: {\r\n          category: null,\r\n          gender: null,\r\n          size: null,\r\n          color: null,\r\n          minPrice: 0,\r\n          maxPrice: 1000,\r\n          onSale: false,\r\n          brand: null,\r\n          style: null,\r\n        },\r\n        \r\n        // ✅ CART ACTIONS MIGLIORATI\r\n        addToCart: (product, size, color, quantity = 1) => {\r\n          set((state) => {\r\n            const existingItem = state.cart.find(\r\n              item => item.product.id === product.id && \r\n                      item.size === size && \r\n                      item.color === color\r\n            );\r\n            \r\n            let newCart;\r\n            if (existingItem) {\r\n              newCart = state.cart.map(item =>\r\n                item === existingItem\r\n                  ? { ...item, quantity: item.quantity + quantity }\r\n                  : item\r\n              );\r\n            } else {\r\n              newCart = [...state.cart, {\r\n                id: `cart-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n                product,\r\n                size,\r\n                color,\r\n                quantity,\r\n                addedAt: new Date().toISOString()\r\n              }];\r\n            }\r\n            \r\n            const cartTotal = newCart.reduce(\r\n              (total, item) => total + (item.product.price * item.quantity),\r\n              0\r\n            );\r\n            const cartCount = newCart.reduce(\r\n              (count, item) => count + item.quantity,\r\n              0\r\n            );\r\n            \r\n            // Pubblica mappa per comandi vocali (rimozione per nome/taglia/colore)\r\n            publishCartSnapshot(newCart);\r\n            return { cart: newCart, cartTotal, cartCount };\r\n          });\r\n        },\r\n        \r\n        removeFromCart: (itemId) => {\r\n          set((state) => {\r\n            const newCart = state.cart.filter(item => item.id !== itemId);\r\n            const cartTotal = newCart.reduce(\r\n              (total, item) => total + (item.product.price * item.quantity),\r\n              0\r\n            );\r\n            const cartCount = newCart.reduce(\r\n              (count, item) => count + item.quantity,\r\n              0\r\n            );\r\n            publishCartSnapshot(newCart);\r\n            return { cart: newCart, cartTotal, cartCount };\r\n          });\r\n        },\r\n        \r\n        clearCart: () => {\r\n          set({ cart: [], cartTotal: 0, cartCount: 0 });\r\n          publishCartSnapshot([]);\r\n        },\r\n        \r\n        updateQuantity: (itemId, quantity) => {\r\n          if (quantity <= 0) {\r\n            get().removeFromCart(itemId);\r\n            return;\r\n          }\r\n          \r\n          set((state) => {\r\n            const newCart = state.cart.map(item =>\r\n              item.id === itemId ? { ...item, quantity } : item\r\n            );\r\n            const cartTotal = newCart.reduce(\r\n              (total, item) => total + (item.product.price * item.quantity),\r\n              0\r\n            );\r\n            const cartCount = newCart.reduce(\r\n              (count, item) => count + item.quantity,\r\n              0\r\n            );\r\n            publishCartSnapshot(newCart);\r\n            return { cart: newCart, cartTotal, cartCount };\r\n          });\r\n        },\r\n        \r\n        // ✅ Sync forte dal backend (/api/cart)\r\n        setCartFromServer: (serverCart) => {\r\n          const items = Array.isArray(serverCart?.items) ? serverCart.items : [];\r\n          set({\r\n            cart: items,\r\n            cartTotal: serverCart?.grand_total ?? serverCart?.total ?? 0,\r\n            cartCount: serverCart?.item_count ?? items.reduce((n, it) => n + (it.quantity || 0), 0),\r\n          });\r\n          publishCartSnapshot(items);\r\n        },\r\n        \r\n        // ✅ PREFERENCE ACTIONS\r\n        setPreferences: (preferences) => {\r\n          set((state) => ({\r\n            preferences: { ...state.preferences, ...preferences }\r\n          }));\r\n        },\r\n        \r\n        updatePreference: (key, value) => {\r\n          set((state) => ({\r\n            preferences: { ...state.preferences, [key]: value }\r\n          }));\r\n        },\r\n        \r\n        // ✅ NAVIGATION ACTIONS\r\n        setCurrentPage: (page) => set({ currentPage: page }),\r\n        \r\n        toggleVoiceAssistant: () => {\r\n          set((state) => ({ isVoiceAssistantOpen: !state.isVoiceAssistantOpen }));\r\n        },\r\n        \r\n        // ✅ VOICE HISTORY ACTIONS\r\n        addVoiceHistory: (entry) => {\r\n          set((state) => ({\r\n            voiceHistory: [...state.voiceHistory, {\r\n              ...entry,\r\n              timestamp: new Date().toISOString(),\r\n              id: `voice-${Date.now()}`\r\n            }].slice(-50) // Keep only last 50 entries\r\n          }));\r\n        },\r\n        \r\n        clearVoiceHistory: () => set({ voiceHistory: [] }),\r\n        \r\n        // ✅ PRODUCTS ACTIONS MIGLIORATI\r\n        setProducts: (products) => {\r\n          set({ \r\n            products, \r\n            filteredProducts: products \r\n          });\r\n        },\r\n        \r\n        // ✅ SEARCH QUERY MANAGEMENT\r\n        setSearchQuery: (query) => {\r\n          set((state) => {\r\n            const queryLower = query.toLowerCase();\r\n            \r\n            if (!query) {\r\n              return { \r\n                searchQuery: '', \r\n                filteredProducts: state.products \r\n              };\r\n            }\r\n            \r\n            // Enhanced search with Italian synonyms\r\n            const italianSynonyms = {\r\n              'maglia': ['maglia', 'maglietta', 't-shirt', 'polo'],\r\n              'felpa': ['felpa', 'hoodie', 'felpa con cappuccio'],\r\n              'pantaloni': ['pantaloni', 'jeans', 'denim', 'chino'],\r\n              'scarpe': ['scarpe', 'sneakers', 'stivali', 'sandali'],\r\n              'giacca': ['giacca', 'giubbotto', 'bomber', 'cappotto']\r\n            };\r\n            \r\n            // Expand search terms with synonyms\r\n            let expandedTerms = [queryLower];\r\n            for (const [key, synonyms] of Object.entries(italianSynonyms)) {\r\n              if (synonyms.some(syn => queryLower.includes(syn))) {\r\n                expandedTerms = [...expandedTerms, ...synonyms];\r\n              }\r\n            }\r\n            \r\n            const filtered = state.products.filter(product => {\r\n              const searchText = [\r\n                product.name,\r\n                product.description,\r\n                product.brand,\r\n                product.category,\r\n                product.subcategory,\r\n                ...(product.tags || [])\r\n              ].join(' ').toLowerCase();\r\n              \r\n              return expandedTerms.some(term => searchText.includes(term));\r\n            });\r\n            \r\n            return { \r\n              searchQuery: query, \r\n              filteredProducts: filtered \r\n            };\r\n          });\r\n        },\r\n        \r\n        // ✅ ENHANCED FILTER MANAGEMENT\r\n        setFilter: (filterName, value) => {\r\n          set((state) => {\r\n            const newFilters = { ...state.activeFilters, [filterName]: value };\r\n            const filteredProducts = get().applyFilters(state.products, newFilters, state.searchQuery);\r\n            \r\n            return {\r\n              activeFilters: newFilters,\r\n              filteredProducts\r\n            };\r\n          });\r\n        },\r\n        \r\n        setMultipleFilters: (filters) => {\r\n          set((state) => {\r\n            const newFilters = { ...state.activeFilters, ...filters };\r\n            const filteredProducts = get().applyFilters(state.products, newFilters, state.searchQuery);\r\n            \r\n            return {\r\n              activeFilters: newFilters,\r\n              filteredProducts\r\n            };\r\n          });\r\n        },\r\n        \r\n        clearFilters: () => {\r\n          set((state) => ({\r\n            activeFilters: {\r\n              category: null,\r\n              gender: null,\r\n              size: null,\r\n              color: null,\r\n              minPrice: 0,\r\n              maxPrice: 1000,\r\n              onSale: false,\r\n              brand: null,\r\n              style: null,\r\n            },\r\n            filteredProducts: state.products,\r\n            searchQuery: ''\r\n          }));\r\n        },\r\n        \r\n        // ✅ FILTER APPLICATION LOGIC\r\n        applyFilters: (products, filters, query = '') => {\r\n          let filtered = [...products];\r\n          \r\n          // Apply search query first\r\n          if (query) {\r\n            const queryLower = query.toLowerCase();\r\n            filtered = filtered.filter(product => {\r\n              const searchText = [\r\n                product.name,\r\n                product.description,\r\n                product.brand,\r\n                product.category,\r\n                product.subcategory,\r\n                ...(product.tags || [])\r\n              ].join(' ').toLowerCase();\r\n              \r\n              return searchText.includes(queryLower);\r\n            });\r\n          }\r\n          \r\n          // Apply category filter\r\n          if (filters.category) {\r\n            filtered = filtered.filter(p => \r\n              p.category === filters.category || \r\n              p.subcategory === filters.category\r\n            );\r\n          }\r\n          \r\n          // Apply gender filter\r\n          if (filters.gender) {\r\n            filtered = filtered.filter(p => \r\n              p.gender === filters.gender || \r\n              p.gender === 'unisex'\r\n            );\r\n          }\r\n          \r\n          // Apply size filter\r\n          if (filters.size) {\r\n            filtered = filtered.filter(p => \r\n              p.variants && p.variants.some(v => \r\n                v.size === filters.size && v.available\r\n              )\r\n            );\r\n          }\r\n          \r\n          // Apply color filter\r\n          if (filters.color) {\r\n            filtered = filtered.filter(p => \r\n              p.variants && p.variants.some(v => \r\n                v.color.toLowerCase().includes(filters.color.toLowerCase())\r\n              )\r\n            );\r\n          }\r\n          \r\n          // Apply price filters\r\n          if (filters.minPrice > 0) {\r\n            filtered = filtered.filter(p => p.price >= filters.minPrice);\r\n          }\r\n          if (filters.maxPrice < 1000) {\r\n            filtered = filtered.filter(p => p.price <= filters.maxPrice);\r\n          }\r\n          \r\n          // Apply sale filter\r\n          if (filters.onSale) {\r\n            filtered = filtered.filter(p => p.on_sale || p.discount_percentage > 0);\r\n          }\r\n          \r\n          // Apply brand filter\r\n          if (filters.brand) {\r\n            filtered = filtered.filter(p => \r\n              p.brand.toLowerCase().includes(filters.brand.toLowerCase())\r\n            );\r\n          }\r\n          \r\n          // Apply style filter\r\n          if (filters.style) {\r\n            filtered = filtered.filter(p => \r\n              p.style && p.style.toLowerCase().includes(filters.style.toLowerCase())\r\n            );\r\n          }\r\n          \r\n          return filtered;\r\n        },\r\n        \r\n        // ✅ COMPLETE FILTER PRODUCTS FUNCTION\r\n        filterProducts: (filters) => {\r\n          set((state) => {\r\n            const newFilters = { ...state.activeFilters, ...filters };\r\n            const filteredProducts = get().applyFilters(state.products, newFilters, state.searchQuery);\r\n            \r\n            return { \r\n              activeFilters: newFilters,\r\n              filteredProducts \r\n            };\r\n          });\r\n        },\r\n        \r\n        // ✅ SEARCH PRODUCTS WITH FILTERS (for Voice Commands)\r\n        searchProducts: (query, additionalFilters = {}) => {\r\n          set((state) => {\r\n            const combinedFilters = { ...state.activeFilters, ...additionalFilters };\r\n            const filteredProducts = get().applyFilters(state.products, combinedFilters, query);\r\n            \r\n            return { \r\n              searchQuery: query,\r\n              activeFilters: combinedFilters,\r\n              filteredProducts \r\n            };\r\n          });\r\n        },\r\n        \r\n        // ✅ PRODUCT SELECTION\r\n        setSelectedProduct: (product) => set({ selectedProduct: product }),\r\n        \r\n        // ✅ UTILITY FUNCTIONS\r\n        getProductById: (productId) => {\r\n          const state = get();\r\n          return state.products.find(p => p.id === productId);\r\n        },\r\n        \r\n        isProductInCart: (productId, size = null, color = null) => {\r\n          const state = get();\r\n          return state.cart.some(item => {\r\n            const matchesProduct = item.product.id === productId;\r\n            const matchesSize = !size || item.size === size;\r\n            const matchesColor = !color || item.color === color;\r\n            return matchesProduct && matchesSize && matchesColor;\r\n          });\r\n        },\r\n        \r\n        getCartItemCount: (productId, size = null, color = null) => {\r\n          const state = get();\r\n          const item = state.cart.find(item => {\r\n            const matchesProduct = item.product.id === productId;\r\n            const matchesSize = !size || item.size === size;\r\n            const matchesColor = !color || item.color === color;\r\n            return matchesProduct && matchesSize && matchesColor;\r\n          });\r\n          return item ? item.quantity : 0;\r\n        },\r\n        \r\n        // ✅ VOICE ASSISTANT INTEGRATION HELPERS\r\n        processVoiceCommand: (command, parameters) => {\r\n          const state = get();\r\n          \r\n          switch (command) {\r\n            case 'search_products':\r\n              if (parameters.query) {\r\n                get().searchProducts(parameters.query, parameters.filters || {});\r\n              }\r\n              break;\r\n              \r\n            case 'add_to_cart':\r\n              if (parameters.product_id) {\r\n                const product = get().getProductById(parameters.product_id);\r\n                if (product) {\r\n                  get().addToCart(\r\n                    product,\r\n                    parameters.size || 'M',\r\n                    parameters.color || 'nero',\r\n                    parameters.quantity || 1\r\n                  );\r\n                }\r\n              }\r\n              break;\r\n              \r\n            case 'clear_cart':\r\n              get().clearCart();\r\n              break;\r\n              \r\n            case 'set_preferences':\r\n              if (parameters.preferences) {\r\n                get().setPreferences(parameters.preferences);\r\n              }\r\n              break;\r\n              \r\n            default:\r\n              console.log('Unknown voice command:', command);\r\n          }\r\n          \r\n          // Add to voice history\r\n          get().addVoiceHistory({\r\n            command,\r\n            parameters,\r\n            result: 'processed'\r\n          });\r\n        },\r\n        \r\n        // ✅ ANALYTICS AND INSIGHTS\r\n        getShoppingInsights: () => {\r\n          const state = get();\r\n          \r\n          const totalSpent = state.cartTotal;\r\n          const itemsInCart = state.cartCount;\r\n          const favoriteCategories = state.voiceHistory\r\n            .filter(entry => entry.command === 'search_products')\r\n            .map(entry => entry.parameters?.query)\r\n            .filter(Boolean);\r\n          \r\n          const preferredSize = state.preferences.size || \r\n            (state.cart.length > 0 ? state.cart[0].size : null);\r\n          \r\n          return {\r\n            totalSpent,\r\n            itemsInCart,\r\n            favoriteCategories,\r\n            preferredSize,\r\n            searchHistory: state.voiceHistory.slice(-10),\r\n            lastUpdated: new Date().toISOString()\r\n          };\r\n        }\r\n      }),\r\n      {\r\n        name: 'aiva-storage',\r\n        partialize: (state) => ({\r\n          cart: state.cart,\r\n          cartTotal: state.cartTotal,\r\n          cartCount: state.cartCount,\r\n          preferences: state.preferences,\r\n          voiceHistory: state.voiceHistory.slice(-20), // Persist only last 20\r\n        }),\r\n      }\r\n    ),\r\n    {\r\n      name: 'aiva-store'\r\n    }\r\n  )\r\n);\r\n\r\nexport default useStore;","// src/hooks/useCart.js - Cart Management Hook\r\nimport { useState, useCallback, useEffect } from 'react';\r\nimport useStore from '../store';\r\nimport axios from 'axios';\r\n\r\nconst BACKEND_URL = import.meta.env.VITE_BACKEND_URL || 'http://localhost:8000';\r\n\r\n// Helpers per snapshot carrello\r\nexport function normalizeKey(s) {\r\n  return (s || '')\r\n    .toString()\r\n    .normalize('NFD')\r\n    .replace(/\\p{Diacritic}/gu, '')\r\n    .toLowerCase()\r\n    .replace(/[^a-z0-9]+/g, ' ')\r\n    .trim();\r\n}\r\n\r\n// Helper: sincronizza dallo stato canonico del server\r\nasync function syncCartFromServer() {\r\n  try {\r\n    const res = await axios.get(`${BACKEND_URL}/api/cart`);\r\n    // Aggiorna lo store globale con il payload del backend\r\n    const setCartFromServer = useStore.getState().setCartFromServer;\r\n    if (typeof setCartFromServer === 'function') {\r\n      setCartFromServer(res.data);\r\n    }\r\n  } catch (e) {\r\n    console.warn('Cart sync from server failed:', e?.message || e);\r\n  }\r\n}\r\nexport function publishCartSnapshot(cart) {\r\n  try {\r\n    const snapshot = (cart || []).map(item => ({\r\n      item_id: item.id,\r\n      product_id: item.product?.id,\r\n      name: item.product?.name,\r\n      size: item.size,\r\n      color: item.color,\r\n      quantity: item.quantity,\r\n      price: item.product?.price\r\n    }));\r\n\r\n    const map = {};\r\n    for (const it of snapshot) {\r\n      const key = normalizeKey(`${it.name} ${it.size || ''} ${it.color || ''}`);\r\n      if (key) map[key] = it.item_id;\r\n    }\r\n\r\n    window.cartSnapshot = snapshot;\r\n    window.cartItemsMap = map;\r\n    window.dispatchEvent(new CustomEvent('aiva-cart-changed', { detail: snapshot }));\r\n  } catch {}\r\n}\r\n\r\n// ✅ Helper: riassunto vocale del carrello\r\nexport function buildCartSpeechSummary(limit = 5) {\r\n  try {\r\n    const state = useStore.getState();\r\n    const items = Array.isArray(state.cart) ? state.cart : [];\r\n    if (items.length === 0) return 'Il carrello è vuoto.';\r\n    const parts = [];\r\n    for (let i = 0; i < Math.min(items.length, limit); i++) {\r\n      const it = items[i];\r\n      const name = it?.product?.name || 'prodotto';\r\n      const qty = it?.quantity || 1;\r\n      const size = it?.size ? `, taglia ${it.size}` : '';\r\n      const color = it?.color ? `, ${it.color}` : '';\r\n      parts.push(`${qty} x ${name}${size}${color}`);\r\n    }\r\n    const rest = items.length - Math.min(items.length, limit);\r\n    const tail = rest > 0 ? `, e altri ${rest} articoli.` : '.';\r\n    return `Nel carrello ci sono: ${parts.join('. ')}${tail}`;\r\n  } catch {\r\n    return 'Il carrello è vuoto.';\r\n  }\r\n}\r\n\r\nexport const useCart = () => {\r\n  const {\r\n    cart,\r\n    cartTotal,\r\n    cartCount,\r\n    addToCart: storeAddToCart,\r\n    removeFromCart: storeRemoveFromCart,\r\n    clearCart: storeClearCart,\r\n    updateQuantity: storeUpdateQuantity\r\n  } = useStore();\r\n  \r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [shipping, setShipping] = useState(0);\r\n  \r\n  // Calculate shipping based on total\r\n  useEffect(() => {\r\n    if (cartTotal >= 100) {\r\n      setShipping(0); // Free shipping over 100€\r\n    } else if (cartCount > 0) {\r\n      setShipping(9.90);\r\n    } else {\r\n      setShipping(0);\r\n    }\r\n  }, [cartTotal, cartCount]);\r\n  \r\n  // Pubblica snapshot ad ogni cambio carrello\r\n  useEffect(() => {\r\n    publishCartSnapshot(cart);\r\n  }, [cart]);\r\n\r\n  // Add item to cart with variant selection\r\n  const addToCart = useCallback(async (product, size, color, quantity = 1) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      // Check availability with backend\r\n      const response = await axios.get(\r\n        `${BACKEND_URL}/api/products/${product.id}/availability`,\r\n        {\r\n          params: { size, color }\r\n        }\r\n      );\r\n      \r\n      if (!response.data.available) {\r\n        throw new Error('Variante non disponibile');\r\n      }\r\n      \r\n      // Aggiornamento ottimistico locale\r\n      storeAddToCart(product, size, color, quantity);\r\n      publishCartSnapshot(useStore.getState().cart);\r\n\r\n      // Backend: add\r\n      await axios.post(`${BACKEND_URL}/api/cart/items`, {\r\n        product_id: product.id,\r\n        size,\r\n        color,\r\n        quantity\r\n      });\r\n      // Riallinea lo store allo stato server\r\n      await syncCartFromServer();\r\n      \r\n      return true;\r\n    } catch (err) {\r\n      setError(err.message || 'Errore aggiunta al carrello');\r\n      console.error('Add to cart error:', err);\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [storeAddToCart]);\r\n  \r\n  // Remove item from cart\r\n  const removeFromCart = useCallback(async (itemId) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      // Ottimistico locale\r\n      storeRemoveFromCart(itemId);\r\n      publishCartSnapshot(useStore.getState().cart);\r\n      // Backend: remove\r\n      await axios.delete(`${BACKEND_URL}/api/cart/items/${itemId}`);\r\n      // Sync forte dal server\r\n      await syncCartFromServer();\r\n      \r\n      return true;\r\n    } catch (err) {\r\n      setError(err.message || 'Errore rimozione dal carrello');\r\n      console.error('Remove from cart error:', err);\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [storeRemoveFromCart]);\r\n  \r\n  // Remove last item (for voice commands)\r\n  const removeLastItem = useCallback(async () => {\r\n    if (cart.length === 0) {\r\n      setError('Il carrello è vuoto');\r\n      return false;\r\n    }\r\n    \r\n    const lastItem = cart[cart.length - 1];\r\n    return removeFromCart(lastItem.id);\r\n  }, [cart, removeFromCart]);\r\n  \r\n  // Remove items by category (for voice commands)\r\n  const removeByCategory = useCallback(async (category) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const itemsToRemove = cart.filter(\r\n        item => item.product.category.toLowerCase() === category.toLowerCase()\r\n      );\r\n      \r\n      if (itemsToRemove.length === 0) {\r\n        setError(`Nessun prodotto della categoria ${category} nel carrello`);\r\n        return false;\r\n      }\r\n      \r\n      // Remove each item\r\n      for (const item of itemsToRemove) {\r\n        storeRemoveFromCart(item.id);\r\n      }\r\n      publishCartSnapshot(useStore.getState().cart);\r\n      \r\n      // Sync with backend\r\n      await axios.post(`${BACKEND_URL}/api/cart/remove-category`, {\r\n        category\r\n      });\r\n      \r\n      return true;\r\n    } catch (err) {\r\n      setError(err.message || 'Errore rimozione categoria');\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [cart, storeRemoveFromCart]);\r\n  \r\n  // Update item quantity\r\n  const updateQuantity = useCallback(async (itemId, quantity) => {\r\n    if (quantity < 1 || quantity > 10) {\r\n      setError('Quantità deve essere tra 1 e 10');\r\n      return false;\r\n    }\r\n    \r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      // Ottimistico locale\r\n      storeUpdateQuantity(itemId, quantity);\r\n      publishCartSnapshot(useStore.getState().cart);\r\n      // Backend: update qty\r\n      await axios.put(`${BACKEND_URL}/api/cart/items/${itemId}`, {\r\n        quantity\r\n      });\r\n      // Sync forte dal server\r\n      await syncCartFromServer();\r\n      \r\n      return true;\r\n    } catch (err) {\r\n      setError(err.message || 'Errore aggiornamento quantità');\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [storeUpdateQuantity]);\r\n  \r\n  // Increase quantity by amount\r\n  const increaseQuantity = useCallback(async (itemId, amount = 1) => {\r\n    const item = cart.find(i => i.id === itemId);\r\n    if (!item) {\r\n      setError('Prodotto non trovato nel carrello');\r\n      return false;\r\n    }\r\n    \r\n    const newQuantity = item.quantity + amount;\r\n    return updateQuantity(itemId, newQuantity);\r\n  }, [cart, updateQuantity]);\r\n  \r\n  // Decrease quantity by amount\r\n  const decreaseQuantity = useCallback(async (itemId, amount = 1) => {\r\n    const item = cart.find(i => i.id === itemId);\r\n    if (!item) {\r\n      setError('Prodotto non trovato nel carrello');\r\n      return false;\r\n    }\r\n    \r\n    const newQuantity = item.quantity - amount;\r\n    if (newQuantity <= 0) {\r\n      return removeFromCart(itemId);\r\n    }\r\n    \r\n    return updateQuantity(itemId, newQuantity);\r\n  }, [cart, updateQuantity, removeFromCart]);\r\n  \r\n  // Clear entire cart\r\n  const clearCart = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      // Clear locale per reattività\r\n      storeClearCart();\r\n      publishCartSnapshot(useStore.getState().cart);\r\n      // Backend: clear\r\n      await axios.post(`${BACKEND_URL}/api/cart/clear`);\r\n      // Sync forte dal server (dovrebbe risultare vuoto)\r\n      await syncCartFromServer();\r\n      \r\n      return true;\r\n    } catch (err) {\r\n      setError(err.message || 'Errore svuotamento carrello');\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [storeClearCart]);\r\n  \r\n  // Get cart summary\r\n  const getCartSummary = useCallback(() => {\r\n    const subtotal = cartTotal;\r\n    const shippingCost = shipping;\r\n    const total = subtotal + shippingCost;\r\n    \r\n    return {\r\n      items: cart,\r\n      itemCount: cartCount,\r\n      subtotal,\r\n      shipping: shippingCost,\r\n      total\r\n    };\r\n  }, [cart, cartCount, cartTotal, shipping]);\r\n  \r\n  // Check if product is in cart\r\n  const isInCart = useCallback((productId, size = null, color = null) => {\r\n    return cart.some(item => {\r\n      const matchesProduct = item.product.id === productId;\r\n      const matchesSize = !size || item.size === size;\r\n      const matchesColor = !color || item.color === color;\r\n      return matchesProduct && matchesSize && matchesColor;\r\n    });\r\n  }, [cart]);\r\n  \r\n  // Get item quantity in cart\r\n  const getItemQuantity = useCallback((productId, size = null, color = null) => {\r\n    const item = cart.find(item => {\r\n      const matchesProduct = item.product.id === productId;\r\n      const matchesSize = !size || item.size === size;\r\n      const matchesColor = !color || item.color === color;\r\n      return matchesProduct && matchesSize && matchesColor;\r\n    });\r\n    \r\n    return item ? item.quantity : 0;\r\n  }, [cart]);\r\n  \r\n  // Sync cart with backend on mount\r\n  useEffect(() => {\r\n    const syncCart = async () => {\r\n      try {\r\n        const response = await axios.get(`${BACKEND_URL}/api/cart`);\r\n        const setCartFromServer = useStore.getState().setCartFromServer;\r\n        if (typeof setCartFromServer === 'function') {\r\n          setCartFromServer(response.data);\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to sync cart:', err);\r\n      }\r\n    };\r\n    \r\n    syncCart();\r\n  }, []);\r\n  \r\n  return {\r\n    // State\r\n    cart,\r\n    cartCount,\r\n    cartTotal,\r\n    shipping,\r\n    grandTotal: cartTotal + shipping,\r\n    loading,\r\n    error,\r\n    \r\n    // Actions\r\n    addToCart,\r\n    removeFromCart,\r\n    removeLastItem,\r\n    removeByCategory,\r\n    updateQuantity,\r\n    increaseQuantity,\r\n    decreaseQuantity,\r\n    clearCart,\r\n    \r\n    // Utilities\r\n    getCartSummary,\r\n    isInCart,\r\n    getItemQuantity\r\n  };\r\n};","// src/hooks/useFavorites.js - Favorites Management Hook\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport useStore from '../store';\r\n\r\nexport const useFavorites = () => {\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Load favorites from localStorage on mount\r\n  useEffect(() => {\r\n    const savedFavorites = localStorage.getItem('aiva-favorites');\r\n    if (savedFavorites) {\r\n      try {\r\n        setFavorites(JSON.parse(savedFavorites));\r\n      } catch (error) {\r\n        console.error('Error loading favorites:', error);\r\n        setFavorites([]);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Save favorites to localStorage whenever favorites change\r\n  useEffect(() => {\r\n    localStorage.setItem('aiva-favorites', JSON.stringify(favorites));\r\n  }, [favorites]);\r\n\r\n  // Add product to favorites\r\n  const addToFavorites = useCallback((product) => {\r\n    setFavorites(prev => {\r\n      const isAlreadyFavorite = prev.some(fav => fav.id === product.id);\r\n      if (isAlreadyFavorite) {\r\n        return prev; // Already in favorites\r\n      }\r\n      return [...prev, product];\r\n    });\r\n  }, []);\r\n\r\n  // Remove product from favorites\r\n  const removeFromFavorites = useCallback((productId) => {\r\n    setFavorites(prev => prev.filter(fav => fav.id !== productId));\r\n  }, []);\r\n\r\n  // Toggle favorite status\r\n  const toggleFavorite = useCallback((product) => {\r\n    const isFavorite = favorites.some(fav => fav.id === product.id);\r\n    if (isFavorite) {\r\n      removeFromFavorites(product.id);\r\n    } else {\r\n      addToFavorites(product);\r\n    }\r\n  }, [favorites, addToFavorites, removeFromFavorites]);\r\n\r\n  // Check if product is favorite\r\n  const isFavorite = useCallback((productId) => {\r\n    return favorites.some(fav => fav.id === productId);\r\n  }, [favorites]);\r\n\r\n  // Clear all favorites\r\n  const clearFavorites = useCallback(() => {\r\n    setFavorites([]);\r\n  }, []);\r\n\r\n  // Get favorites count\r\n  const favoritesCount = favorites.length;\r\n\r\n  return {\r\n    favorites,\r\n    favoritesCount,\r\n    addToFavorites,\r\n    removeFromFavorites,\r\n    toggleFavorite,\r\n    isFavorite,\r\n    clearFavorites,\r\n    loading\r\n  };\r\n};\r\n","import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { ShoppingCart, Heart, Star, Filter, Grid, List, ChevronDown, X, Check } from 'lucide-react';\nimport { useNavigate } from 'react-router-dom';\nimport { productAPI } from '../services/api';\nimport { resolveAssetUrl } from '../lib/basePath';\nimport { useCart } from '../hooks/useCart';\nimport { useFavorites } from '../hooks/useFavorites';\n\nconst ProductCard = ({ product, onAddToCart, onToggleFavorite, isFavorite }) => {\n  const [isHovered, setIsHovered] = useState(false);\n  const navigate = useNavigate();\n  \n  const handleCardClick = () => {\n    navigate(`/products/${product.id}`);\n  };\n  \n  return (\n    <motion.div\n      className=\"bg-white rounded-xl shadow-sm overflow-hidden cursor-pointer\"\n      whileHover={{ y: -8, shadow: \"xl\" }}\n      transition={{ type: \"spring\", stiffness: 300 }}\n      onHoverStart={() => setIsHovered(true)}\n      onHoverEnd={() => setIsHovered(false)}\n      onClick={handleCardClick}\n    >\n      <div className=\"relative overflow-hidden h-72 bg-gray-100\">\n        <motion.img\n          src={resolveAssetUrl(product.images?.[0] || product.image || \"/static/images/placeholder.jpg\")}\n          alt={product.name}\n          className=\"w-full h-full object-cover\"\n          animate={{ scale: isHovered ? 1.1 : 1 }}\n          transition={{ duration: 0.3 }}\n        />\n        {(() => {\n          const discount = Number(product.discount_percentage ?? product.discount ?? 0);\n          const original = Number(product.original_price ?? product.originalPrice ?? 0);\n          const price = Number(product.price ?? 0);\n          const hasDiscount = discount > 0 && original > price;\n          return hasDiscount;\n        })() && (\n          <motion.div\n            className=\"absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold\"\n            initial={{ rotate: -15 }}\n            animate={{ rotate: isHovered ? 0 : -15 }}\n          >\n            -{Number(product.discount_percentage ?? product.discount ?? 0)}%\n          </motion.div>\n        )}\n        <motion.div\n          className=\"absolute top-4 right-4\"\n          whileHover={{ scale: 1.2 }}\n          whileTap={{ scale: 0.9 }}\n          onClick={(e) => {\n            e.stopPropagation();\n            onToggleFavorite(product);\n          }}\n        >\n          <button className={`p-2 rounded-full shadow-md transition-colors ${\n            isFavorite \n              ? 'bg-red-500 text-white hover:bg-red-600' \n              : 'bg-white text-gray-600 hover:bg-gray-100'\n          }`}>\n            <Heart size={20} fill={isFavorite ? \"currentColor\" : \"none\"} />\n          </button>\n        </motion.div>\n      </div>\n      \n      <div className=\"p-4\">\n        <p className=\"text-xs text-gray-500 uppercase tracking-wider mb-1\">{product.brand}</p>\n        <h3 className=\"font-semibold text-gray-900 mb-2\">{product.name}</h3>\n        <div className=\"flex items-center gap-2 mb-3\">\n          <div className=\"flex items-center\">\n            {[...Array(5)].map((_, i) => (\n              <Star\n                key={i}\n                size={14}\n                className={i < Math.floor(product.rating) ? 'text-yellow-400 fill-current' : 'text-gray-300'}\n              />\n            ))}\n          </div>\n          <span className=\"text-xs text-gray-500\">({product.reviews})</span>\n        </div>\n        <div className=\"flex items-center justify-between\">\n          <div>\n            {(() => {\n              const discount = Number(product.discount_percentage ?? product.discount ?? 0);\n              const original = Number(product.original_price ?? product.originalPrice ?? 0);\n              const price = Number(product.price ?? 0);\n              const hasDiscount = discount > 0 && original > price;\n              return hasDiscount ? (\n                <span className=\"text-sm text-gray-400 line-through mr-2\">€{original.toFixed(2)}</span>\n              ) : null;\n            })()}\n            <span className=\"text-xl font-bold text-gray-900\">€{Number(product.price ?? 0).toFixed(2)}</span>\n          </div>\n          <motion.button\n            onClick={(e) => {\n              e.stopPropagation();\n              onAddToCart(product);\n            }}\n            className=\"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n          >\n            <ShoppingCart size={20} />\n          </motion.button>\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\nconst ProductsPage = () => {\n  const [products, setProducts] = useState([]);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [sortBy, setSortBy] = useState('name');\n  const [viewMode, setViewMode] = useState('grid');\n  const [isQuickAddOpen, setIsQuickAddOpen] = useState(false);\n  const [quickAddProduct, setQuickAddProduct] = useState(null);\n  const [selectedSize, setSelectedSize] = useState('');\n  const [selectedColor, setSelectedColor] = useState('');\n  const [isAdding, setIsAdding] = useState(false);\n\n  // Hooks\n  const { toggleFavorite, isFavorite } = useFavorites();\n  const { addToCart: addToCartHook } = useCart();\n\n  // (rimosso: gestito nell'effetto di esposizione contesto visibile)\n\n  const categories = [\n    { id: '', name: 'Tutte le categorie' },\n    { id: 't-shirt', name: 'T-Shirt' },\n    { id: 'camicia', name: 'Camicie' },\n    { id: 'maglione', name: 'Maglioni' },\n    { id: 'felpa', name: 'Felpe' },\n    { id: 'giacca', name: 'Giacche' },\n    { id: 'pantaloni', name: 'Pantaloni' },\n    { id: 'shorts', name: 'Shorts' },\n    { id: 'gonna', name: 'Gonne' },\n    { id: 'vestito', name: 'Vestiti' },\n    { id: 'scarpe', name: 'Scarpe' },\n    { id: 'accessori', name: 'Accessori' }\n  ];\n\n  // Load products from backend with fallback\n  useEffect(() => {\n    const loadProducts = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        // Load products with filters\n        const params = {};\n        if (selectedCategory) {\n          params.category = selectedCategory;\n        }\n        if (searchQuery) {\n          params.q = searchQuery;\n        }\n        \n        const productsData = await productAPI.getProducts(params);\n        setProducts(productsData);\n        setFilteredProducts(productsData);\n      } catch (err) {\n        console.error('Error loading products:', err);\n        setError('Errore nel caricamento dei prodotti. Riprova più tardi.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadProducts();\n  }, [selectedCategory, searchQuery]);\n\n  // Filter and sort products\n  useEffect(() => {\n    let filtered = [...products];\n\n    // Sort products\n    filtered.sort((a, b) => {\n      switch (sortBy) {\n        case 'price-low':\n          return a.price - b.price;\n        case 'price-high':\n          return b.price - a.price;\n        case 'rating':\n          return b.rating - a.rating;\n        case 'name':\n        default:\n          return a.name.localeCompare(b.name);\n      }\n    });\n\n    setFilteredProducts(filtered);\n  }, [products, sortBy]);\n\n  // 🔊 Espone i prodotti visibili (id + mappa normalizzata nome→id) e un entrypoint filtri stabile\n  useEffect(() => {\n    // Normalizza il nome per match robusti (lowercase + rimozione accenti/punteggiatura)\n    const normalize = (s) =>\n      (s || '')\n        .toLowerCase()\n        .normalize('NFD')\n        .replace(/\\p{Diacritic}/gu, '')\n        .replace(/[^a-z0-9\\s]/g, '')\n        .trim();\n\n    const ids = (filteredProducts || []).map((p) => p.id);\n    const map = Object.fromEntries(\n      (filteredProducts || []).map((p) => [normalize(p.name), p.id])\n    );\n\n    // Contesto per l’assistente\n    window.visibleProductIds = ids;\n    window.visibleProductsMap = map;\n    window.productsSearchQuery = searchQuery || '';\n    window.productsSelectedCategory = selectedCategory || '';\n\n    // Entrypoint robusto per applicare filtri via voce\n    window.applyProductFilters = ({ query, q, category, sort, price_range } = {}) => {\n      const qq = query ?? q;\n      if (typeof qq === 'string') setSearchQuery(qq);\n      if (typeof category === 'string') setSelectedCategory(category);\n      if (typeof sort === 'string') setSortBy(sort);\n      if (price_range === 'low-to-high') setSortBy('price-low');\n      if (price_range === 'high-to-low') setSortBy('price-high');\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    };\n\n    return () => {\n      delete window.visibleProductIds;\n      delete window.visibleProductsMap;\n      delete window.applyProductFilters;\n      delete window.productsSearchQuery;\n      delete window.productsSelectedCategory;\n    };\n  }, [filteredProducts, searchQuery, selectedCategory, setSearchQuery, setSelectedCategory, setSortBy]);\n\n  const getAvailableSizes = (product) => {\n    const sizes = new Set();\n    (product?.variants || []).forEach(v => { if (v.available) sizes.add(v.size); });\n    return Array.from(sizes);\n  };\n\n  const getAvailableColors = (product) => {\n    const colors = new Set();\n    (product?.variants || []).forEach(v => { if (v.available) colors.add(v.color); });\n    return Array.from(colors);\n  };\n\n  const ensureValidCombination = (product, size, color) => {\n    const variants = product?.variants || [];\n    return variants.some(v => v.size === size && v.color === color && v.available);\n  };\n\n  const openQuickAdd = (product) => {\n    setQuickAddProduct(product);\n    const sizes = getAvailableSizes(product);\n    const colors = getAvailableColors(product);\n    const defaultSize = sizes[0] || '';\n    const defaultColor = colors[0] || '';\n    setSelectedSize(defaultSize);\n    setSelectedColor(defaultColor);\n    setIsQuickAddOpen(true);\n  };\n\n  const handleAddToCart = (product) => {\n    // Open variant selection modal instead of adding a default variant\n    openQuickAdd(product);\n  };\n\n  const confirmAddToCart = async () => {\n    if (!quickAddProduct) return;\n    if (!selectedSize || !selectedColor) return;\n    if (!ensureValidCombination(quickAddProduct, selectedSize, selectedColor)) return;\n    try {\n      setIsAdding(true);\n      await addToCartHook(quickAddProduct, selectedSize, selectedColor, 1);\n      setIsQuickAddOpen(false);\n      setQuickAddProduct(null);\n      console.log('Product added to cart:', quickAddProduct?.name);\n    } catch (error) {\n      console.error('Error adding to cart:', error);\n    } finally {\n      setIsAdding(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Caricamento prodotti...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n        {/* Header */}\n        <motion.div\n          className=\"mb-8\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n        >\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Prodotti</h1>\n          <p className=\"text-gray-600\">Scopri la nostra collezione di moda italiana</p>\n        </motion.div>\n\n        {/* Filters and Search */}\n        <motion.div\n          className=\"bg-white rounded-lg shadow-sm p-6 mb-8\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n        >\n          <div className=\"flex flex-col lg:flex-row gap-4 items-center justify-between\">\n            {/* Search */}\n            <div className=\"flex-1 max-w-md\">\n              <input\n                type=\"text\"\n                placeholder=\"Cerca prodotti...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              />\n            </div>\n\n            {/* Category Filter */}\n            <div className=\"flex items-center gap-2\">\n              <Filter size={20} className=\"text-gray-500\" />\n              <select\n                value={selectedCategory}\n                onChange={(e) => setSelectedCategory(e.target.value)}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                {categories.map(category => (\n                  <option key={category.id} value={category.id}>\n                    {category.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Sort */}\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-gray-500\">Ordina per:</span>\n              <select\n                value={sortBy}\n                onChange={(e) => setSortBy(e.target.value)}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"name\">Nome</option>\n                <option value=\"price-low\">Prezzo: Basso-Alto</option>\n                <option value=\"price-high\">Prezzo: Alto-Basso</option>\n                <option value=\"rating\">Valutazione</option>\n              </select>\n            </div>\n\n            {/* View Mode */}\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={() => setViewMode('grid')}\n                className={`p-2 rounded ${viewMode === 'grid' ? 'bg-blue-100 text-blue-600' : 'text-gray-500'}`}\n              >\n                <Grid size={20} />\n              </button>\n              <button\n                onClick={() => setViewMode('list')}\n                className={`p-2 rounded ${viewMode === 'list' ? 'bg-blue-100 text-blue-600' : 'text-gray-500'}`}\n              >\n                <List size={20} />\n              </button>\n            </div>\n          </div>\n        </motion.div>\n\n        {/* Results Count */}\n        <div className=\"mb-6\">\n          <p className=\"text-gray-600\">\n            {filteredProducts.length} prodotti trovati\n            {searchQuery && ` per \"${searchQuery}\"`}\n            {selectedCategory && ` in ${categories.find(c => c.id === selectedCategory)?.name}`}\n          </p>\n        </div>\n\n        {/* Products Grid */}\n        <motion.div\n          className={`grid gap-6 ${\n            viewMode === 'grid' \n              ? 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4' \n              : 'grid-cols-1'\n          }`}\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.2 }}\n        >\n          {filteredProducts.map((product, index) => (\n            <motion.div\n              key={product.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.1 }}\n            >\n              <ProductCard \n                product={product} \n                onAddToCart={handleAddToCart}\n                onToggleFavorite={toggleFavorite}\n                isFavorite={isFavorite(product.id)}\n              />\n            </motion.div>\n          ))}\n        </motion.div>\n\n        {/* No Results */}\n        {filteredProducts.length === 0 && (\n          <motion.div\n            className=\"text-center py-12\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n          >\n            <div className=\"text-gray-400 mb-4\">\n              <Filter size={64} className=\"mx-auto\" />\n            </div>\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Nessun prodotto trovato</h3>\n            <p className=\"text-gray-600 mb-4\">\n              Prova a modificare i filtri o la ricerca\n            </p>\n            <button\n              onClick={() => {\n                setSearchQuery('');\n                setSelectedCategory('');\n              }}\n              className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n            >\n              Rimuovi filtri\n            </button>\n          </motion.div>\n        )}\n      </div>\n      {/* Quick Add Modal */}\n      {isQuickAddOpen && quickAddProduct && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setIsQuickAddOpen(false)} />\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"relative bg-white rounded-2xl shadow-xl w-full max-w-md p-6 z-10\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"flex items-start justify-between mb-4\">\n              <div>\n                <h3 className=\"text-xl font-semibold text-gray-900\">{quickAddProduct.name}</h3>\n                <p className=\"text-sm text-gray-500\">{quickAddProduct.brand}</p>\n              </div>\n              <button\n                onClick={() => setIsQuickAddOpen(false)}\n                className=\"p-2 rounded-full hover:bg-gray-100\"\n              >\n                <X size={18} />\n              </button>\n            </div>\n\n            <div className=\"space-y-5\">\n              {/* Size */}\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Seleziona taglia</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {getAvailableSizes(quickAddProduct).map((size) => (\n                    <button\n                      key={size}\n                      onClick={() => setSelectedSize(size)}\n                      className={`px-3 py-2 rounded-lg border text-sm font-medium ${\n                        selectedSize === size\n                          ? 'border-blue-600 text-blue-600 bg-blue-50'\n                          : 'border-gray-300 text-gray-700 hover:border-gray-400'\n                      }`}\n                    >\n                      {size}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Color */}\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Seleziona colore</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {getAvailableColors(quickAddProduct).map((color) => (\n                    <button\n                      key={color}\n                      onClick={() => setSelectedColor(color)}\n                      className={`px-3 py-2 rounded-lg border text-sm font-medium capitalize ${\n                        selectedColor === color\n                          ? 'border-blue-600 text-blue-600 bg-blue-50'\n                          : 'border-gray-300 text-gray-700 hover:border-gray-400'\n                      }`}\n                    >\n                      {color}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex items-center gap-3 pt-2\">\n                <button\n                  onClick={confirmAddToCart}\n                  disabled={isAdding || !selectedSize || !selectedColor || !ensureValidCombination(quickAddProduct, selectedSize, selectedColor)}\n                  className=\"flex-1 inline-flex items-center justify-center gap-2 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 disabled:opacity-60\"\n                >\n                  <ShoppingCart size={18} />\n                  {isAdding ? 'Aggiungo...' : 'Aggiungi al carrello'}\n                </button>\n                <button\n                  onClick={() => setIsQuickAddOpen(false)}\n                  className=\"px-4 py-3 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50\"\n                >\n                  Annulla\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProductsPage;\n","import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { ShoppingCart, Heart, Star, Tag } from 'lucide-react';\nimport { productAPI, cartAPI } from '../services/api';\n\nconst OfferCard = ({ offer, onAddToCart }) => {\n  const [isHovered, setIsHovered] = useState(false);\n\n  return (\n    <motion.div\n      className=\"bg-white rounded-xl shadow-sm overflow-hidden cursor-pointer relative\"\n      whileHover={{ y: -8, shadow: \"xl\" }}\n      transition={{ type: \"spring\", stiffness: 300 }}\n      onHoverStart={() => setIsHovered(true)}\n      onHoverEnd={() => setIsHovered(false)}\n    >\n      {/* Discount Badge */}\n      <div className=\"absolute top-4 left-4 z-10\">\n        <motion.div\n          className=\"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1\"\n          initial={{ rotate: -15 }}\n          animate={{ rotate: isHovered ? 0 : -15 }}\n        >\n          <Tag size={14} />\n          -{offer.discount}%\n        </motion.div>\n      </div>\n\n      <div className=\"relative overflow-hidden h-72 bg-gray-100\">\n        <motion.img\n          src={offer.image}\n          alt={offer.name}\n          className=\"w-full h-full object-cover\"\n          animate={{ scale: isHovered ? 1.1 : 1 }}\n          transition={{ duration: 0.3 }}\n        />\n        \n        <motion.div\n          className=\"absolute top-4 right-16\"\n          whileHover={{ scale: 1.2 }}\n          whileTap={{ scale: 0.9 }}\n        >\n          <button className=\"p-2 bg-white rounded-full shadow-md hover:bg-gray-100\">\n            <Heart size={20} className=\"text-gray-600\" />\n          </button>\n        </motion.div>\n      </div>\n      \n      <div className=\"p-4\">\n        <p className=\"text-xs text-gray-500 uppercase tracking-wider mb-1\">{offer.brand}</p>\n        <h3 className=\"font-semibold text-gray-900 mb-2\">{offer.name}</h3>\n        <div className=\"flex items-center gap-2 mb-3\">\n          <div className=\"flex items-center\">\n            {[...Array(5)].map((_, i) => (\n              <Star\n                key={i}\n                size={14}\n                className={i < Math.floor(offer.rating) ? 'text-yellow-400 fill-current' : 'text-gray-300'}\n              />\n            ))}\n          </div>\n          <span className=\"text-xs text-gray-500\">({offer.reviews})</span>\n        </div>\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <span className=\"text-sm text-gray-400 line-through mr-2\">\n              €{Number(offer.originalPrice ?? 0).toFixed(2)}\n            </span>\n            <span className=\"text-xl font-bold text-red-600\">€{Number(offer.price ?? 0).toFixed(2)}</span>\n            <div className=\"text-xs text-green-600 font-semibold\">\n              Risparmi €{(Number(offer.originalPrice ?? 0) - Number(offer.price ?? 0)).toFixed(2)}\n            </div>\n          </div>\n          <motion.button\n            onClick={() => onAddToCart(offer)}\n            className=\"p-2 bg-red-600 text-white rounded-lg hover:bg-red-700\"\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n          >\n            <ShoppingCart size={20} />\n          </motion.button>\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\nconst OffersPage = () => {\n  const [offers, setOffers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const loadOffers = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        // Load products that are on sale\n        const productsData = await productAPI.getProducts({ on_sale: true });\n        \n        // Transform products to offers format\n        const offersData = productsData.map((product, index) => ({\n          id: product.id,\n          name: product.name,\n          brand: product.brand,\n          price: product.price,\n          originalPrice: product.original_price,\n          discount: product.discount_percentage,\n          image: product.images?.[0] || \"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400\",\n          rating: product.rating,\n          reviews: product.reviews,\n          category: product.category,\n          variants: product.variants\n        }));\n        \n        setOffers(offersData);\n      } catch (err) {\n        console.error('Error loading offers:', err);\n        setError('Errore nel caricamento delle offerte. Riprova più tardi.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadOffers();\n  }, []);\n\n  // Espone i prodotti visibili per il backend (nome -> id) e lista visibile\n  useEffect(() => {\n    try {\n      const map = {};\n      (offers || []).forEach(p => {\n        const key = (p.name || '').toLowerCase().normalize('NFKD').replace(/[^\\w\\s]/g,'').trim();\n        if (key) map[key] = p.id;\n      });\n      window.visibleProductsMap = map;\n      window.visibleProductIds = (offers || []).map(p => p.id);\n      window.currentPageContext = 'offers';\n    } catch {}\n    return () => {\n      if (window.currentPageContext === 'offers') {\n        try {\n          delete window.visibleProductsMap;\n          delete window.visibleProductIds;\n          delete window.currentPageContext;\n        } catch {}\n      }\n    };\n  }, [offers]);\n\n  // Listener eventuale per applicazione filtri lato offerte (no-op per ora)\n  useEffect(() => {\n    const handler = (e) => {\n      // Placeholder per eventuale gestione futura; manteniamo per compatibilità\n      // const { filters, query } = e.detail || {};\n    };\n    window.addEventListener('offers-apply-filters', handler);\n    return () => window.removeEventListener('offers-apply-filters', handler);\n  }, []);\n\n  const handleAddToCart = async (offer) => {\n    try {\n      const defaultVariant = offer.variants?.[0];\n      if (defaultVariant) {\n        await cartAPI.addToCart(\n          offer.id,\n          defaultVariant.size,\n          defaultVariant.color,\n          1\n        );\n        console.log('Offer added to cart:', offer.name);\n      }\n    } catch (error) {\n      console.error('Error adding offer to cart:', error);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-red-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Caricamento offerte...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n        {/* Header */}\n        <motion.div\n          className=\"mb-8\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n        >\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Offerte Speciali</h1>\n          <p className=\"text-gray-600\">Scopri una selezione di prodotti in sconto</p>\n        </motion.div>\n\n        {/* Results Count */}\n        <div className=\"mb-6\">\n          <p className=\"text-gray-600\">\n            {offers.length} offerte disponibili\n          </p>\n        </div>\n\n        {/* Offers Grid */}\n        <motion.div\n          className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.3 }}\n        >\n          {offers.map((offer, index) => (\n            <motion.div\n              key={offer.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.1 }}\n            >\n              <OfferCard offer={offer} onAddToCart={handleAddToCart} />\n            </motion.div>\n          ))}\n        </motion.div>\n\n        {/* No Results */}\n        {offers.length === 0 && (\n          <motion.div\n            className=\"text-center py-12\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n          >\n            <div className=\"text-gray-400 mb-4\">\n              <Tag size={64} className=\"mx-auto\" />\n            </div>\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Nessuna offerta trovata</h3>\n            <p className=\"text-gray-600 mb-4\">\n              Controlla di nuovo più tardi per nuove offerte\n            </p>\n          </motion.div>\n        )}\n\n        {/* Newsletter Signup */}\n        <motion.div\n          className=\"mt-16 bg-gradient-to-r from-red-500 to-orange-500 rounded-xl p-8 text-white text-center\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.4 }}\n        >\n          <h2 className=\"text-3xl font-bold mb-4\">Non Perdere le Offerte!</h2>\n          <p className=\"text-xl mb-6 opacity-90\">\n            Iscriviti alla newsletter per ricevere notifiche sulle offerte esclusive\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 max-w-md mx-auto\">\n            <input\n              type=\"email\"\n              placeholder=\"La tua email\"\n              className=\"flex-1 px-4 py-3 rounded-lg text-gray-900 placeholder-gray-500\"\n            />\n            <button className=\"px-6 py-3 bg-white text-red-600 font-semibold rounded-lg hover:bg-gray-100\">\n              Iscriviti\n            </button>\n          </div>\n        </motion.div>\n      </div>\n    </div>\n  );\n};\n\nexport default OffersPage;\n","import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ShoppingCart, Plus, Minus, Trash2, CreditCard, Truck, ArrowRight } from 'lucide-react';\r\nimport { useCart } from '../hooks/useCart';\r\nimport { publishCartSnapshot } from '../hooks/useCart';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst CartItem = ({ item, onUpdateQuantity, onRemove }) => {\r\n  const navigate = useNavigate();\r\n  const [isRemoving, setIsRemoving] = useState(false);\r\n\r\n  const handleRemove = () => {\r\n    setIsRemoving(true);\r\n    setTimeout(() => {\r\n      onRemove(item.id);\r\n    }, 300);\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      className={`bg-white rounded-lg shadow-sm p-4 border ${\r\n        isRemoving ? 'opacity-50' : ''\r\n      }`}\r\n      initial={{ opacity: 0, x: -20 }}\r\n      animate={{ opacity: 1, x: 0 }}\r\n      exit={{ opacity: 0, x: 20 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <div className=\"flex items-center gap-4\">\r\n        <div\r\n          className=\"w-20 h-20 bg-gray-100 rounded-lg overflow-hidden cursor-pointer\"\r\n          onClick={() => { if (item?.product?.id) navigate(`/products/${item.product.id}`); }}\r\n          title=\"Vai alla pagina prodotto\"\r\n          role=\"button\"\r\n        >\r\n          <img\r\n            src={item.product?.images?.[0] || item.product?.image}\r\n            alt={item.product?.name}\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"flex-1\">\r\n          <h3 className=\"font-semibold text-gray-900 mb-1\">{item.product?.name}</h3>\r\n          <p className=\"text-sm text-gray-500 mb-2\">{item.product?.brand}</p>\r\n          <div className=\"flex items-center gap-4 text-sm text-gray-600\">\r\n            <span>Taglia: {item.size}</span>\r\n            <span>Colore: {item.color}</span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => onUpdateQuantity(item.id, item.quantity - 1)}\r\n            disabled={item.quantity <= 1}\r\n            className=\"p-1 rounded-full bg-gray-100 hover:bg-gray-200 disabled:opacity-50\"\r\n          >\r\n            <Minus size={16} />\r\n          </button>\r\n          <span className=\"w-8 text-center font-semibold\">{item.quantity}</span>\r\n          <button\r\n            onClick={() => onUpdateQuantity(item.id, item.quantity + 1)}\r\n            disabled={item.quantity >= 10}\r\n            className=\"p-1 rounded-full bg-gray-100 hover:bg-gray-200 disabled:opacity-50\"\r\n          >\r\n            <Plus size={16} />\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"text-right\">\r\n          <div className=\"font-semibold text-gray-900\">\r\n            €{((item.product?.price || 0) * item.quantity).toFixed(2)}\r\n          </div>\r\n        </div>\r\n        \r\n        <button\r\n          onClick={handleRemove}\r\n          className=\"p-2 text-red-500 hover:bg-red-50 rounded-lg\"\r\n        >\r\n          <Trash2 size={18} />\r\n        </button>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nconst CartPage = () => {\r\n  const navigate = useNavigate();\r\n  const { cart, cartTotal, cartCount, shipping, updateQuantity, removeFromCart, clearCart } = useCart();\r\n\r\n  // Rinforza la pubblicazione dello snapshot quando si atterra su /cart\r\n  useEffect(() => {\r\n    if (Array.isArray(cart)) {\r\n      publishCartSnapshot(cart);\r\n    }\r\n  }, [cart]);\r\n\r\n  const subtotal = cartTotal;\r\n  const total = cartTotal + shipping;\r\n\r\n  if (cart.length === 0) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50\">\r\n        <div className=\"max-w-4xl mx-auto px-4 py-8\">\r\n          <motion.div\r\n            className=\"text-center py-16\"\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n          >\r\n            <div className=\"text-gray-400 mb-6\">\r\n              <ShoppingCart size={80} className=\"mx-auto\" />\r\n            </div>\r\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">Il tuo carrello è vuoto</h1>\r\n            <p className=\"text-gray-600 mb-8\">\r\n              Aggiungi alcuni prodotti per iniziare lo shopping\r\n            </p>\r\n            <motion.button\r\n              className=\"px-8 py-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700\"\r\n              onClick={() => navigate('/products')}\r\n              whileHover={{ scale: 1.05 }}\r\n              whileTap={{ scale: 0.95 }}\r\n            >\r\n              Inizia Shopping\r\n            </motion.button>\r\n          </motion.div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-6xl mx-auto px-4 py-8\">\r\n        {/* Header */}\r\n        <motion.div\r\n          className=\"mb-8\"\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n        >\r\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Carrello</h1>\r\n          <p className=\"text-gray-600\">\r\n            {cartCount} {cartCount === 1 ? 'articolo' : 'articoli'} nel carrello\r\n          </p>\r\n        </motion.div>\r\n\r\n        <div className=\"grid lg:grid-cols-3 gap-8\">\r\n          {/* Cart Items */}\r\n          <div className=\"lg:col-span-2\">\r\n            <motion.div\r\n              className=\"bg-white rounded-lg shadow-sm p-6 mb-6\"\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.1 }}\r\n            >\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h2 className=\"text-xl font-semibold text-gray-900\">I tuoi articoli</h2>\r\n                <button\r\n                  onClick={clearCart}\r\n                  className=\"text-red-500 hover:text-red-700 text-sm font-medium\"\r\n                >\r\n                  Svuota carrello\r\n                </button>\r\n              </div>\r\n              \r\n              <AnimatePresence>\r\n                <div className=\"space-y-4\">\r\n                  {cart.map((item) => (\r\n                    <CartItem\r\n                      key={item.id}\r\n                      item={item}\r\n                      onUpdateQuantity={updateQuantity}\r\n                      onRemove={removeFromCart}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </AnimatePresence>\r\n            </motion.div>\r\n\r\n            {/* Shipping Info */}\r\n            <motion.div\r\n              className=\"bg-blue-50 rounded-lg p-6\"\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.2 }}\r\n            >\r\n              <div className=\"flex items-center gap-3 mb-3\">\r\n                <Truck className=\"text-blue-600\" size={24} />\r\n                <h3 className=\"font-semibold text-gray-900\">Spedizione</h3>\r\n              </div>\r\n              <p className=\"text-gray-600 mb-2\">\r\n                {shipping === 0 \r\n                  ? \"🎉 Spedizione gratuita! Il tuo ordine supera i 100€\"\r\n                  : `Aggiungi €${(100 - subtotal).toFixed(2)} per la spedizione gratuita`\r\n                }\r\n              </p>\r\n              <div className=\"text-sm text-gray-500\">\r\n                Consegna stimata: 3-5 giorni lavorativi\r\n              </div>\r\n            </motion.div>\r\n          </div>\r\n\r\n          {/* Order Summary */}\r\n          <div className=\"lg:col-span-1\">\r\n            <motion.div\r\n              className=\"bg-white rounded-lg shadow-sm p-6 sticky top-8\"\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.3 }}\r\n            >\r\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Riepilogo ordine</h2>\r\n              \r\n              <div className=\"space-y-4 mb-6\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Subtotale</span>\r\n                  <span className=\"font-semibold\">€{subtotal.toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Spedizione</span>\r\n                  <span className=\"font-semibold\">\r\n                    {shipping === 0 ? 'Gratuita' : `€${shipping.toFixed(2)}`}\r\n                  </span>\r\n                </div>\r\n                <div className=\"border-t pt-4\">\r\n                  <div className=\"flex justify-between text-lg font-bold\">\r\n                    <span>Totale</span>\r\n                    <span>€{total.toFixed(2)}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <motion.button\r\n                className=\"w-full py-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 mb-4 flex items-center justify-center gap-2\"\r\n                whileHover={{ scale: 1.02 }}\r\n                whileTap={{ scale: 0.98 }}\r\n              >\r\n                <CreditCard size={20} />\r\n                Procedi al Checkout\r\n                <ArrowRight size={20} />\r\n              </motion.button>\r\n\r\n              <div className=\"text-center\">\r\n                <p className=\"text-sm text-gray-500 mb-2\">Pagamenti sicuri</p>\r\n                <div className=\"flex justify-center gap-2\">\r\n                  <div className=\"w-8 h-5 bg-gray-200 rounded text-xs flex items-center justify-center\">VISA</div>\r\n                  <div className=\"w-8 h-5 bg-gray-200 rounded text-xs flex items-center justify-center\">MC</div>\r\n                  <div className=\"w-8 h-5 bg-gray-200 rounded text-xs flex items-center justify-center\">PP</div>\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n\r\n            {/* Promo Code */}\r\n            <motion.div\r\n              className=\"bg-white rounded-lg shadow-sm p-6 mt-6\"\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.4 }}\r\n            >\r\n              <h3 className=\"font-semibold text-gray-900 mb-4\">Codice promozionale</h3>\r\n              <div className=\"flex gap-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Inserisci codice\"\r\n                  className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n                <button className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200\">\r\n                  Applica\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartPage;\r\n","// src/pages/ProductPage.jsx - Single Product Detail Page\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { \r\n  ArrowLeft, \r\n  Heart, \r\n  ShoppingCart, \r\n  Star, \r\n  Truck, \r\n  Shield, \r\n  RotateCcw,\r\n  Minus,\r\n  Plus,\r\n  Check\r\n} from 'lucide-react';\r\nimport { productAPI } from '../services/api';\r\nimport { resolveAssetUrl } from '../lib/basePath';\r\nimport { useCart } from '../hooks/useCart';\r\nimport { useFavorites } from '../hooks/useFavorites';\r\n\r\nconst ProductPage = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { addToCart } = useCart();\r\n  const { toggleFavorite, isFavorite } = useFavorites();\r\n  \r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [selectedSize, setSelectedSize] = useState('');\r\n  const [selectedColor, setSelectedColor] = useState('');\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [selectedImage, setSelectedImage] = useState(0);\r\n\r\n  // Load product data\r\n  useEffect(() => {\r\n    const loadProduct = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        const productData = await productAPI.getProduct(id);\r\n        setProduct(productData);\r\n        const stripMd = (s) =>\r\n          (s || '')\r\n            .replace(/```[\\s\\S]*?```/g, ' ')\r\n            .replace(/`[^`]*`/g, ' ')\r\n            .replace(/[\\*_~>#-]+/g, ' ')\r\n            .replace(/\\[(.*?)\\]\\((.*?)\\)/g, '$1')\r\n            .replace(/\\s{2,}/g, ' ')\r\n            .trim();\r\n\r\n        window.currentProductContext = {\r\n          id: productData.id,\r\n          name: productData.name,\r\n          description_text: stripMd(productData.description || productData.description_long || ''),\r\n          category: productData.category,\r\n          gender: productData.gender,\r\n          variants: (productData.variants || []).map((v) => ({\r\n            size: v.size,\r\n            color: v.color,\r\n            available: v.available,\r\n            stock: v.stock,\r\n          })),\r\n        };\r\n        // Set default selections\r\n        if (productData.variants && productData.variants.length > 0) {\r\n          setSelectedSize(productData.variants[0].size);\r\n          setSelectedColor(productData.variants[0].color);\r\n        }\r\n      } catch (err) {\r\n        console.error('Error loading product:', err);\r\n        setError('Errore nel caricamento del prodotto');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (id) {\r\n      loadProduct();\r\n    }\r\n    return () => {\r\n      if (window.currentProductContext?.id === id) {\r\n        delete window.currentProductContext;\r\n      }\r\n    };\r\n  }, [id]);\r\n\r\n  const handleAddToCart = async () => {\r\n    if (!selectedSize || !selectedColor) return;\r\n\r\n    try {\r\n      await addToCart(product, selectedSize, selectedColor, quantity);\r\n    } catch (error) {\r\n      console.error('Error adding to cart:', error);\r\n    }\r\n  };\r\n\r\n  const toggleFavoriteHandler = () => {\r\n    if (product) {\r\n      toggleFavorite(product);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Caricamento prodotto...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !product) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center p-8 bg-white rounded-lg shadow-md\">\r\n          <h2 className=\"text-2xl font-bold text-red-600 mb-4\">Errore!</h2>\r\n          <p className=\"text-gray-700 mb-6\">{error || 'Prodotto non trovato'}</p>\r\n          <button\r\n            onClick={() => navigate('/products')}\r\n            className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-300\"\r\n          >\r\n            Torna ai Prodotti\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        {/* Back Button */}\r\n        <motion.button\r\n          onClick={() => navigate(-1)}\r\n          className=\"flex items-center text-gray-600 hover:text-gray-900 mb-6\"\r\n          whileHover={{ x: -5 }}\r\n        >\r\n          <ArrowLeft size={20} className=\"mr-2\" />\r\n          Torna indietro\r\n        </motion.button>\r\n\r\n        <div className=\"grid lg:grid-cols-2 gap-12\">\r\n          {/* Product Images */}\r\n          <div className=\"space-y-4\">\r\n            {/* Main Image */}\r\n            <motion.div\r\n              className=\"aspect-square bg-white rounded-2xl overflow-hidden shadow-lg\"\r\n              initial={{ opacity: 0, scale: 0.9 }}\r\n              animate={{ opacity: 1, scale: 1 }}\r\n              transition={{ duration: 0.5 }}\r\n            >\r\n              <img\r\n                src={resolveAssetUrl(product.images?.[selectedImage] || product.image || \"/static/images/placeholder-lg.jpg\")}\r\n                alt={product.name}\r\n                className=\"w-full h-full object-cover\"\r\n              />\r\n            </motion.div>\r\n\r\n            {/* Thumbnail Images */}\r\n            {product.images && product.images.length > 1 && (\r\n              <div className=\"grid grid-cols-4 gap-2\">\r\n                {product.images.map((image, index) => (\r\n                  <motion.button\r\n                    key={index}\r\n                    onClick={() => setSelectedImage(index)}\r\n                    className={`aspect-square rounded-lg overflow-hidden ${\r\n                      selectedImage === index ? 'ring-2 ring-blue-500' : ''\r\n                    }`}\r\n                    whileHover={{ scale: 1.05 }}\r\n                    whileTap={{ scale: 0.95 }}\r\n                  >\r\n                    <img\r\n                      src={resolveAssetUrl(image)}\r\n                      alt={`${product.name} ${index + 1}`}\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                  </motion.button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Product Details */}\r\n          <div className=\"space-y-6\">\r\n            {/* Product Info */}\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{product.name}</h1>\r\n              <p className=\"text-lg text-gray-600 mb-4\">{product.brand}</p>\r\n              \r\n              {/* Rating */}\r\n              <div className=\"flex items-center mb-4\">\r\n                <div className=\"flex text-yellow-400\">\r\n                  {[...Array(5)].map((_, i) => (\r\n                    <Star\r\n                      key={i}\r\n                      size={20}\r\n                      fill={i < Math.floor(product.rating) ? \"currentColor\" : \"none\"}\r\n                      stroke=\"currentColor\"\r\n                    />\r\n                  ))}\r\n                </div>\r\n                <span className=\"text-sm text-gray-500 ml-2\">({product.reviews} recensioni)</span>\r\n              </div>\r\n\r\n              {/* Price */}\r\n              <div className=\"mb-6\">\r\n                {(() => {\r\n                  const hasDiscount = Number(product.discount_percentage ?? 0) > 0 && Number(product.original_price ?? 0) > Number(product.price ?? 0);\r\n                  return hasDiscount ? (\r\n                    <span className=\"text-lg text-gray-400 line-through mr-2\">€{Number(product.original_price ?? 0).toFixed(2)}</span>\r\n                  ) : null;\r\n                })()}\r\n                <span className=\"text-3xl font-bold text-gray-900\">€{Number(product.price ?? 0).toFixed(2)}</span>\r\n                {Number(product.discount_percentage ?? 0) > 0 && (\r\n                  <span className=\"ml-3 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold\">\r\n                    -{Number(product.discount_percentage ?? 0)}%\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Size Selection */}\r\n            {product.variants && (\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Taglia</h3>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {[...new Set(product.variants.map(v => v.size))].map(size => (\r\n                    <motion.button\r\n                      key={size}\r\n                      onClick={() => setSelectedSize(size)}\r\n                      className={`px-4 py-2 border rounded-lg font-medium ${\r\n                        selectedSize === size\r\n                          ? 'border-blue-500 bg-blue-50 text-blue-600'\r\n                          : 'border-gray-300 text-gray-700 hover:border-gray-400'\r\n                      }`}\r\n                      whileHover={{ scale: 1.05 }}\r\n                      whileTap={{ scale: 0.95 }}\r\n                    >\r\n                      {size}\r\n                    </motion.button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Color Selection */}\r\n            {product.variants && (\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Colore</h3>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {[...new Set(product.variants.map(v => v.color))].map(color => (\r\n                    <motion.button\r\n                      key={color}\r\n                      onClick={() => setSelectedColor(color)}\r\n                      className={`px-4 py-2 border rounded-lg font-medium capitalize ${\r\n                        selectedColor === color\r\n                          ? 'border-blue-500 bg-blue-50 text-blue-600'\r\n                          : 'border-gray-300 text-gray-700 hover:border-gray-400'\r\n                      }`}\r\n                      whileHover={{ scale: 1.05 }}\r\n                      whileTap={{ scale: 0.95 }}\r\n                    >\r\n                      {color}\r\n                    </motion.button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Quantity */}\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Quantità</h3>\r\n              <div className=\"flex items-center space-x-3\">\r\n                <motion.button\r\n                  onClick={() => setQuantity(Math.max(1, quantity - 1))}\r\n                  className=\"p-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\r\n                  whileTap={{ scale: 0.95 }}\r\n                >\r\n                  <Minus size={16} />\r\n                </motion.button>\r\n                <span className=\"text-lg font-medium px-4\">{quantity}</span>\r\n                <motion.button\r\n                  onClick={() => setQuantity(quantity + 1)}\r\n                  className=\"p-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\r\n                  whileTap={{ scale: 0.95 }}\r\n                >\r\n                  <Plus size={16} />\r\n                </motion.button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex space-x-4\">\r\n                <motion.button\r\n                  onClick={handleAddToCart}\r\n                  className=\"flex-1 bg-blue-600 text-white py-4 px-6 rounded-lg font-semibold hover:bg-blue-700 flex items-center justify-center\"\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                >\r\n                  <ShoppingCart size={20} className=\"mr-2\" />\r\n                  Aggiungi al Carrello\r\n                </motion.button>\r\n                \r\n                <motion.button\r\n                  onClick={toggleFavoriteHandler}\r\n                  className={`p-4 rounded-lg border-2 ${\r\n                    product && isFavorite(product.id)\r\n                      ? 'border-red-500 bg-red-50 text-red-600' \r\n                      : 'border-gray-300 text-gray-600 hover:border-gray-400'\r\n                  }`}\r\n                  whileHover={{ scale: 1.05 }}\r\n                  whileTap={{ scale: 0.95 }}\r\n                >\r\n                  <Heart size={20} fill={product && isFavorite(product.id) ? \"currentColor\" : \"none\"} />\r\n                </motion.button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Features */}\r\n            <div className=\"grid grid-cols-1 gap-4 pt-6 border-t\">\r\n              <div className=\"flex items-center text-gray-600\">\r\n                <Truck size={20} className=\"mr-3\" />\r\n                <span>Spedizione gratuita sopra i €100</span>\r\n              </div>\r\n              <div className=\"flex items-center text-gray-600\">\r\n                <RotateCcw size={20} className=\"mr-3\" />\r\n                <span>Reso gratuito entro 30 giorni</span>\r\n              </div>\r\n              <div className=\"flex items-center text-gray-600\">\r\n                <Shield size={20} className=\"mr-3\" />\r\n                <span>Pagamenti sicuri</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductPage;\r\n","// src/components/VoiceVisualizer.jsx - VERSIONE CORRETTA\nimport React, { useEffect, useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  X, \n  Mic,\n  Volume2,\n  Loader,\n  Sparkles,\n  ShoppingBag,\n  Search,\n  Navigation,\n  Zap,\n  MessageCircle\n} from 'lucide-react';\n\nconst VoiceVisualizer = ({ \n  isListening, \n  isProcessing, \n  isConnected, \n  isSpeaking,\n  isExecutingFunction,\n  currentFunction,\n  messages, \n  error,\n  onClose,\n  isAssistantActive // ✅ Aggiunto prop mancante\n}) => {\n  const [isVisible, setIsVisible] = useState(false);\n\n  // ✅ CONTROLLO VISIBILITÀ MIGLIORATO - Ora include anche quando assistente è attivo\n  useEffect(() => {\n    if (isListening || isProcessing || isSpeaking || isExecutingFunction || error || isAssistantActive) {\n      setIsVisible(true);\n    } else {\n      // Mantieni visibile brevemente dopo l'attività\n      const timer = setTimeout(() => {\n        setIsVisible(false);\n      }, 2000);\n      return () => clearTimeout(timer);\n    }\n  }, [isListening, isProcessing, isSpeaking, isExecutingFunction, error, isAssistantActive]);\n\n  // ✅ STATI CORRETTI E PRIORITARI\n  const getCurrentState = () => {\n    if (error) {\n      return {\n        icon: X,\n        text: 'Errore - Clicca per chiudere',\n        color: 'bg-red-500',\n        textColor: 'text-white',\n        animate: false\n      };\n    }\n    \n    if (isExecutingFunction) {\n      const functionIcons = {\n        'navigate_to_page': Navigation,\n        'search_products': Search,\n        'add_to_cart': ShoppingBag,\n        'get_cart_summary': ShoppingBag,\n        'get_recommendations': Sparkles,\n      };\n      return {\n        icon: functionIcons[currentFunction] || Zap,\n        text: 'Eseguo comando...',\n        color: 'bg-green-500',\n        textColor: 'text-white',\n        animate: true\n      };\n    }\n    \n    if (isSpeaking) {\n      return {\n        icon: Volume2,\n        text: 'AIVA sta parlando',\n        color: 'bg-purple-500',\n        textColor: 'text-white',\n        animate: true\n      };\n    }\n    \n    if (isProcessing) {\n      return {\n        icon: Loader,\n        text: '',\n        color: 'bg-blue-500',\n        textColor: 'text-white',\n        animate: true\n      };\n    }\n    \n    if (isListening) {\n      return {\n        icon: Mic,\n        text: 'Ti sto ascoltando',\n        color: 'bg-blue-500',\n        textColor: 'text-white',\n        animate: true\n      };\n    }\n    \n    return {\n      icon: MessageCircle,\n      text: 'AIVA pronta',\n      color: 'bg-gray-700',\n      textColor: 'text-white',\n      animate: false\n    };\n  };\n\n  const state = getCurrentState();\n\n  // ✅ CHIUSURA COMPLETA DELL'ASSISTENTE\n  const handleClose = (e) => {\n    e.stopPropagation();\n    console.log('🔴 VoiceVisualizer: Closing assistant completely');\n    \n    // Nascondi immediatamente\n    setIsVisible(false);\n    \n    // Chiama onClose per fermare tutto l'assistente\n    if (onClose) {\n      onClose();\n    }\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0, y: -20, scale: 0.9 }}\n        animate={{ opacity: 1, y: 0, scale: 1 }}\n        exit={{ opacity: 0, y: -20, scale: 0.9 }}\n        className=\"fixed top-6 left-0 right-0 z-[100]\"\n        style={{ pointerEvents: 'none' }}\n      >\n        <div className=\"relative mx-auto\" style={{ width: '400px', maxWidth: '90vw', pointerEvents: 'auto' }}>\n          {/* ✅ CONTAINER PRINCIPALE - DIMENSIONI FISSE */}\n          <motion.div\n            className=\"bg-black/90 backdrop-blur-xl rounded-2xl border border-white/10 shadow-2xl\"\n            style={{ \n              height: '80px', // ✅ ALTEZZA FISSA\n              width: '100%'\n            }}\n            initial={{ scale: 0.9 }}\n            animate={{ scale: 1 }}\n            transition={{ type: \"spring\", damping: 20 }}\n          >\n            <div className=\"flex items-center justify-between p-4 h-full\">\n              {/* ✅ SEZIONE SINISTRA - ICONA E STATO */}\n              <div className=\"flex items-center space-x-4 flex-1\">\n                {/* Icona Animata con Background Fisso */}\n                <div className=\"relative flex-shrink-0\">\n                  <motion.div\n                    className={`w-12 h-12 rounded-full ${state.color} flex items-center justify-center`}\n                    animate={state.animate ? {\n                      scale: [1, 1.1, 1],\n                    } : {}}\n                    transition={{\n                      duration: 1.2,\n                      repeat: state.animate ? Infinity : 0,\n                      ease: \"easeInOut\"\n                    }}\n                  >\n                    {state.icon === Loader ? (\n                      <Loader className=\"w-6 h-6 text-white animate-spin\" />\n                    ) : (\n                      <state.icon className=\"w-6 h-6 text-white\" />\n                    )}\n                  </motion.div>\n\n                  {/* Pulse Effect - Solo quando animato */}\n                  {state.animate && (\n                    <motion.div\n                      className={`absolute inset-0 rounded-full ${state.color} opacity-40`}\n                      animate={{\n                        scale: [1, 1.6],\n                        opacity: [0.4, 0]\n                      }}\n                      transition={{\n                        duration: 1.8,\n                        repeat: Infinity,\n                        ease: \"easeOut\"\n                      }}\n                    />\n                  )}\n                </div>\n\n                {/* Testo di Stato */}\n                <div className=\"flex flex-col min-w-0 flex-1\">\n                  <span className={`font-medium text-sm ${state.textColor} truncate`}>\n                    {state.text}\n                  </span>\n                  \n                  {/* ✅ INDICATORE CONNESSIONE SEMPRE VISIBILE */}\n                  <div className=\"flex items-center space-x-2 mt-1\">\n                    <div className={`w-2 h-2 rounded-full ${\n                      isConnected ? 'bg-green-400' : 'bg-red-400'\n                    }`} />\n                    <span className=\"text-white/60 text-xs\">\n                      {isConnected ? 'Connesso' : 'Connessione...'}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* ✅ SEZIONE DESTRA - VISUALIZZATORE E CHIUDI */}\n              <div className=\"flex items-center space-x-3 flex-shrink-0\">\n                {/* Visualizzatore Onde Sonore */}\n                {(isListening || isSpeaking) && (\n                  <div className=\"flex items-center space-x-1\">\n                    {[...Array(4)].map((_, i) => (\n                      <motion.div\n                        key={i}\n                        className={`w-1 rounded-full ${\n                          isListening ? 'bg-blue-400' : 'bg-purple-400'\n                        }`}\n                        animate={{\n                          height: [6, 18, 6],\n                        }}\n                        transition={{\n                          duration: 0.8,\n                          repeat: Infinity,\n                          delay: i * 0.15,\n                          ease: \"easeInOut\"\n                        }}\n                      />\n                    ))}\n                  </div>\n                )}\n\n                {/* Pulsante Chiudi */}\n                <motion.button\n                  onClick={handleClose}\n                  className=\"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors flex-shrink-0\"\n                  whileHover={{ scale: 1.1 }}\n                  whileTap={{ scale: 0.95 }}\n                  title=\"Chiudi assistente vocale\"\n                >\n                  <X className=\"w-4 h-4 text-white/80\" />\n                </motion.button>\n              </div>\n            </div>\n          </motion.div>\n\n          {/* Testo di stato — rimosso per non mostrare \"elaborazione in corso\" */}\n          {false && (\n            <p className=\"mt-2 text-sm text-muted-foreground\">\n              {/* lasciato intenzionalmente vuoto */}\n            </p>\n          )}\n\n          {/* Indicatore Funzione in esecuzione */}\n          {isExecutingFunction && currentFunction && (\n            <motion.div\n              className=\"absolute -bottom-8 left-1/2 transform -translate-x-1/2\"\n              initial={{ opacity: 0, y: -10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n            >\n              <div className=\"bg-green-500/90 text-white text-xs px-3 py-1 rounded-full backdrop-blur-sm\">\n                {currentFunction === 'search_products' && '🔍 Ricerca in corso'}\n                {currentFunction === 'add_to_cart' && '🛒 Aggiunta al carrello'}\n                {currentFunction === 'navigate_to_page' && '📍 Navigazione'}\n                {!['search_products', 'add_to_cart', 'navigate_to_page'].includes(currentFunction) && '⚡ Esecuzione'}\n              </div>\n            </motion.div>\n          )}\n        </div>\n      </motion.div>\n    </AnimatePresence>\n  );\n};\n\nexport default VoiceVisualizer;","// src/hooks/useVoiceAssistantNative.js - VERSIONE DEFINITIVA FIXATA\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { createWebSocketConnection, productAPI } from '../services/api';\nimport { useCart } from './useCart';\nimport { buildCartSpeechSummary } from './useCart';\nimport useStore from '../store';\n\nexport const useVoiceAssistantNative = () => {\n  const [isListening, setIsListening] = useState(false);\n  const [isConnected, setIsConnected] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isExecutingFunction, setIsExecutingFunction] = useState(false);\n  const [currentFunction, setCurrentFunction] = useState(null);\n  const [error, setError] = useState(null);\n  const [transcript, setTranscript] = useState('');\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isUserTurn, setIsUserTurn] = useState(true);\n  const [isAssistantActive, setIsAssistantActive] = useState(false);\n  const [sessionCount, setSessionCount] = useState(0);\n  \n  const navigate = useNavigate();\n  const { addToCart, removeFromCart, clearCart: clearCartAction, removeLastItem, updateQuantity } = useCart();\n  const { setSearchQuery, filterProducts, setMultipleFilters, clearFilters } = useStore();\n\n  const wsRef = useRef(null);\n  const sessionIdRef = useRef(`session-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`);\n  const reconnectTimeoutRef = useRef(null);\n  const reconnectAttemptsRef = useRef(0);\n  const recognitionRef = useRef(null);\n  const functionQueueRef = useRef([]);      // ⬅️ nuova coda\n  const isProcessingRef = useRef(false);    // usata per gating ASR\n  useEffect(() => { isProcessingRef.current = isProcessing; }, [isProcessing]);\n  const processingOwnedBySpeechRef = useRef(false);\n  // Listener WS aggiornabile senza dipendenze cicliche\n  const handleWSMessageRef = useRef(null);\n  const restartListeningRef = useRef(null);\n\n  const queuedMessagesRef = useRef([]);\n  const inactivityTimeoutRef = useRef(null);\n  const streamBufferRef = useRef('');\n  const isStreamingTTSRef = useRef(false);\n  const streamReleasePendingRef = useRef(false);\n  const utterQueueRef = useRef([]);\n  const ttsSafetyTimerRef = useRef(null);\n  // ⛔ Scarta messaggi WS residui del turno precedente (attivo dopo barge-in)\n  const dropStaleResponsesRef = useRef(false);\n  const hasSpokenThisTurnRef = useRef(false);\n  const isAssistantActiveRef = useRef(false);\n  const isConnectedRef = useRef(false);\n  const lastInteractionRef = useRef(Date.now());\n  const lastUserTextRef = useRef('');\n  const isRestartingRef = useRef(false); // ✅ NUOVO: Previene riavvii multipli\n  const selectedVoiceRef = useRef(null); // ✅ NUOVO: Memorizza la voce selezionata\n  // 🔊 Barge-in RMS\n  const bargeInCtxRef = useRef(null);\n  const bargeInStreamRef = useRef(null);\n  const bargeInAnalyserRef = useRef(null);\n  const bargeInRafRef = useRef(null);\n  // Durate finestra di ascolto e chiusura\n  const LISTENING_WINDOW_MS = 11000;\n  const CLOSING_GRACE_MS = 3000;\n  const NO_INPUT_MESSAGES = [\n    \"Se hai bisogno di altro, sono qui.\",\n    \"Ok! Buon proseguimento, chiamami se ti serve aiuto.\",\n    \"Resto a disposizione se ti serve altro.\"\n  ];\n  const listeningTimerRef = useRef(null);\n  const activeListenSessionIdRef = useRef(null);\n  const beepedThisSessionRef = useRef(false);\n  const closingTimerRef = useRef(null);\n  const turnLockRef = useRef(false);\n\n  const clearListeningTimers = useCallback(() => {\n    if (listeningTimerRef.current) { clearTimeout(listeningTimerRef.current); listeningTimerRef.current = null; }\n    if (closingTimerRef.current) { clearTimeout(closingTimerRef.current); closingTimerRef.current = null; }\n  }, []);\n\n  // 🔧 nuove ref in cima, vicino agli altri useRef:\n  const isSpeakingRef = useRef(false);\n  const isUserTurnRef = useRef(true);\n  const isExecutingFunctionRef = useRef(false);\n  // isProcessingRef e functionQueueRef già dichiarate sopra\n\n  // 🔔 Beep pronto-a-parlare + WS dev guard\n  const hasConnectedRef = useRef(false);\n  const audioCtxRef = useRef(null);\n  const lastBeepAtRef = useRef(0);\n  const playReadyBeep = useCallback(() => {\n    try {\n      // Throttle beep and only when not processing\n      if (isProcessingRef.current) return;\n      const now = Date.now();\n      if (now - lastBeepAtRef.current < 2000) return;\n      const AudioCtx = window.AudioContext || window.webkitAudioContext;\n      if (!audioCtxRef.current) audioCtxRef.current = new AudioCtx();\n      const ctx = audioCtxRef.current;\n      const osc = ctx.createOscillator();\n      const gain = ctx.createGain();\n      osc.type = 'sine';\n      osc.frequency.setValueAtTime(880, ctx.currentTime);\n      gain.gain.setValueAtTime(0.0001, ctx.currentTime);\n      gain.gain.exponentialRampToValueAtTime(0.2, ctx.currentTime + 0.01);\n      osc.connect(gain).connect(ctx.destination);\n      osc.start();\n      gain.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.15);\n      osc.stop(ctx.currentTime + 0.18);\n      lastBeepAtRef.current = now;\n    } catch {}\n  }, []);\n\n  // 🔊 Avvio/stop monitor barge-in: interrompe TTS se rileva voce per ~200ms\n  const startBargeInMonitor = useCallback(async () => {\n    try {\n      const AudioCtx = window.AudioContext || window.webkitAudioContext;\n      if (!AudioCtx) return;\n      if (!bargeInCtxRef.current) bargeInCtxRef.current = new AudioCtx();\n      const ctx = bargeInCtxRef.current;\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      bargeInStreamRef.current = stream;\n      const src = ctx.createMediaStreamSource(stream);\n      const analyser = ctx.createAnalyser();\n      analyser.fftSize = 512;\n      bargeInAnalyserRef.current = analyser;\n      src.connect(analyser);\n      let above = 0;\n      const thresh = 0.02; // RMS ≈ 2%\n      const need = 12;     // ~12 * 16ms ≈ 200ms\n      const data = new Uint8Array(analyser.fftSize);\n      const tick = () => {\n        analyser.getByteTimeDomainData(data);\n        let sum = 0;\n        for (let i = 0; i < data.length; i++) { const v = (data[i] - 128) / 128; sum += v * v; }\n        const rms = Math.sqrt(sum / data.length);\n        above = rms > thresh ? above + 1 : 0;\n        if (above >= need) {\n          try { window.speechSynthesis.cancel(); } catch {}\n          // 🔓 sblocca turno e scarta TUTTO il parlato/buffer pendente\n          utterQueueRef.current = [];\n          streamBufferRef.current = '';\n          dropStaleResponsesRef.current = true;\n          isStreamingTTSRef.current = false;\n          setIsSpeaking(false);  isSpeakingRef.current = false;\n          setIsProcessing(false); isProcessingRef.current = false;\n          turnLockRef.current = false;\n          stopBargeInMonitor();\n          if (restartListeningRef.current) restartListeningRef.current();\n          return;\n        }\n        bargeInRafRef.current = requestAnimationFrame(tick);\n      };\n      bargeInRafRef.current = requestAnimationFrame(tick);\n    } catch {}\n  }, []);\n\n  const stopBargeInMonitor = useCallback(() => {\n    try { if (bargeInRafRef.current) cancelAnimationFrame(bargeInRafRef.current); } catch {}\n    bargeInRafRef.current = null;\n    try { if (bargeInStreamRef.current) bargeInStreamRef.current.getTracks().forEach(t => t.stop()); } catch {}\n    bargeInStreamRef.current = null;\n  }, []);\n\n  const safeStopRecognition = useCallback(() => {\n    if (recognitionRef.current) {\n      try {\n        // Evita che onend scateni restart mentre stiamo stoppando volontariamente\n        const r = recognitionRef.current;\n        recognitionRef.current = null;\n        try { r.onend = null; } catch {}\n        try { r.stop(); } catch {}\n      } catch {}\n    }\n    setIsListening(false);\n  }, []);\n\n  // 🔧 tieni le ref aggiornate quando cambia lo stato:\n  useEffect(() => { isSpeakingRef.current = isSpeaking; }, [isSpeaking]);\n  useEffect(() => { isUserTurnRef.current = isUserTurn; }, [isUserTurn]);\n  useEffect(() => { isExecutingFunctionRef.current = isExecutingFunction; }, [isExecutingFunction]);\n  useEffect(() => { isProcessingRef.current = isProcessing; }, [isProcessing]);\n  useEffect(() => { isConnectedRef.current = isConnected; }, [isConnected]);\n\n  // drainFunctionQueue is defined after executeFunction to avoid TDZ\n\n  // ✅ TIMEOUT ESTESO - 60 secondi invece di 30\n  const INACTIVITY_TIMEOUT = 60000; // 60 seconds\n  const INTERACTION_CHECK_INTERVAL = 10000; // Check every 10 seconds\n\n  // Welcome messages\n  const getWelcomeMessage = useCallback(() => {\n    const welcomeMessages = [\n      \"Ciao! Sono AIVA, il tuo personal shopper AI. Come posso aiutarti oggi?\",\n      \"Benvenuto! Sono qui per aiutarti a trovare l'outfit perfetto. Cosa stai cercando?\",\n      \"Eccomi! Sono AIVA, dimmi cosa posso fare per te.\",\n      \"Ciao! Sono pronta ad assisterti con il tuo shopping. Di cosa hai bisogno?\"\n    ];\n    \n    const shortMessages = [\n      \"Eccomi di nuovo! Come posso aiutarti?\",\n      \"Bentornato! Cosa cerchi oggi?\",\n      \"Sono qui! Dimmi cosa ti serve.\"\n    ];\n    \n    if (sessionCount === 0) {\n      setSessionCount(1);\n      return welcomeMessages[Math.floor(Math.random() * welcomeMessages.length)];\n    } else {\n      return shortMessages[Math.floor(Math.random() * shortMessages.length)];\n    }\n  }, [sessionCount]);\n\n  // Browser support check\n  useEffect(() => {\n    isAssistantActiveRef.current = isAssistantActive;\n  }, [isAssistantActive]);\n\n  const browserSupportsSpeechRecognition = () => {\n    return 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;\n  };\n\n  // ✅ SELEZIONE VOCE ITALIANA FEMMINILE MIGLIORATA\n  const selectBestItalianVoice = useCallback(() => {\n    const voices = window.speechSynthesis.getVoices();\n    \n    // Priorità voci italiane femminili\n    const voicePreferences = [\n      // Google voci femminili italiane\n      { name: 'Google italiano', lang: 'it-IT', gender: 'female' },\n      { name: 'Alice', lang: 'it-IT' },\n      { name: 'Elsa', lang: 'it-IT' },\n      { name: 'Carla', lang: 'it-IT' },\n      // Microsoft voci femminili italiane\n      { name: 'Microsoft Elsa', lang: 'it-IT' },\n      { name: 'Microsoft Cosimo', lang: 'it-IT' },\n      // Voci generiche italiane femminili\n      { lang: 'it-IT', gender: 'female' },\n      // Qualsiasi voce italiana\n      { lang: 'it-IT' },\n      { lang: 'it' }\n    ];\n\n    // Cerca la miglior voce disponibile\n    for (const pref of voicePreferences) {\n      const matchingVoice = voices.find(voice => {\n        const langMatch = voice.lang.toLowerCase().startsWith(pref.lang?.toLowerCase() || 'it');\n        const nameMatch = !pref.name || voice.name.toLowerCase().includes(pref.name.toLowerCase());\n        const genderMatch = !pref.gender || \n          voice.name.toLowerCase().includes('female') || \n          voice.name.toLowerCase().includes('donna') ||\n          voice.name.toLowerCase().includes('alice') ||\n          voice.name.toLowerCase().includes('elsa') ||\n          voice.name.toLowerCase().includes('carla');\n        \n        return langMatch && nameMatch && genderMatch;\n      });\n      \n      if (matchingVoice) {\n        console.log('🎤 Selected voice:', matchingVoice.name, matchingVoice.lang);\n        selectedVoiceRef.current = matchingVoice;\n        return matchingVoice;\n      }\n    }\n    \n    // Fallback: prima voce italiana disponibile\n    const italianVoice = voices.find(v => v.lang.toLowerCase().startsWith('it'));\n    if (italianVoice) {\n      console.log('🎤 Fallback Italian voice:', italianVoice.name);\n      selectedVoiceRef.current = italianVoice;\n      return italianVoice;\n    }\n    \n    return null;\n  }, []);\n\n  // ✅ CARICA VOCI ALL'AVVIO\n  useEffect(() => {\n    const loadVoices = () => {\n      selectBestItalianVoice();\n    };\n    \n    // Carica voci immediatamente\n    loadVoices();\n    \n    // Ricarica quando le voci sono disponibili\n    if (window.speechSynthesis.onvoiceschanged !== undefined) {\n      window.speechSynthesis.onvoiceschanged = loadVoices;\n    }\n    \n    // Fallback: riprova dopo un delay\n    setTimeout(loadVoices, 100);\n    setTimeout(loadVoices, 500);\n    \n    return () => {\n      if (window.speechSynthesis.onvoiceschanged !== undefined) {\n        window.speechSynthesis.onvoiceschanged = null;\n      }\n    };\n  }, [selectBestItalianVoice]);\n\n  // ✅ UTIL: segmenta testo in frasi per TTS enqueue\n  const segmentTextIntoSentences = useCallback((text) => {\n    const parts = (text || '').split(/(?<=[\\.!?])\\s+/).map(s => s.trim()).filter(Boolean);\n    return parts.length ? parts : [(text || '').trim()].filter(Boolean);\n  }, []);\n\n  // ✅ RILASCIO TURNO SICURO post TTS\n  const releaseTurnIfIdle = useCallback(() => {\n    if (!window.speechSynthesis.speaking && !isSpeakingRef.current && utterQueueRef.current.length === 0) {\n      turnLockRef.current = false;\n      setIsProcessing(false);\n      isProcessingRef.current = false;\n      if (isAssistantActiveRef.current && functionQueueRef.current.length === 0) {\n        if (restartListeningRef.current) restartListeningRef.current();\n      }\n    }\n  }, []);\n\n  // ✅ EXECUTE FUNCTION - Unchanged from previous version\n  const executeFunction = useCallback(async (functionName, parameters) => {\n    console.log('🎯 Executing function:', functionName, parameters);\n    setIsExecutingFunction(true);\n    setCurrentFunction(functionName);\n    lastInteractionRef.current = Date.now();\n    \n    // Stop listening during execution\n    if (recognitionRef.current) {\n      try {\n        recognitionRef.current.stop();\n      } catch (e) {\n        console.log('Could not stop recognition:', e.message);\n      }\n      setIsListening(false);\n    }\n    \n    try {\n      await new Promise(resolve => setTimeout(resolve, 300));\n      \n      switch (functionName) {\n        case 'navigate_to_page':\n        case 'navigate':\n          const pageMap = {\n            'home': '/',\n            'prodotti': '/products',\n            'products': '/products',\n            'offerte': '/offers',\n            'offers': '/offers',\n            'carrello': '/cart',\n            'cart': '/cart',\n            'checkout': '/checkout'\n          };\n          const path = pageMap[parameters.page] || '/';\n          console.log('📍 Navigating to:', path);\n          navigate(path);\n          // reset di sicurezza prima dell'ack\n          streamBufferRef.current = '';\n          dropStaleResponsesRef.current = false;\n          // conferma breve + rilascio turno in onEnd\n          speak(\n            path === '/cart' ? 'Ecco il carrello.' : (path === '/offers' ? 'Ecco le offerte.' : 'Ecco!'),\n            () => {\n              // fine ack → chiudi loading e riapri mic\n              setIsProcessing(false); isProcessingRef.current = false;\n              turnLockRef.current = false;\n              if (restartListeningRef.current) restartListeningRef.current();\n            },\n            false,\n            { enqueue: false }\n          );\n          // fallback: se l'ack fosse mutato, prova comunque dopo la nav\n          scheduleListenAfterNav(1000);\n          break;\n          \n        case 'search_products':\n          const query = parameters.query || '';\n          const filters = parameters.filters || {};\n          \n          console.log('🔍 Searching:', query, 'Filters:', filters);\n          \n          const onSale = !!filters.on_sale;\n          const currentPath = window.location.pathname;\n          \n          if (onSale) {\n            if (currentPath !== '/offers') navigate('/offers');\n            // Notifica la OffersPage (anche se al momento non usa filtri locali)\n            try {\n              window.dispatchEvent(new CustomEvent('offers-apply-filters', { detail: { filters, query } }));\n            } catch {}\n          } else {\n            if (currentPath !== '/products') navigate('/products');\n            setTimeout(() => {\n              if (query) {\n                setSearchQuery(query);\n                const searchInput = document.querySelector('input[placeholder=\"Cerca prodotti...\"]');\n                if (searchInput) {\n                  searchInput.value = query;\n                  searchInput.dispatchEvent(new Event('input', { bubbles: true }));\n                }\n              }\n              \n              if (Object.keys(filters).length > 0) {\n                setMultipleFilters(filters);\n                if (parameters.applyUIFilters !== false) {\n                  applyUIFilters(filters);\n                }\n              }\n            }, 500);\n          }\n          // Ack e rilascio del turno al termine\n          speak('Ecco!', () => {\n            setIsProcessing(false); isProcessingRef.current = false;\n            turnLockRef.current = false;\n            if (restartListeningRef.current) restartListeningRef.current();\n          }, false, { enqueue: false });\n          break;\n\n        \n          \n        case 'apply_ui_filters':\n          console.log('🎨 Applying UI filters:', parameters.filters);\n          if (window.applyProductFilters) {\n            window.applyProductFilters(parameters.filters || {});\n          } else {\n            applyUIFilters(parameters.filters || {});\n          }\n          speak('Fatto.', () => {\n            setIsProcessing(false); isProcessingRef.current = false;\n            turnLockRef.current = false;\n            if (restartListeningRef.current) restartListeningRef.current();\n          }, false, { enqueue: false });\n          break;\n          \n        case 'get_product_details':\n          const productId = parameters.product_id;\n          console.log('📦 Showing product:', productId);\n          navigate(`/products/${productId}`);\n          speak('Ecco!', () => {\n            setIsProcessing(false); isProcessingRef.current = false;\n            turnLockRef.current = false;\n            if (restartListeningRef.current) restartListeningRef.current();\n          }, false, { enqueue: false });\n          break;\n\n        case 'open_product_by_name': {\n          const name = (parameters?.name || '').toLowerCase().trim();\n          const id = window.visibleProductsMap?.[name];\n          if (id) {\n            navigate(`/products/${id}`);\n            scheduleListenAfterNav(800);\n          } else {\n            // fallback: porta sulla lista e applica query\n            navigate('/products');\n            setTimeout(() => {\n              if (window.applyProductFilters) window.applyProductFilters({ query: parameters?.name });\n            }, 300);\n            scheduleListenAfterNav(800);\n          }\n          break;\n        }\n          \n        case 'add_to_cart':\n          console.log('🛒 Adding to cart:', parameters);\n          \n          try {\n            const currentPath = window.location.pathname;\n            if (currentPath.includes('/products/')) {\n              const size = parameters.size || 'M';\n              const canonColor = (raw='') => {\n                const map = { 'nero':'nero','black':'nero','bianco':'bianco','white':'bianco','blu navy':'blu navy','navy':'blu navy','blu scuro':'blu navy','blu':'blu','azzurro':'azzurro','rosso':'rosso','borgogna':'bordeaux','bordeaux':'bordeaux','verde oliva':'verde oliva','oliva':'verde oliva','verde':'verde','grigio melange':'grigio melange','melange':'grigio melange','antracite':'grigio antracite','grigio':'grigio','beige':'beige','panna':'panna','crema':'panna','cammello':'cammello','marrone':'marrone','rosa':'rosa','giallo':'giallo','viola':'viola' };\n                const s = (raw||'').toLowerCase();\n                const keys = Object.keys(map).sort((a,b)=>b.length-a.length);\n                for (const k of keys) if (s.includes(k)) return map[k];\n                const parts = s.split(/[\\s/,-]+/).filter(Boolean);\n                for (const p of parts) if (map[p]) return map[p];\n                return s || 'nero';\n              };\n              const color = canonColor(parameters.color || 'nero');\n              \n              setTimeout(() => {\n                const sizeButtons = document.querySelectorAll('button');\n                for (let btn of sizeButtons) {\n                  if (btn.textContent.trim().toUpperCase() === size.toUpperCase()) {\n                    btn.click();\n                    break;\n                  }\n                }\n                \n                setTimeout(() => {\n                  for (let btn of document.querySelectorAll('button')) {\n                    if (btn.textContent.toLowerCase().includes(color.toLowerCase())) {\n                      btn.click();\n                      break;\n                    }\n                  }\n                  \n                  setTimeout(() => {\n                    const addBtn = Array.from(document.querySelectorAll('button'))\n                      .find(btn => btn.textContent.includes('Aggiungi al Carrello'));\n                    if (addBtn) addBtn.click();\n                  }, 300);\n                }, 300);\n              }, 200);\n            } else {\n              const mockProduct = {\n                id: parameters.product_id || '550e8400-0001-41d4-a716-446655440001',\n                name: parameters.product_name || 'Prodotto',\n                price: parameters.price || 49.90,\n                brand: 'Fashion Brand'\n              };\n              \n              await addToCart(\n                mockProduct,\n                parameters.size || 'M',\n                parameters.color || 'nero',\n                parameters.quantity || 1\n              );\n            }\n            speak('Aggiunto al carrello.', () => {\n              setIsProcessing(false); isProcessingRef.current = false;\n              turnLockRef.current = false;\n              if (restartListeningRef.current) restartListeningRef.current();\n            }, false, { enqueue: false });\n          } catch (error) {\n            console.error('Error adding to cart:', error);\n            speak('Non sono riuscita ad aggiungerlo al carrello.', () => {\n              setIsProcessing(false); isProcessingRef.current = false;\n              turnLockRef.current = false;\n              if (restartListeningRef.current) restartListeningRef.current();\n            }, false, { enqueue: false });\n          }\n          break;\n          \n        case 'remove_from_cart': {\n          const { item_id, product_name, size, color } = parameters || {};\n          let id = item_id;\n          if (!id && product_name) {\n            const key = (s => (s || '')\n              .toString()\n              .normalize('NFD')\n              .replace(/\\p{Diacritic}/gu, '')\n              .toLowerCase()\n              .replace(/[^a-z0-9]+/g, ' ')\n              .trim())(`${product_name} ${size || ''} ${color || ''}`);\n            id = window.cartItemsMap?.[key];\n          }\n          console.log('🗑️ Removing from cart:', id || item_id);\n          if (id) {\n            await removeFromCart(id);\n            speak('Ok, rimosso dal carrello.');\n          } else {\n            speak('Non trovo quel prodotto nel carrello. Puoi ripetere il nome o dirmi la taglia e il colore?');\n          }\n          break;\n        }\n          \n        case 'remove_last_cart_item':\n          console.log('🗑️ Removing last cart item');\n          await removeLastItem();\n          break;\n          \n        case 'update_cart_quantity':\n          console.log('📝 Updating quantity:', parameters);\n          if (parameters.item_id && parameters.quantity) {\n            await updateQuantity(parameters.item_id, parameters.quantity);\n          }\n          break;\n          \n        case 'get_cart_summary':\n        case 'view_cart':\n          console.log('🛒 Opening cart');\n          navigate('/cart');\n          speak('Ecco il carrello.', () => {\n            setIsProcessing(false); isProcessingRef.current = false;\n            turnLockRef.current = false;\n            if (restartListeningRef.current) restartListeningRef.current();\n          }, false, { enqueue: false });\n          break;\n          \n        case 'clear_cart':\n          console.log('🗑️ Clearing cart');\n          await clearCartAction();\n          speak('Carrello svuotato.', () => {\n            setIsProcessing(false); isProcessingRef.current = false;\n            turnLockRef.current = false;\n            if (restartListeningRef.current) restartListeningRef.current();\n          }, false, { enqueue: false });\n          break;\n          \n        case 'get_current_promotions':\n        case 'show_offers':\n          console.log('🏷️ Showing offers');\n          navigate('/offers');\n          speak('Ecco le offerte.', () => {\n            setIsProcessing(false); isProcessingRef.current = false;\n            turnLockRef.current = false;\n            if (restartListeningRef.current) restartListeningRef.current();\n          }, false, { enqueue: false });\n          break;\n          \n        case 'get_recommendations':\n          console.log('💡 Getting recommendations');\n          navigate('/products');\n          setTimeout(() => {\n            const event = new CustomEvent('show-recommendations');\n            window.dispatchEvent(event);\n          }, 300);\n          break;\n          \n        case 'close_conversation':\n          console.log('👋 Closing conversation');\n          stopAssistant();\n          break;\n          \n        case 'get_size_guide':\n          try {\n            const guide = await productAPI.getSizeGuide(parameters.category || 'pantaloni');\n            const parts = [];\n            for (const [gender, table] of Object.entries(guide)) {\n              parts.push(`${gender}: ${Object.entries(table).map(([k,v])=>`${k}=${v}`).join(', ')}`);\n            }\n            speak(`Ecco la guida taglie per ${parameters.category}: ${parts.join('. ')}` , () => {\n              setIsProcessing(false); isProcessingRef.current = false;\n              turnLockRef.current = false;\n              if (restartListeningRef.current) restartListeningRef.current();\n            }, false, { enqueue: false });\n          } catch (e) {\n            speak('Non sono riuscita a recuperare la guida taglie al momento.', () => {\n              setIsProcessing(false); isProcessingRef.current = false;\n              turnLockRef.current = false;\n              if (restartListeningRef.current) restartListeningRef.current();\n            }, false, { enqueue: false });\n          }\n          break;\n\n        default:\n          console.warn('❓ Unknown function:', functionName);\n      }\n      \n    } catch (error) {\n      console.error('❌ Error executing function:', error);\n      setError('Errore nell\\'esecuzione del comando');\n    } finally {\n        setTimeout(() => {\n          setIsExecutingFunction(false);\n          setCurrentFunction(null);\n          // passa alla prossima function in coda\n          drainFunctionQueue();\n          // se non sta parlando nessuno ed è tutto fermo, rilascia il turno\n          if (!isSpeaking && !window.speechSynthesis.speaking) {\n            // safe release\n            turnLockRef.current = false;\n            setIsProcessing(false);\n            isProcessingRef.current = false;\n            if (\n              isAssistantActiveRef.current &&\n              !isRestartingRef.current &&\n              functionQueueRef.current.length === 0\n            ) {\n              restartListening();\n            }\n          }\n        }, 200); // ⬅️ più reattivo\n    }\n  }, [navigate, addToCart, removeFromCart, clearCartAction, removeLastItem, updateQuantity, \n      setSearchQuery, setMultipleFilters, isSpeaking]);\n\n  // Now define drainFunctionQueue after executeFunction to avoid TDZ\n  const drainFunctionQueue = useCallback(() => {\n    if (isExecutingFunctionRef.current) return;\n    const next = functionQueueRef.current.shift();\n    if (!next) return;\n    isExecutingFunctionRef.current = true;\n    setTimeout(async () => {\n      try {\n        await executeFunction(next.name, next.params);\n      } finally {\n        isExecutingFunctionRef.current = false;\n        if (functionQueueRef.current.length > 0) {\n          drainFunctionQueue();\n        } else {\n          if (\n            isAssistantActiveRef.current &&\n            !window.speechSynthesis.speaking &&\n            !isSpeakingRef.current &&\n            !isProcessingRef.current\n          ) {\n            if (restartListeningRef.current) {\n              restartListeningRef.current();\n            }\n          }\n        }\n      }\n    }, 0);\n  }, [executeFunction]);\n\n  // Apply UI filters helper\n  const applyUIFilters = useCallback((filters) => {\n    console.log('🎨 Applying UI filters:', filters);\n    \n    setTimeout(() => {\n      if (filters.category) {\n        const categorySelect = document.querySelector('select');\n        if (categorySelect) {\n          for (let option of categorySelect.options) {\n            if (option.value.toLowerCase() === filters.category.toLowerCase()) {\n              categorySelect.value = option.value;\n              categorySelect.dispatchEvent(new Event('change', { bubbles: true }));\n              break;\n            }\n          }\n        }\n      }\n      \n      if (filters.price_range) {\n        const sortSelect = document.querySelectorAll('select')[1];\n        if (sortSelect) {\n          if (filters.price_range === 'low-to-high') {\n            sortSelect.value = 'price-low';\n          } else if (filters.price_range === 'high-to-low') {\n            sortSelect.value = 'price-high';\n          }\n          sortSelect.dispatchEvent(new Event('change', { bubbles: true }));\n        }\n      }\n      \n      filterProducts(filters);\n    }, 300);\n  }, [filterProducts]);\n\n  // ✅ SPEECH RECOGNITION CORRETTO - NON CONTINUOUS\n  const initializeSpeechRecognition = useCallback(() => {\n    if (!browserSupportsSpeechRecognition()) {\n      return null;\n    }\n\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    const recognition = new SpeechRecognition();\n    \n    recognition.continuous = false; // ✅ IMPORTANTE: false per evitare loop\n    recognition.interimResults = true;\n    recognition.lang = 'it-IT';\n    recognition.maxAlternatives = 1;\n\n    recognition.onstart = () => {\n      console.log('🎤 Recognition started');\n      setIsListening(true);\n      setError(null);\n      setIsUserTurn(true);\n      lastInteractionRef.current = Date.now();\n      isRestartingRef.current = false; // ✅ Reset flag\n      // NON azzerare la finestra se è un riavvio nella stessa sessione\n      if (!listeningTimerRef.current) {\n        listeningTimerRef.current = setTimeout(() => {\n          if (!isSpeaking && !isProcessingRef.current) {\n            speak(NO_INPUT_MESSAGES[Math.floor(Math.random()*NO_INPUT_MESSAGES.length)], () => {\n              closingTimerRef.current = setTimeout(() => {\n                if (!isSpeaking && !isProcessingRef.current) {\n                  stopAssistant();\n                }\n              }, CLOSING_GRACE_MS);\n            });\n          }\n        }, LISTENING_WINDOW_MS);\n      }\n    };\n\n    recognition.onresult = (event) => {\n      if (!isSpeakingRef.current && isUserTurnRef.current) {\n        let finalTranscript = '';\n        let interimTranscript = '';\n\n        for (let i = event.resultIndex; i < event.results.length; i++) {\n          const transcript = event.results[i][0].transcript;\n          if (event.results[i].isFinal) {\n            finalTranscript += transcript;\n          } else {\n            interimTranscript += transcript;\n          }\n        }\n\n        // Show interim results\n        if (interimTranscript) {\n          setTranscript(interimTranscript);\n        }\n\n        if (finalTranscript) {\n          console.log('💬 User said:', finalTranscript);\n          // chiudi la sessione corrente: niente più beep o timer\n          clearListeningTimers();\n          activeListenSessionIdRef.current = null;\n          beepedThisSessionRef.current = false;\n          setTranscript(finalTranscript);\n          resetInactivityTimeout();\n          // Prende il lock direttamente handleVoiceCommand\n          handleVoiceCommand(finalTranscript);\n          \n          // Stop recognition after getting final result\n          if (recognitionRef.current) {\n            recognitionRef.current.stop();\n          }\n        }\n      }\n    };\n\n    recognition.onerror = (event) => {\n      if (event.error === 'aborted') return;\n      if (event.error === 'no-speech') {\n        return; // lascia scadere la finestra 11s\n      }\n      // altri errori\n      if (event.error === 'network') {\n        setError('Errore di connessione. Riprova.');\n      } else {\n        setError(`Errore microfono: ${event.error}`);\n      }\n      setIsListening(false);\n    };\n\n    recognition.onend = () => {\n      console.log('🔚 Recognition ended');\n      setIsListening(false);\n      if (\n        isAssistantActiveRef.current &&\n        !isSpeaking &&\n        !isExecutingFunction &&\n        !isRestartingRef.current &&\n        !isProcessingRef.current &&\n        !window.speechSynthesis.speaking &&\n        !turnLockRef.current &&\n        !closingTimerRef.current &&\n        functionQueueRef.current.length === 0\n      ) {\n        setTimeout(() => {\n          if (\n            isAssistantActiveRef.current &&\n            !isSpeaking &&\n            !isProcessingRef.current &&\n            !turnLockRef.current &&\n            !closingTimerRef.current\n          ) {\n            restartListening();\n          }\n        }, 500);\n      }\n    };\n\n    return recognition;\n  }, [isSpeaking, isUserTurn, isExecutingFunction]);\n\n  // ✅ RESTART LISTENING CORRETTO - PREVIENE LOOP\n  const restartListening = useCallback(() => {\n    if (\n      isRestartingRef.current ||\n      !isAssistantActiveRef.current ||\n      isSpeakingRef.current ||\n      isExecutingFunctionRef.current ||\n      isProcessingRef.current ||                  // ⬅️ non riaprire durante processing\n      functionQueueRef.current.length > 0 ||      // ⬅️ se ci sono function in coda\n      window.speechSynthesis.speaking             // ⬅️ non durante TTS\n    ) {\n      return;\n    }\n\n    // Beep \"pronto a parlare\" SOLO la prima volta nella sessione\n    if (!activeListenSessionIdRef.current) {\n      activeListenSessionIdRef.current = `ls-${Date.now()}`;\n      beepedThisSessionRef.current = false;\n    }\n    if (!beepedThisSessionRef.current) {\n      playReadyBeep();\n      beepedThisSessionRef.current = true;\n    }\n\n    isRestartingRef.current = true;\n\n    if (recognitionRef.current) {\n      try { recognitionRef.current.stop(); } catch {}\n      recognitionRef.current = null;\n    }\n\n    setTimeout(() => {\n      if (\n        isAssistantActiveRef.current &&\n        !isSpeakingRef.current &&\n        !isExecutingFunctionRef.current &&\n        !isProcessingRef.current\n      ) {\n        try {\n          recognitionRef.current = initializeSpeechRecognition();\n          if (recognitionRef.current) recognitionRef.current.start();\n        } catch (e) {\n          console.error('Failed to restart:', e);\n        }\n      }\n      isRestartingRef.current = false;\n    }, 220); // piccolo delay per non catturare il beep\n  }, [isSpeaking, isExecutingFunction, initializeSpeechRecognition, playReadyBeep]);\n\n  // Programmatic restart dopo navigazioni/cambi DOM\n  const scheduleListenAfterNav = useCallback((delay = 700) => {\n    setTimeout(() => {\n      if (\n        isAssistantActiveRef.current &&\n        !isRestartingRef.current &&\n        !window.speechSynthesis.speaking &&\n        !isSpeakingRef.current &&\n        !isProcessingRef.current &&\n        functionQueueRef.current.length === 0\n      ) {\n        if (restartListeningRef.current) {\n          restartListeningRef.current();\n        }\n      }\n    }, delay);\n  }, []);\n\n  // Aggiorna la ref del restart dopo ogni render utile\n  useEffect(() => {\n    restartListeningRef.current = restartListening;\n  }, [restartListening]);\n\n  // ✅ STOP ASSISTANT\n  const stopAssistant = useCallback(() => {\n    console.log('🛑 Stopping assistant');\n    \n    // Clear recognition\n    if (recognitionRef.current) {\n      try {\n        recognitionRef.current.stop();\n      } catch (e) {}\n      recognitionRef.current = null;\n    }\n    \n    // Cancel speech\n    if ('speechSynthesis' in window) {\n      try { window.speechSynthesis.cancel(); } catch {}\n    }\n    // ✅ svuota coda TTS e timer safety\n    utterQueueRef.current = [];\n    if (ttsSafetyTimerRef.current) { clearTimeout(ttsSafetyTimerRef.current); ttsSafetyTimerRef.current = null; }\n    \n    // Clear timeouts\n    if (inactivityTimeoutRef.current) { clearTimeout(inactivityTimeoutRef.current); inactivityTimeoutRef.current = null; }\n    clearListeningTimers();          // ⬅️ importante\n    if (typeof stopBargeInMonitor === 'function') stopBargeInMonitor();\n    \n    // Reset all states\n    setIsListening(false);\n    setIsSpeaking(false);\n    setIsExecutingFunction(false);\n    setIsProcessing(false);\n    setIsAssistantActive(false);\n    setIsUserTurn(true);\n    isAssistantActiveRef.current = false;\n    isRestartingRef.current = false;\n    // Svuota coda funzioni e rilascia il turno\n    functionQueueRef.current = [];\n    turnLockRef.current = false;\n    // Allinea subito i flag di processing\n    setIsProcessing(false);\n    isProcessingRef.current = false;\n    \n    console.log('✅ Assistant stopped');\n  }, []);\n\n  // ✅ INACTIVITY TIMEOUT\n  const resetInactivityTimeout = useCallback(() => {\n    lastInteractionRef.current = Date.now();\n    \n    if (inactivityTimeoutRef.current) {\n      clearTimeout(inactivityTimeoutRef.current);\n    }\n    \n    if (isAssistantActiveRef.current) {\n      inactivityTimeoutRef.current = setTimeout(() => {\n        const timeSinceLastInteraction = Date.now() - lastInteractionRef.current;\n        \n        if (timeSinceLastInteraction >= INACTIVITY_TIMEOUT) {\n          console.log('⏰ Inactivity timeout reached');\n          speak(\"Sono ancora qui se hai bisogno. Dì qualcosa o chiuderò la conversazione.\", () => {\n            setTimeout(() => {\n              if (Date.now() - lastInteractionRef.current >= INACTIVITY_TIMEOUT + 10000) {\n                stopAssistant();\n              }\n            }, 10000);\n          });\n        } else {\n          resetInactivityTimeout();\n        }\n      }, INTERACTION_CHECK_INTERVAL);\n    }\n  }, [stopAssistant]);\n\n  // Singleton WS & deduper globale (sopravvive all'HMR)\n  if (!window.__AIVA_SINGLETON__) {\n    window.__AIVA_SINGLETON__ = { ws: null, listeners: new Set(), queue: [], lastFnSigTs: new Map() };\n  }\n  const WS_SINGLETON = window.__AIVA_SINGLETON__;\n\n  // WebSocket connection (singleton & HMR-proof)\n  useEffect(() => {\n    if (WS_SINGLETON.ws && WS_SINGLETON.ws.readyState === WebSocket.OPEN) {\n      console.log('🔌 WebSocket reusing existing connection');\n      setIsConnected(true);\n      wsRef.current = WS_SINGLETON.ws;\n    } else {\n      const connectWebSocket = () => {\n        try {\n          const ws = createWebSocketConnection(sessionIdRef.current);\n          WS_SINGLETON.ws = ws;\n\n          ws.onopen = () => {\n            console.log('🔌 WebSocket connected');\n            setIsConnected(true);\n            wsRef.current = ws;\n            // Flush global queue\n            if (WS_SINGLETON.queue && WS_SINGLETON.queue.length) {\n              for (const msg of WS_SINGLETON.queue) {\n                try { ws.send(JSON.stringify(msg)); } catch {}\n              }\n              WS_SINGLETON.queue = [];\n            }\n          };\n\n          ws.onmessage = (event) => {\n            try {\n              const data = JSON.parse(event.data);\n              WS_SINGLETON.listeners.forEach(fn => fn(data));\n            } catch (error) {\n              console.error('Parse error:', error);\n            }\n          };\n\n          ws.onerror = (error) => {\n            console.error('WebSocket error:', error);\n          };\n\n          ws.onclose = () => {\n            console.log('WebSocket disconnected');\n            setIsConnected(false);\n            wsRef.current = null;\n            WS_SINGLETON.ws = null;\n            let attempts = 0;\n            const attemptReconnect = () => {\n              if (attempts >= 5) return;\n              attempts += 1;\n              const delay = Math.min(1000 * Math.pow(2, attempts), 10000);\n              setTimeout(() => { connectWebSocket(); }, delay);\n            };\n            attemptReconnect();\n          };\n        } catch (error) {\n          console.error('Connection failed:', error);\n        }\n      };\n\n      connectWebSocket();\n    }\n\n    const listener = (data) => {\n      if (handleWSMessageRef.current) {\n        try { handleWSMessageRef.current(data); } catch (e) { console.error(e); }\n      }\n    };\n    WS_SINGLETON.listeners.add(listener);\n    return () => {\n      WS_SINGLETON.listeners.delete(listener);\n    };\n  }, []);\n\n  // ✅ TEXT-TO-SPEECH CON VOCE ITALIANA FEMMINILE\n  const sanitizeTextForTTS = (s) => {\n    let out = (s || '')\n      // blocchi di codice\n      .replace(/```[\\s\\S]*?```/g, ' ')\n      // inline code\n      .replace(/`[^`]*`/g, ' ')\n      // markdown base (*, **, _, ~, #, >, -)\n      .replace(/[\\*_~>#-]+/g, ' ')\n      // link [testo](url) -> testo\n      .replace(/\\[(.*?)\\]\\((.*?)\\)/g, '$1')\n      // ➜ compattazione inventario: elimina \"X pezzi in magazzino/disponibili\"\n      .replace(/\\b\\d+\\s+(pezzi?|in\\s+magazzino|disponibili)\\b[^,.]*[.,]?/gi, '')\n      // ➜ rimuovi quantificatori ripetuti per taglie/varianti\n      .replace(/(\\btaglia\\b[^.]*?)\\s*(,\\s*)?\\b\\d+\\b[^.]*\\./gi, '$1.')\n      // ➜ pronuncia taglie con lettere italiane\n      .replace(/\\bXXXL\\b/gi, 'ics ics ics elle')\n      .replace(/\\bXXL\\b/gi, 'ics ics elle')\n      .replace(/\\bXL\\b/gi, 'ics elle')\n      .replace(/\\bXXS\\b/gi, 'ics ics esse')\n      .replace(/\\bXS\\b/gi, 'ics esse')\n      // ➜ rimuovi domande guida non desiderate\n      .replace(/vuoi[^.?!]*(taglie|colori|materiali)[^.?!]*[.?!]/gi, ' ')\n      // spazi multipli\n      .replace(/\\s{2,}/g, ' ')\n      .trim();\n    return out;\n  };\n\n  const speak = useCallback((text, onEnd, immediate = false, options = {}) => {\n    const { enqueue = false } = options || {};\n    if (!('speechSynthesis' in window)) return;\n    try {\n      // assicurati che il mic sia off durante TTS\n      safeStopRecognition();\n      setIsSpeaking(true);\n      isSpeakingRef.current = true;\n\n      if (immediate) {\n        try { window.speechSynthesis.cancel(); } catch {}\n        utterQueueRef.current = [];\n      }\n\n      const sentences = enqueue ? segmentTextIntoSentences(sanitizeTextForTTS(text)) : [sanitizeTextForTTS(text)];\n      sentences.forEach(sentence => {\n        if (!sentence) return;\n        const utt = new SpeechSynthesisUtterance(sentence);\n        utt.lang = 'it-IT';\n        utt.rate = 1.0;\n        utt.pitch = 1.1;\n        utt.volume = 0.9;\n        if (selectedVoiceRef.current) utt.voice = selectedVoiceRef.current;\n        utt.onstart = () => {\n          setIsSpeaking(true);\n          isSpeakingRef.current = true;\n          setIsUserTurn(false);\n          hasSpokenThisTurnRef.current = true;\n          if (ttsSafetyTimerRef.current) { clearTimeout(ttsSafetyTimerRef.current); ttsSafetyTimerRef.current = null; }\n          // avvia barge-in\n          startBargeInMonitor();\n        };\n        utt.onend = () => {\n          // rimuovi l'elemento servito dalla coda\n          utterQueueRef.current.shift();\n          // se c'è un prossimo, catenalo subito\n          if (utterQueueRef.current.length > 0) {\n            const nextUtt = utterQueueRef.current[0];\n            try { if (nextUtt) window.speechSynthesis.speak(nextUtt); } catch {}\n          }\n          // se la coda è vuota, chiudi stato speaking PRIMA del callback\n          if (utterQueueRef.current.length === 0) {\n            stopBargeInMonitor();\n            setIsSpeaking(false);\n            isSpeakingRef.current = false;\n            if (streamReleasePendingRef.current) {\n              streamReleasePendingRef.current = false;\n              releaseTurnIfIdle();\n            }\n            if (typeof onEnd === 'function') onEnd();\n          }\n        };\n        utterQueueRef.current.push(utt);\n      });\n\n      // avvia se non sta già parlando\n      if (!window.speechSynthesis.speaking) {\n        const next = utterQueueRef.current[0];\n        if (next) window.speechSynthesis.speak(next);\n      }\n\n      // safety release se engine resta muto\n      if (!ttsSafetyTimerRef.current) {\n        ttsSafetyTimerRef.current = setTimeout(() => {\n          if (!window.speechSynthesis.speaking && utterQueueRef.current.length === 0) {\n            setIsSpeaking(false);\n            isSpeakingRef.current = false;\n            releaseTurnIfIdle();\n          }\n        }, 1500);\n      }\n    } catch {}\n  }, [safeStopRecognition, segmentTextIntoSentences, releaseTurnIfIdle]);\n\n  // Handle WebSocket messages\n  const handleWebSocketMessage = useCallback((data) => {\n    // ⛔ se non sono attivo, ignora il messaggio\n    if (!isAssistantActiveRef.current) return;\n    console.log('📨 WebSocket message:', data.type);\n    // ⛔ Se stiamo scartando risposte stale del turno precedente, accetta solo il nuovo avvio\n    if (dropStaleResponsesRef.current && data.type !== 'processing_start') {\n      console.log('⏭️ Dropped stale WS message:', data.type);\n      return;\n    }\n    setMessages(prev => [...prev, data]);\n    lastInteractionRef.current = Date.now();\n    \n    switch (data.type) {\n      case 'processing_start': {\n        setIsProcessing(true);\n        isProcessingRef.current = true;\n        setIsUserTurn(false);\n        processingOwnedBySpeechRef.current = false; // verrà true solo se parleremo\n        safeStopRecognition(); // mic OFF\n        // prepara buffer per eventuale stream\n        streamBufferRef.current = '';\n        dropStaleResponsesRef.current = false; // ✅ da qui ricominciamo ad accettare messaggi\n        break;\n      }\n\n      case 'function_start': {\n        // Rimaniamo in processing finché non completiamo la funzione/risposta\n        break;\n      }\n\n      case 'stream_start': {\n        // Disabilita parlato chunk-by-chunk: bufferizza soltanto\n        streamBufferRef.current = '';\n        isStreamingTTSRef.current = true;\n        streamReleasePendingRef.current = false;\n        break;\n      }\n\n      case 'text_chunk': {\n        // Niente TTS qui: accumula e parleremo al stream_complete\n        if (typeof data.content === 'string') {\n          streamBufferRef.current += (data.content || '') + ' ';\n        }\n        break;\n      }\n\n      case 'stream_complete': {\n        // Parla una sola volta il buffer\n        isStreamingTTSRef.current = false;\n        const text = sanitizeTextForTTS(streamBufferRef.current.trim());\n        streamBufferRef.current = '';\n        if (text) {\n          processingOwnedBySpeechRef.current = true;\n          speak(text, () => {\n            setIsProcessing(false);\n            isProcessingRef.current = false;\n            releaseTurnIfIdle();\n          }, false, { enqueue: false });\n        } else {\n          setIsProcessing(false);\n          isProcessingRef.current = false;\n          releaseTurnIfIdle();\n        }\n        break;\n      }\n\n      case 'function_complete': {\n        // de-dup in finestra 1.5s\n        const fnSignature = (name, params) => {\n          try { return `${name}:${JSON.stringify(params)}`; } catch { return `${name}:<unserializable>`; }\n        };\n        const sig = fnSignature(data.function, data.parameters || {});\n        const now = Date.now();\n        const last = (window.__AIVA_SINGLETON__?.lastFnSigTs || new Map()).get(sig) || 0;\n        if (window.__AIVA_SINGLETON__) {\n          if (now - last < 1500) {\n            break; // duplicato ravvicinato -> ignora\n          }\n          window.__AIVA_SINGLETON__.lastFnSigTs.set(sig, now);\n        }\n\n        // Accoda la funzione; il draining partirà dopo 'complete'\n        setIsProcessing(false);\n        isProcessingRef.current = false;\n        if (data.function && data.parameters) {\n          // Evita navigate_to_page:prodotti subito dopo comandi cart\n          const lowerLast = (lastUserTextRef.current || '').toLowerCase();\n          const isCartContext = /(carrello|svuota|rimuovi|togli|elenca|prodotti nel carrello)/.test(lowerLast);\n          if (isCartContext && data.function === 'navigate_to_page' && data.parameters?.page === 'prodotti') {\n            break;\n          }\n          functionQueueRef.current.push({ name: data.function, params: data.parameters });\n        } else {\n          // Nessuna funzione valida: chiedi di ripetere e rilascia\n          speak('Ok. Puoi ripetere la richiesta con qualche dettaglio in più?', () => {\n            turnLockRef.current = false;\n            releaseTurnIfIdle();\n          }, false, { enqueue: false });\n        }\n        break;\n      }\n\n      case 'response': {\n        if (data.message) {\n          setIsProcessing(true);\n          isProcessingRef.current = true;\n          processingOwnedBySpeechRef.current = true;\n          speak(data.message, () => {\n            setIsProcessing(false);\n            isProcessingRef.current = false;\n            releaseTurnIfIdle();\n          }, false, { enqueue: false });\n        }\n        break;\n      }\n\n      case 'complete': {\n        // Se il server ha inviato stream chunks ma non message, il buffer è stato già parlato su stream_complete\n        if (data.message) {\n          processingOwnedBySpeechRef.current = true;\n          speak(data.message, () => {\n            setIsProcessing(false);\n            isProcessingRef.current = false;\n            releaseTurnIfIdle();\n          }, false, { enqueue: false });\n        } else {\n          if (!isStreamingTTSRef.current && utterQueueRef.current.length === 0 && !window.speechSynthesis.speaking) {\n            setIsProcessing(false);\n            isProcessingRef.current = false;\n            releaseTurnIfIdle();\n          } else {\n            if (ttsSafetyTimerRef.current) clearTimeout(ttsSafetyTimerRef.current);\n            ttsSafetyTimerRef.current = setTimeout(() => {\n              setIsProcessing(false);\n              isProcessingRef.current = false;\n              releaseTurnIfIdle();\n            }, 1500);\n          }\n        }\n        // ✅ drena la coda funzioni allegata a questa risposta\n        if (functionQueueRef.current.length > 0 && !isExecutingFunctionRef.current) {\n          drainFunctionQueue();\n        }\n        break;\n      }\n\n      case 'error': {\n        try { window.speechSynthesis.cancel(); } catch {}\n        utterQueueRef.current = [];\n        setIsSpeaking(false);\n        isSpeakingRef.current = false;\n        setIsProcessing(false);\n        isProcessingRef.current = false;\n        turnLockRef.current = false;\n        setError(data.message || 'Errore');\n        releaseTurnIfIdle();\n        break;\n      }\n    }\n  }, [speak, executeFunction, stopAssistant]);\n\n  // Aggiorna la ref del listener dopo ogni render utile\n  useEffect(() => {\n    handleWSMessageRef.current = handleWebSocketMessage;\n  }, [handleWebSocketMessage]);\n\n  // Send message transport: WS by default, HTTP when Vercel mode\n  const sendMessage = useCallback(async (message) => {\n    const vercelMode = (import.meta?.env?.VITE_VERCEL_MODE === 'true') || (typeof window !== 'undefined' && window.VERCEL_MODE === true);\n    if (!vercelMode) {\n      const ws = WS_SINGLETON.ws;\n      if (ws && ws.readyState === WebSocket.OPEN) {\n        try { ws.send(JSON.stringify(message)); return; } catch (e) { console.warn('WS send failed, fallback HTTP', e); }\n      }\n    }\n    // HTTP fallback (Serverless friendly)\n    try {\n      if (message?.type === 'voice_command') {\n        const res = await fetch('/api/voice/command', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ text: message.text, context: message.context, session_id: message.context?.session_id })\n        });\n        const json = await res.json();\n        const events = Array.isArray(json?.events) ? json.events : [];\n        for (const evt of events) {\n          try { handleWSMessageRef.current && handleWSMessageRef.current(evt); } catch {}\n        }\n      }\n    } catch (err) {\n      console.error('HTTP voice command failed', err);\n      handleWSMessageRef.current && handleWSMessageRef.current({ type: 'error', message: 'Errore richiesta voce' });\n    }\n  }, []);\n\n  // Handle voice command\n  const handleVoiceCommand = useCallback((text) => {\n    if (!text.trim()) return;\n    lastUserTextRef.current = text;\n\n    // 🎙️ Barge-in hard: se l'assistente sta parlando, ferma e libera i lock\n    if (isSpeakingRef.current || window.speechSynthesis.speaking) {\n      try { window.speechSynthesis.cancel(); } catch {}\n      if (typeof stopBargeInMonitor === 'function') stopBargeInMonitor();\n      utterQueueRef.current = [];\n      streamBufferRef.current = '';\n      dropStaleResponsesRef.current = true;   // ignora WS residui finché non ricomincia il processing\n      turnLockRef.current = false;\n      setIsProcessing(false); isProcessingRef.current = false;\n      setIsSpeaking(false);  isSpeakingRef.current = false;\n    }\n    if (turnLockRef.current || isProcessingRef.current) {\n      console.log('🔒 Ignoro comando: turno in corso');\n      if (restartListeningRef.current) restartListeningRef.current();\n      return;\n    }\n    if (closingTimerRef.current) {\n      console.log('⏳ Ignoro comando: chiusura in corso');\n      return;\n    }\n    turnLockRef.current = true;\n\n    const lower = text.toLowerCase();\n    // 🎯 Intent shortcuts lato client per comandi semplici\n    const goCart = /(apri|mostra|vai|portami).*(il\\s+)?carrello|^carrello$/;\n    const goOffers = /(apri|mostra|vai|portami).*(offerte|in offerta|sconti)|^(offerte|sconti|saldi)$/;\n    const goHome = /(torna|vai).*(home|pagina iniziale)|^home$/;\n    // escludi frasi che contengono \"carrello\"\n    const goProducts = /((apri|mostra|vai|portami).*(pagina\\s+)?prodotti(?!.*carrello))|^tutti i prodotti$|^prodotti$|^catalogo$|^mostra tutto$|^mostrami tutto$/;\n    const describe = /^(descrivi|descrizione|dettagli|info( prodotto)?)$/;\n    // includi anche “mostra i prodotti nel carrello”\n    const readCart = /(elenca|leggi|dimmi|quali|mostra).*(prodotti|articoli).*(nel\\s+)?carrello|cosa.*(c\\s'?|è|ho).*(nel\\s+)?carrello/;\n    // 🗑️ svuota/rimuovi tutto dal carrello (locale)\n    const clearCartRe = /(svuota|svuotare|svuotalo|svuotami|rimuovi|togli|cancella).*(tutti|tutto)?.*(prodotti|articoli)?.*(dal\\s+)?carrello/;\n    const openByName = /(?:mostra|apri).*(?:il\\s+)?prodotto\\s+(.+)/;\n    const normalizeKey = (s='') => (s).toString().normalize('NFD').replace(/\\p{Diacritic}/gu,'').toLowerCase().replace(/[^a-z0-9]+/g,' ').trim();\n    // parsing “aggiungi/metti nel carrello … taglia X … colore Y”\n    const addToCartRe = /(aggiungi|metti|mettilo|mettila).*(nel\\s+)?carrello(?::|\\s|\\,)*(?:.*?(taglia)\\s+([xslm]{1,3}|xs|xxs|xl|xxl|s|m|l))?(?:.*?(colore)\\s+([a-zà-ù\\s]+))?/i;\n    const sizeMap = { xs:'XS', xxs:'XXS', s:'S', m:'M', l:'L', xl:'XL', xxl:'XXL' };\n    const colorMap = {\n      'nero':'nero', 'black':'nero',\n      'bianco':'bianco', 'white':'bianco',\n      'blu':'blu', 'blu navy':'blu navy', 'navy':'blu navy', 'blu scuro':'blu navy',\n      'azzurro':'azzurro',\n      'rosso':'rosso', 'borgogna':'bordeaux', 'bordeaux':'bordeaux',\n      'verde':'verde', 'verde oliva':'verde oliva', 'oliva':'verde oliva',\n      'grigio':'grigio', 'grigio melange':'grigio melange', 'melange':'grigio melange', 'antracite':'grigio antracite',\n      'beige':'beige', 'panna':'panna', 'crema':'panna',\n      'cammello':'cammello',\n      'rosa':'rosa',\n      'marrone':'marrone',\n      'giallo':'giallo',\n      'viola':'viola'\n    };\n    const canonColor = (raw='') => {\n      const s = raw.normalize('NFD').replace(/\\p{Diacritic}/gu,'').toLowerCase().trim();\n      const keys = Object.keys(colorMap).sort((a,b)=>b.length-a.length);\n      for (const k of keys) if (s.includes(k)) return colorMap[k];\n      return s || undefined;\n    };\n    if (goCart.test(lower)) {\n      turnLockRef.current = true;\n      setIsProcessing(true); isProcessingRef.current = true;\n      functionQueueRef.current.push({ name: 'get_cart_summary', params: {} });\n      drainFunctionQueue();\n      return;\n    }\n    // PRIORITÀ: lettura carrello prima del matcher \"prodotti\"\n    if (readCart.test(lower)) {\n      turnLockRef.current = true;\n      setIsProcessing(true); isProcessingRef.current = true;\n      const summary = buildCartSpeechSummary(6);\n      speak(summary, () => {\n        setIsProcessing(false);\n        isProcessingRef.current = false;\n        if (restartListeningRef.current) restartListeningRef.current();\n      }, false, { enqueue: false });\n      return;\n    }\n    if (goOffers.test(lower)) {\n      turnLockRef.current = true;\n      setIsProcessing(true); isProcessingRef.current = true;\n      functionQueueRef.current.push({ name: 'show_offers', params: {} });\n      drainFunctionQueue();\n      return;\n    }\n    if (goHome.test(lower)) {\n      turnLockRef.current = true;\n      setIsProcessing(true); isProcessingRef.current = true;\n      functionQueueRef.current.push({ name: 'navigate_to_page', params: { page: 'home' } });\n      drainFunctionQueue();\n      return;\n    }\n    if (clearCartRe.test(lower)) {\n      turnLockRef.current = true;\n      setIsProcessing(true); isProcessingRef.current = true;\n      functionQueueRef.current.push({ name: 'clear_cart', params: {} });\n      drainFunctionQueue();\n      return;\n    }\n    if (goProducts.test(lower)) {\n      turnLockRef.current = true;\n      setIsProcessing(true); isProcessingRef.current = true;\n      functionQueueRef.current.push({ name: 'navigate_to_page', params: { page: 'prodotti' } });\n      drainFunctionQueue();\n      return;\n    }\n    // ✅ descrizione locale senza domande aggiuntive\n    if (describe.test(lower) && window.currentProductContext?.description_text) {\n      turnLockRef.current = true;\n      setIsProcessing(true); isProcessingRef.current = true;\n      const name = window.currentProductContext.name || 'prodotto';\n      const textDesc = `${name}. ${window.currentProductContext.description_text}`.slice(0, 900);\n      speak(textDesc, () => {\n        setIsProcessing(false); isProcessingRef.current = false;\n        turnLockRef.current = false;\n        if (restartListeningRef.current) restartListeningRef.current();\n      }, false, { enqueue: false });\n      return;\n    }\n    // ✅ aggiungi al carrello locale dal prodotto corrente\n    if (addToCartRe.test(text) && window.currentProductContext?.id) {\n      const m2 = text.match(addToCartRe);\n      const rawSize = (m2?.[3] || '').toLowerCase();\n      const rawColor = (m2?.[4] || '').toLowerCase();\n      const size = sizeMap[rawSize] || undefined;\n      const color = canonColor(rawColor) || undefined;\n      turnLockRef.current = true;\n      setIsProcessing(true); isProcessingRef.current = true;\n      functionQueueRef.current.push({\n        name: 'add_to_cart',\n        params: { product_id: window.currentProductContext.id, size: size || 'M', color: color || 'nero', quantity: 1 }\n      });\n      drainFunctionQueue();\n      return;\n    }\n\n    // ✅ apri prodotto per nome parziale (mappa locale)\n    const m = lower.match(openByName);\n    if (m && m[1]) {\n      const partial = normalizeKey(m[1]);\n      const map = window.visibleProductsMap || {};\n      let pid = null;\n      if (map[partial]) pid = map[partial];\n      else {\n        for (const k of Object.keys(map)) { if (k.includes(partial)) { pid = map[k]; break; } }\n      }\n      if (pid) {\n        turnLockRef.current = true;\n        setIsProcessing(true); isProcessingRef.current = true;\n        functionQueueRef.current.push({ name: 'get_product_details', params: { product_id: pid } });\n        drainFunctionQueue();\n        return;\n      }\n    }\n    if (readCart.test(lower)) {\n      turnLockRef.current = true;\n      setIsProcessing(true); isProcessingRef.current = true;\n      const summary = buildCartSpeechSummary(5);\n      speak(summary, () => {\n        setIsProcessing(false);\n        isProcessingRef.current = false;\n        if (restartListeningRef.current) restartListeningRef.current();\n      }, false, { enqueue: false });\n      return;\n    }\n    if (/(ciao|grazie.*|basta|chiudi|puoi andare|stop|non.*altro)/i.test(lower)) {\n      speak(\"Perfetto, alla prossima!\", () => stopAssistant());\n      return;\n    }\n\n    setMessages(prev => [...prev, { type: 'user', text, timestamp: new Date().toISOString() }]);\n    \n    setTranscript('');\n    \n    sendMessage({\n      type: 'voice_command',\n      text: text,\n      context: {\n        session_id: sessionIdRef.current,\n        timestamp: new Date().toISOString(),\n        current_page: window.location.pathname,\n        cart_count: (window.cartSnapshot?.length ?? useStore.getState().cartCount),\n        cart: (window.cartSnapshot || []),\n        cart_items_map: (window.cartItemsMap || {}),\n        preferences: useStore.getState().preferences,\n        session_count: sessionCount,\n        // 🔊 nuovo contesto UI\n        current_product: (window.currentProductContext || null),\n        visible_products: (window.visibleProductIds || []),\n        visible_products_map: (window.visibleProductsMap || {}),\n        ui_filters: {\n          q: (window.productsSearchQuery || ''),\n          category: (window.productsSelectedCategory || '')\n        }\n      }\n    });\n  }, [sendMessage, sessionCount, speak, stopAssistant]);\n\n  // ✅ TOGGLE LISTENING\n  const toggleListening = useCallback(async () => {\n    console.log('🎤 Toggle listening:', isListening, 'Active:', isAssistantActive);\n    \n    if (!browserSupportsSpeechRecognition()) {\n      setError('Browser non supporta il riconoscimento vocale');\n      return;\n    }\n\n    setError(null);\n\n    if (isListening || isAssistantActive) {\n      stopAssistant();\n    } else {\n      console.log('▶️ Starting assistant');\n      setIsAssistantActive(true);\n      isAssistantActiveRef.current = true;\n      isRestartingRef.current = false;\n      \n      resetInactivityTimeout();\n      \n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n        stream.getTracks().forEach(track => track.stop());\n\n        // Parla prima, poi riapri il mic in onend (evita di catturare l'earcon)\n        const welcomeMsg = getWelcomeMessage();\n        speak(welcomeMsg, () => {\n          setTimeout(() => {\n            if (\n              isAssistantActiveRef.current &&\n              !isProcessingRef.current &&\n              !isExecutingFunctionRef.current &&\n              !window.speechSynthesis.speaking\n            ) {\n              if (restartListeningRef.current) restartListeningRef.current();\n            }\n          }, 250);\n        }, true, { enqueue: false });\n        // non tenere il lock all'avvio\n        turnLockRef.current = false;\n      } catch (error) {\n        console.error('Microphone error:', error);\n        setError('Permessi microfono negati');\n        setIsAssistantActive(false);\n        isAssistantActiveRef.current = false;\n      }\n    }\n  }, [isListening, isAssistantActive, initializeSpeechRecognition, speak, getWelcomeMessage, \n      stopAssistant, resetInactivityTimeout]);\n\n  // Cleanup\n  useEffect(() => {\n    return () => {\n      if (recognitionRef.current) {\n        recognitionRef.current.stop();\n      }\n      if ('speechSynthesis' in window) {\n        window.speechSynthesis.cancel();\n      }\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n      if (inactivityTimeoutRef.current) {\n        clearTimeout(inactivityTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    // States\n    isListening,\n    isConnected,\n    messages,\n    isProcessing,\n    isExecutingFunction,\n    currentFunction,\n    error,\n    transcript,\n    isSpeaking,\n    isUserTurn,\n    isAssistantActive,\n    \n    // Actions\n    toggleListening,\n    clearError: () => setError(null),\n    \n    // Capabilities\n    browserSupportsSpeechRecognition: browserSupportsSpeechRecognition(),\n  };\n};","// src/App.jsx - VERSIONE CORRETTA\nimport React, { useState, useEffect } from 'react';\nimport { Routes, Route, useLocation } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  ShoppingBag,\n  Search,\n  Menu,\n  X,\n  User,\n  Heart,\n  ChevronRight,\n  Star,\n  Truck,\n  Shield,\n  CreditCard,\n  Mic,\n  MicOff,\n  Volume2,\n  Sparkles,\n  ShoppingCart,\n  Filter,\n  Grid,\n  List,\n  ChevronDown\n} from 'lucide-react';\n\n// Import page components\nimport HomePage from './pages/HomePage';\nimport ProductsPage from './pages/ProductsPage';\nimport OffersPage from './pages/OffersPage';\nimport CartPage from './pages/CartPage';\nimport ProductPage from './pages/ProductPage';\n\n// Import components\nimport VoiceVisualizer from './components/VoiceVisualizer';\n\n// Import hooks\nimport { useVoiceAssistantNative } from './hooks/useVoiceAssistantNative';\nimport { useCart } from './hooks/useCart';\n\n// ✅ VOICE ASSISTANT BUTTON COMPONENT MIGLIORATO\nconst VoiceAssistantButton = ({ \n  isListening, \n  isConnected, \n  error, \n  onToggleListening, \n  browserSupportsSpeechRecognition,\n  isAssistantActive\n}) => {\n  const [isHovered, setIsHovered] = useState(false);\n  \n  const handleClick = () => {\n    if (!browserSupportsSpeechRecognition) {\n      console.warn('Speech recognition not supported');\n      alert('Il riconoscimento vocale non è disponibile nel tuo browser. Prova con Chrome o Edge per la migliore esperienza.');\n      return;\n    }\n    onToggleListening();\n  };\n  \n  // ✅ STATO VISUALE CORRETTO BASATO SU isAssistantActive\n  const getButtonState = () => {\n    if (error) {\n      return {\n        bg: 'bg-gradient-to-r from-red-500 to-red-600',\n        pulse: false,\n        icon: MicOff,\n        tooltip: 'Errore - Clicca per riprovare'\n      };\n    }\n    \n    if (isAssistantActive) {\n      if (isListening) {\n        return {\n          bg: 'bg-gradient-to-r from-blue-500 to-purple-500',\n          pulse: true,\n          icon: Mic,\n          tooltip: 'In ascolto - Clicca per fermare'\n        };\n      } else {\n        return {\n          bg: 'bg-gradient-to-r from-purple-500 to-pink-500',\n          pulse: false,\n          icon: Volume2,\n          tooltip: 'AIVA attiva - Clicca per chiudere'\n        };\n      }\n    }\n    \n    return {\n      bg: 'bg-gradient-to-r from-blue-600 to-purple-600',\n      pulse: false,\n      icon: Mic,\n      tooltip: 'Attiva AIVA - Il tuo Personal Shopper AI'\n    };\n  };\n  \n  const buttonState = getButtonState();\n  \n  return (\n    <motion.div\n      className=\"fixed bottom-4 right-4 md:bottom-8 md:right-8 z-[120] pointer-events-auto\"\n      style={{\n        bottom: `calc(env(safe-area-inset-bottom, 0px) + 1rem)`,\n        right: `calc(env(safe-area-inset-right, 0px) + 1rem)`\n      }}\n      initial={{ scale: 0, opacity: 0 }}\n      animate={{ scale: 1, opacity: 1 }}\n      transition={{ delay: 0.5, type: \"spring\", stiffness: 260, damping: 20 }}\n    >\n      <motion.button\n        onClick={handleClick}\n        onHoverStart={() => setIsHovered(true)}\n        onHoverEnd={() => setIsHovered(false)}\n        className={`relative group ${buttonState.bg} p-6 rounded-full shadow-2xl text-white overflow-hidden`}\n        whileHover={{ scale: 1.1 }}\n        whileTap={{ scale: 0.95 }}\n        // ✅ Allow starting even if WS not yet connected; handle connection asynchronously\n        disabled={false}\n      >\n        {/* ✅ BACKGROUND ANIMATO MIGLIORATO */}\n        <motion.div\n          className=\"absolute inset-0 bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500\"\n          animate={{\n            backgroundPosition: buttonState.pulse ? ['0% 50%', '100% 50%', '0% 50%'] : ['0% 50%']\n          }}\n          transition={{\n            duration: 2,\n            repeat: buttonState.pulse ? Infinity : 0,\n            ease: \"linear\"\n          }}\n          style={{ backgroundSize: '200% 200%' }}\n        />\n        \n        {/* ✅ RIPPLE EFFECT QUANDO ATTIVO */}\n        {buttonState.pulse && (\n          <>\n            <motion.span\n              className=\"absolute inset-0 rounded-full border-4 border-white\"\n              animate={{\n                scale: [1, 2.2],\n                opacity: [0.6, 0]\n              }}\n              transition={{\n                duration: 1.5,\n                repeat: Infinity,\n                ease: \"easeOut\"\n              }}\n            />\n            <motion.span\n              className=\"absolute inset-0 rounded-full border-4 border-white\"\n              animate={{\n                scale: [1, 2.2],\n                opacity: [0.6, 0]\n              }}\n              transition={{\n                duration: 1.5,\n                repeat: Infinity,\n                ease: \"easeOut\",\n                delay: 0.5\n              }}\n            />\n          </>\n        )}\n        \n        {/* Icon */}\n        <motion.div\n          className=\"relative z-10\"\n          animate={{ \n            rotate: buttonState.pulse ? [0, 10, -10, 0] : 0,\n            scale: isAssistantActive ? [1, 1.1, 1] : 1\n          }}\n          transition={{ \n            duration: 0.8, \n            repeat: buttonState.pulse ? Infinity : 0 \n          }}\n        >\n          <buttonState.icon size={28} />\n        </motion.div>\n        \n        {/* Sparkles when hovered and connected */}\n        {isHovered && isConnected && (\n          <motion.div\n            className=\"absolute -top-1 -right-1\"\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            exit={{ scale: 0 }}\n          >\n            <Sparkles className=\"text-yellow-300\" size={20} />\n          </motion.div>\n        )}\n      </motion.button>\n      \n      {/* ✅ TOOLTIP MIGLIORATO */}\n      <AnimatePresence>\n        {isHovered && (\n          <motion.div\n            initial={{ opacity: 0, y: 10, scale: 0.9 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: 10, scale: 0.9 }}\n            className=\"absolute bottom-full mb-3 right-0 bg-gray-900 text-white text-sm py-2 px-4 rounded-lg whitespace-nowrap max-w-xs\"\n          >\n            <div className=\"flex items-center gap-2\">\n              <Sparkles size={16} className=\"text-yellow-300 flex-shrink-0\" />\n              <span>{buttonState.tooltip}</span>\n            </div>\n            <div className=\"absolute bottom-0 right-8 transform translate-y-1/2 rotate-45 w-2 h-2 bg-gray-900\" />\n          </motion.div>\n        )}\n      </AnimatePresence>\n      \n      {/* Connection Status Indicator */}\n      <div className={`absolute bottom-1 right-1 w-3 h-3 rounded-full border-2 border-white ${\n        isConnected ? 'bg-green-400' : 'bg-yellow-400'\n      }`} title={isConnected ? 'Connesso' : 'In connessione...'} />\n      \n      {/* ✅ ERROR MESSAGE MIGLIORATO */}\n      {error && (\n        <motion.div\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"absolute bottom-full mb-2 right-0 bg-red-500 text-white text-sm py-2 px-4 rounded-lg whitespace-nowrap max-w-xs\"\n        >\n          <div className=\"flex items-center gap-2\">\n            <X size={16} />\n            <span>{error}</span>\n          </div>\n        </motion.div>\n      )}\n    </motion.div>\n  );\n};\n\n// Navigation Component\nconst Navigation = ({ cartItemsCount, isListening, onVoiceToggle }) => {\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const location = useLocation();\n\n  const navigationItems = [\n    { id: 'products', label: 'Prodotti', icon: '📦', path: '/products' },\n    { id: 'offers', label: 'Offerte', icon: '🏷️', path: '/offers' },\n    { id: 'cart', label: 'Carrello', icon: '🛒', path: '/cart', badge: cartItemsCount }\n  ];\n\n  const getCurrentPage = () => {\n    const path = location.pathname;\n    if (path === '/') return 'home';\n    if (path === '/products') return 'products';\n    if (path === '/offers') return 'offers';\n    if (path === '/cart') return 'cart';\n    return 'home';\n  };\n\n  const currentPage = getCurrentPage();\n  \n  return (\n    <motion.nav\n      className=\"sticky top-0 z-40 bg-white shadow-sm\"\n      initial={{ y: -100 }}\n      animate={{ y: 0 }}\n      transition={{ type: \"spring\", stiffness: 100 }}\n    >\n      <div className=\"max-w-7xl mx-auto px-4\">\n        <div className=\"flex items-center justify-between h-16\">\n          <div className=\"flex items-center gap-8\">\n            <motion.a\n              href=\"/\"\n              className=\"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 cursor-pointer select-none\"\n              whileHover={{ scale: 1.05 }}\n              style={{ userSelect: 'none', WebkitUserSelect: 'none' }}\n            >\n              AIVA Fashion\n            </motion.a>\n            <div className=\"hidden md:flex items-center gap-6\">\n              {navigationItems.map((item) => (\n                <a\n                  key={item.id}\n                  href={item.path}\n                  className={`text-gray-700 hover:text-blue-600 transition ${\n                    currentPage === item.id ? 'text-blue-600 font-semibold' : ''\n                  }`}\n                >\n                  {item.label}\n                </a>\n              ))}\n            </div>\n          </div>\n          \n          <div className=\"flex items-center gap-4\">\n            <button className=\"p-2 text-gray-600 hover:text-blue-600\">\n              <Search size={20} />\n            </button>\n            <button className=\"p-2 text-gray-600 hover:text-blue-600\">\n              <User size={20} />\n            </button>\n            <a \n              href=\"/cart\"\n              className=\"relative p-2 text-gray-600 hover:text-blue-600\"\n            >\n              <ShoppingBag size={20} />\n              {cartItemsCount > 0 && (\n                <motion.span\n                  initial={{ scale: 0 }}\n                  animate={{ scale: 1 }}\n                  className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\"\n                >\n                  {cartItemsCount}\n                </motion.span>\n              )}\n            </a>\n            <button \n              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n              className=\"md:hidden p-2 text-gray-600\"\n            >\n              {mobileMenuOpen ? <X size={20} /> : <Menu size={20} />}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Mobile Menu */}\n      <AnimatePresence>\n        {mobileMenuOpen && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"md:hidden bg-white border-t\"\n          >\n            <div className=\"px-4 py-4 space-y-2\">\n              {navigationItems.map((item) => (\n                <a\n                  key={item.id}\n                  href={item.path}\n                  className={`block py-2 px-3 rounded-lg text-gray-700 hover:text-blue-600 hover:bg-blue-50 ${\n                    currentPage === item.id ? 'text-blue-600 font-semibold bg-blue-50' : ''\n                  }`}\n                  onClick={() => setMobileMenuOpen(false)}\n                >\n                  <span className=\"mr-2\">{item.icon}</span>\n                  {item.label}\n                  {item.badge > 0 && (\n                    <span className=\"ml-2 bg-red-500 text-white text-xs rounded-full px-2 py-1\">\n                      {item.badge}\n                    </span>\n                  )}\n                </a>\n              ))}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.nav>\n  );\n};\n\n// Footer Component\nconst Footer = () => {\n  const scrollTop = () => {\n    try { window.scrollTo({ top: 0, behavior: 'smooth' }); } catch {}\n  };\n  return (\n    <footer className=\"bg-gray-900 text-gray-300 py-12 px-4\">\n      <div className=\"max-w-7xl mx-auto grid md:grid-cols-3 gap-8\">\n        <div>\n          <h3 className=\"text-white font-bold text-xl mb-4\">AIVA Fashion</h3>\n          <p className=\"text-sm\">Concept interattivo per portfolio – non è un e‑commerce reale.</p>\n        </div>\n        <div>\n          <h4 className=\"text-white font-semibold mb-4\">Info</h4>\n          <p className=\"text-sm leading-6\">\n            Questo sito è un progetto dimostrativo creato da Michele Miranda per mostrare\n            integrazione tra assistente vocale, AI e interfaccia e‑commerce. I prodotti,\n            i prezzi e le promozioni hanno scopo illustrativo.\n          </p>\n        </div>\n        <div>\n          <h4 className=\"text-white font-semibold mb-4\">Shop</h4>\n          <ul className=\"space-y-2 text-sm\">\n            <li><a href=\"/products\" className=\"hover:text-white transition\">Prodotti</a></li>\n            <li><a href=\"/offers\" className=\"hover:text-white transition\">Offerte</a></li>\n            <li><button onClick={scrollTop} className=\"hover:text-white transition\">Torna Su</button></li>\n          </ul>\n        </div>\n      </div>\n      <div className=\"max-w-7xl mx-auto mt-8 pt-8 border-t border-gray-800 text-center text-sm\">\n        <p>© 2025 AIVA Fashion – Concept per il portfolio di Michele Miranda</p>\n      </div>\n    </footer>\n  );\n};\n\n// ✅ MAIN APP COMPONENT MIGLIORATO\nexport default function App() {\n  const location = useLocation();\n  \n  // Cart hook for real cart count\n  const { cartCount } = useCart();\n  \n  // ✅ VOICE ASSISTANT HOOK CON GESTIONE COMPLETA\n  const {\n    isListening,\n    isConnected,\n    messages,\n    isProcessing,\n    isExecutingFunction,\n    currentFunction,\n    error,\n    transcript,\n    isSpeaking,\n    isUserTurn,\n    isAssistantActive, // ✅ Nuovo stato per controllare se l'assistente è attivo\n    toggleListening,\n    clearError,\n    browserSupportsSpeechRecognition\n  } = useVoiceAssistantNative();\n\n  // Clear error after 5 seconds\n  useEffect(() => {\n    if (error) {\n      const timer = setTimeout(() => {\n        clearError();\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [error, clearError]);\n\n  // ✅ HANDLER CHIUSURA COMPLETA ASSISTENTE\n  const handleCloseAssistant = () => {\n    console.log('🔴 App: Closing assistant completely');\n    toggleListening(); // Questo dovrebbe fermare tutto\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Navigation */}\n      <Navigation\n        cartItemsCount={cartCount}\n        isListening={isListening}\n        onVoiceToggle={toggleListening}\n      />\n      \n      {/* Main Content */}\n      <AnimatePresence mode=\"wait\">\n        <motion.div\n          key={location.pathname}\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: -20 }}\n          transition={{ duration: 0.3 }}\n        >\n          <Routes>\n            <Route path=\"/\" element={<HomePage onVoiceToggle={toggleListening} />} />\n            <Route path=\"/products\" element={<ProductsPage />} />\n            <Route path=\"/products/:id\" element={<ProductPage />} />\n            <Route path=\"/offers\" element={<OffersPage />} />\n            <Route path=\"/cart\" element={<CartPage />} />\n          </Routes>\n        </motion.div>\n      </AnimatePresence>\n      \n      {/* Footer */}\n      <Footer />\n      \n      {/* ✅ VOICE ASSISTANT BUTTON CON STATI CORRETTI */}\n      <VoiceAssistantButton\n        isListening={isListening}\n        isConnected={isConnected}\n        error={error}\n        onToggleListening={toggleListening}\n        browserSupportsSpeechRecognition={browserSupportsSpeechRecognition}\n        isAssistantActive={isAssistantActive}\n      />\n\n      {/* ✅ VOICE VISUALIZER CON CONTROLLO CORRETTO */}\n      {isAssistantActive && (\n        <VoiceVisualizer\n          isListening={isListening}\n          isProcessing={isProcessing}\n          isConnected={isConnected}\n          isSpeaking={isSpeaking}\n          isExecutingFunction={isExecutingFunction}\n          currentFunction={currentFunction}\n          messages={messages}\n          error={error}\n          onClose={handleCloseAssistant} // ✅ Handler completo chiusura\n          isAssistantActive={isAssistantActive} // ✅ Aggiunto prop mancante\n        />\n      )}\n    </div>\n  );\n}","// src/polyfills.js - Polyfills for compatibility\r\nimport regeneratorRuntime from 'regenerator-runtime/runtime';\r\n\r\n// Make regeneratorRuntime available globally\r\nif (typeof globalThis.regeneratorRuntime === 'undefined') {\r\n  globalThis.regeneratorRuntime = regeneratorRuntime;\r\n}\r\n\r\nif (typeof window !== 'undefined') {\r\n  window.regeneratorRuntime = regeneratorRuntime;\r\n}\r\n\r\nconsole.log('Polyfills loaded successfully');\r\n","// src/main.jsx\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport App from './App.jsx'\r\nimport './index.css'\r\n\r\n// Import polyfills first\r\nimport './polyfills.js'\r\n\r\n// usa StrictMode solo in dev\r\nconst Root = import.meta.env.DEV ? React.StrictMode : React.Fragment\r\n\r\nReactDOM.createRoot(document.getElementById('root')).render(\r\n  <Root>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Root>,\r\n)"],"names":["f","require$$0","k","l","m","n","p","q","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","HomePage","onVoiceToggle","jsxs","jsx","motion","opacity","duration","y","delay","scale","type","stiffness","boxShadow","rotate","repeat","Infinity","Mic","Sparkles","Shirt","ShoppingBag","Heart","ShoppingCart","Gift","Star","Palette","Crown","Zap","bind","fn","thisArg","toString","getPrototypeOf","iterator","toStringTag","kindOf","thing","str","cache","kindOfTest","typeOfTest","isArray","isUndefined","isBuffer","val","isFunction","isArrayBuffer","isArrayBufferView","result","isString","isNumber","isObject","isBoolean","isPlainObject","prototype","isEmptyObject","isDate","isFile","isBlob","isFileList","isStream","isFormData","kind","isURLSearchParams","isReadableStream","isRequest","isResponse","isHeaders","trim","forEach","obj","allOwnKeys","i","keys","len","key","findKey","_key","_global","isContextDefined","context","merge","caseless","skipUndefined","assignValue","targetKey","extend","stripBOM","content","inherits","constructor","superConstructor","props","descriptors","toFlatObject","sourceObj","destObj","filter","propFilter","prop","merged","endsWith","searchString","position","lastIndex","toArray","arr","isTypedArray","TypedArray","forEachEntry","_iterator","pair","matchAll","regExp","matches","isHTMLForm","toCamelCase","p1","p2","hasOwnProperty","isRegExp","reduceDescriptors","reducer","reducedDescriptors","descriptor","name","ret","freezeMethods","value","toObjectSet","arrayOrString","delimiter","define","noop","toFiniteNumber","defaultValue","isSpecCompliantForm","toJSONObject","stack","visit","source","target","reducedValue","isAsyncFn","isThenable","_setImmediate","setImmediateSupported","postMessageSupported","token","callbacks","data","cb","asap","isIterable","utils$1","AxiosError","message","code","config","request","response","utils","error","customProps","axiosError","msg","errCode","httpAdapter","isVisitable","removeBrackets","renderKey","path","dots","isFlatArray","predicates","toFormData","formData","options","option","metaTokens","visitor","defaultVisitor","indexes","useBlob","convertValue","el","index","exposedHelpers","build","encode","charMap","match","AxiosURLSearchParams","params","encoder","_encode","buildURL","url","serializeFn","serializedParams","hashmarkIndex","InterceptorManager","fulfilled","rejected","id","transitionalDefaults","URLSearchParams$1","FormData$1","Blob$1","platform$1","URLSearchParams","FormData","Blob","hasBrowserEnv","_navigator","hasStandardBrowserEnv","hasStandardBrowserWebWorkerEnv","origin","platform","toURLEncodedForm","helpers","parsePropPath","arrayToObject","formDataToJSON","buildPath","isNumericKey","isLast","stringifySafely","rawValue","parser","defaults","headers","contentType","hasJSONContentType","isObjectPayload","_FormData","transitional","forcedJSONParsing","JSONRequested","strictJSONParsing","status","method","ignoreDuplicateOf","parseHeaders","rawHeaders","parsed","line","$internals","normalizeHeader","header","normalizeValue","parseTokens","tokens","tokensRE","isValidHeaderName","matchHeaderValue","isHeaderNameFilter","formatHeader","w","char","buildAccessors","accessorName","methodName","arg1","arg2","arg3","AxiosHeaders$1","valueOrRewrite","rewrite","self","setHeader","_value","_header","_rewrite","lHeader","setHeaders","dest","entry","matcher","deleted","deleteHeader","format","normalized","targets","asStrings","first","computed","accessors","defineAccessor","AxiosHeaders","mapped","headerValue","transformData","fns","isCancel","CanceledError","settle","resolve","reject","validateStatus","parseProtocol","speedometer","samplesCount","min","bytes","timestamps","head","tail","firstSampleTS","chunkLength","now","startedAt","bytesCount","passed","throttle","freq","timestamp","threshold","lastArgs","timer","invoke","args","progressEventReducer","listener","isDownloadStream","bytesNotified","_speedometer","loaded","total","progressBytes","rate","inRange","progressEventDecorator","throttled","lengthComputable","asyncDecorator","isURLSameOrigin","isMSIE","cookies","expires","domain","secure","cookie","isAbsoluteURL","combineURLs","baseURL","relativeURL","buildFullPath","requestedURL","allowAbsoluteUrls","isRelativeUrl","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","configValue","resolveConfig","newConfig","withXSRFToken","xsrfHeaderName","xsrfCookieName","auth","formHeaders","allowedHeaders","xsrfValue","isXHRAdapterSupported","xhrAdapter","_config","requestData","requestHeaders","responseType","onUploadProgress","onDownloadProgress","onCanceled","uploadThrottled","downloadThrottled","flushUpload","flushDownload","done","onloadend","responseHeaders","err","event","timeoutErrorMessage","cancel","protocol","composeSignals","signals","timeout","length","controller","aborted","onabort","reason","unsubscribe","signal","streamChunk","chunk","chunkSize","pos","end","readBytes","iterable","readStream","stream","reader","trackStream","onProgress","onFinish","_onFinish","loadedBytes","DEFAULT_CHUNK_SIZE","globalFetchAPI","Request","Response","ReadableStream","TextEncoder","test","factory","env","envFetch","isFetchSupported","isRequestSupported","isResponseSupported","isReadableStreamSupported","encodeText","supportsRequestStream","duplexAccessed","hasContentType","supportsResponseStream","resolvers","res","getBodyLength","body","resolveBodyLength","cancelToken","withCredentials","fetchOptions","_fetch","composedSignal","requestContentLength","_request","contentTypeHeader","flush","isCredentialsSupported","resolvedOptions","isStreamResponse","responseContentLength","responseData","seedCache","getFetch","fetch","seeds","seed","map","knownAdapters","fetchAdapter.getFetch","renderReason","isResolvedHandle","adapter","adapters","nameOrAdapter","rejectedReasons","reasons","state","s","throwIfCancellationRequested","dispatchRequest","VERSION","validators","deprecatedWarnings","validator","version","formatMessage","opt","desc","opts","correctSpelling","assertOptions","schema","allowUnknown","Axios$1","instanceConfig","configOrUrl","dummy","paramsSerializer","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","interceptor","responseInterceptorChain","promise","chain","onFulfilled","onRejected","fullPath","Axios","generateHTTPMethod","isForm","CancelToken$1","CancelToken","executor","resolvePromise","onfulfilled","_resolve","abort","c","spread","callback","isAxiosError","payload","HttpStatusCode","createInstance","defaultConfig","instance","axios","promises","all","Cancel","formToJSON","getAdapter","BACKEND_URL","import","api","create","interceptors","use","console","log","toUpperCase","Promise","includes","warn","productAPI","getProducts","get","getMockProducts","getSizeGuide","category","encodeURIComponent","getProduct","productId","getMockProduct","checkAvailability","size","color","available","stock","getRecommendations","getMockRecommendations","searchProducts","query","filters","product","toLowerCase","brand","cartAPI","getCart","addToCart","quantity","post","product_id","removeFromCart","itemId","delete","updateQuantity","put","clearCart","createWebSocketConnection","sessionId","wsUrl","replace","WebSocket","price","original_price","discount_percentage","images","rating","reviews","variants","products","find","slice","MICRO_MOUNT","isMounted","window","location","pathname","startsWith","withBase","clean","withAssetPath","resolveAssetUrl","src","String","createStoreImpl","createState","listeners","setState","partial","nextState","previousState","getState","initialState","__vite_import_meta_env__","createStore","React","is","x","objectIs","useState","useEffect","useLayoutEffect","useDebugValue","useSyncExternalStore$2","subscribe","getSnapshot","_useState","inst","forceUpdate","checkIfSnapshotChanged","latestGetSnapshot","nextValue","useSyncExternalStore$1","shim","useSyncExternalStoreShim_production","shimModule","require$$1","useSyncExternalStore","useRef","useMemo","withSelector_production","getServerSnapshot","selector","isEqual","instRef","memoizedSelector","nextSnapshot","hasMemo","memoizedSnapshot","currentSelection","memoizedSelection","nextSelection","maybeGetServerSnapshot","withSelectorModule","ReactExports","useSyncExternalStoreWithSelector","useSyncExternalStoreExports","didWarnAboutEqualityFn","identity","arg","useStore","equalityFn","createImpl","useBoundStore","trackedConnections","getTrackedConnectionState","api2","extractConnectionInformation","store","extensionConnector","existingConnection","newConnection","devtoolsImpl","devtoolsOptions","set","enabled","anonymousActionType","connection","connectionInformation","isRecording","nameOrAction","r","action","setStateFromDevtools","originalIsRecording","store2","didWarnAboutReservedActionType","originalDispatch","_a","parseJsonThen","stateFromDevtools","nextLiftedState","lastComputedState","devtools","stringified","createJSONStorage","getStorage","storage","parse","str2","newValue","toThenable","input","_onRejected","_onFulfilled","oldImpl","baseOptions","persistedState","currentState","hasHydrated","hydrationListeners","finishHydrationListeners","thenableSerialize","setItem","errorInSync","thenable","serializedValue","savedSetState","configResult","stateFromStorage","hydrate","postRehydrationCallback","storageValue","deserializedStorageValue","migratedState","_a2","newOptions","newImpl","_b","migrationResult","migrated","persistImpl","persist","normalizeKey","normalize","publishCartSnapshot","cart","snapshot","item","item_id","it","cartSnapshot","cartItemsMap","cartTotal","cartCount","preferences","gender","style","isVoiceAssistantOpen","isMobileMenuOpen","isCartOpen","currentPage","voiceHistory","isListening","filteredProducts","selectedProduct","searchQuery","activeFilters","minPrice","maxPrice","onSale","existingItem","newCart","Date","Math","random","substr","addedAt","toISOString","reduce","count","setCartFromServer","serverCart","items","Array","grand_total","item_count","setPreferences","updatePreference","setCurrentPage","page","toggleVoiceAssistant","addVoiceHistory","clearVoiceHistory","setProducts","setSearchQuery","queryLower","italianSynonyms","expandedTerms","synonyms","Object","entries","some","syn","filtered","searchText","description","subcategory","tags","join","term","setFilter","filterName","newFilters","applyFilters","setMultipleFilters","clearFilters","v","on_sale","filterProducts","additionalFilters","combinedFilters","setSelectedProduct","getProductById","isProductInCart","matchesProduct","matchesSize","matchesColor","getCartItemCount","processVoiceCommand","command","parameters","getShoppingInsights","totalSpent","itemsInCart","favoriteCategories","Boolean","preferredSize","searchHistory","lastUpdated","partialize","syncCartFromServer","dispatchEvent","CustomEvent","detail","buildCartSpeechSummary","limit","parts","qty","push","rest","useCart","storeAddToCart","storeRemoveFromCart","storeClearCart","storeUpdateQuantity","loading","setLoading","setError","shipping","setShipping","useCallback","Error","removeLastItem","lastItem","removeByCategory","itemsToRemove","increaseQuantity","amount","newQuantity","decreaseQuantity","getCartSummary","subtotal","shippingCost","itemCount","isInCart","getItemQuantity","syncCart","grandTotal","useFavorites","favorites","setFavorites","savedFavorites","localStorage","getItem","JSON","stringify","addToFavorites","prev","fav","removeFromFavorites","toggleFavorite","isFavorite","clearFavorites","favoritesCount","ProductCard","onAddToCart","onToggleFavorite","isHovered","setIsHovered","navigate","useNavigate","handleCardClick","shadow","image","discount","Number","original","originalPrice","stopPropagation","_","floor","toFixed","ProductsPage","setFilteredProducts","selectedCategory","setSelectedCategory","sortBy","setSortBy","viewMode","setViewMode","isQuickAddOpen","setIsQuickAddOpen","quickAddProduct","setQuickAddProduct","selectedSize","setSelectedSize","selectedColor","setSelectedColor","isAdding","setIsAdding","addToCartHook","categories","productsData","loadProducts","sort","localeCompare","ids","fromEntries","visibleProductIds","visibleProductsMap","productsSearchQuery","productsSelectedCategory","applyProductFilters","price_range","qq","scrollTo","top","behavior","getAvailableSizes","sizes","Set","add","from","getAvailableColors","colors","ensureValidCombination","openQuickAdd","defaultSize","defaultColor","handleAddToCart","confirmAddToCart","Filter","Grid","List","X","OfferCard","offer","Tag","OffersPage","offers","setOffers","offersData","loadOffers","currentPageContext","handler","addEventListener","removeEventListener","defaultVariant","CartItem","onUpdateQuantity","onRemove","isRemoving","setIsRemoving","handleRemove","setTimeout","Minus","Plus","Trash2","CartPage","AnimatePresence","Truck","CreditCard","ArrowRight","ProductPage","useParams","setProduct","setQuantity","selectedImage","setSelectedImage","productData","stripMd","currentProductContext","description_text","description_long","loadProduct","toggleFavoriteHandler","ArrowLeft","max","RotateCcw","Shield","VoiceVisualizer","isProcessing","isConnected","isSpeaking","isExecutingFunction","currentFunction","messages","onClose","isAssistantActive","isVisible","setIsVisible","clearTimeout","icon","text","textColor","animate","Navigation","Search","Volume2","Loader","MessageCircle","handleClose","pointerEvents","width","maxWidth","height","damping","ease","useVoiceAssistantNative","setIsListening","setIsConnected","setMessages","setIsProcessing","setIsExecutingFunction","setCurrentFunction","transcript","setTranscript","setIsSpeaking","isUserTurn","setIsUserTurn","setIsAssistantActive","sessionCount","setSessionCount","clearCartAction","wsRef","sessionIdRef","recognitionRef","functionQueueRef","isProcessingRef","current","processingOwnedBySpeechRef","handleWSMessageRef","restartListeningRef","inactivityTimeoutRef","streamBufferRef","isStreamingTTSRef","streamReleasePendingRef","utterQueueRef","ttsSafetyTimerRef","dropStaleResponsesRef","hasSpokenThisTurnRef","isAssistantActiveRef","isConnectedRef","lastInteractionRef","lastUserTextRef","isRestartingRef","selectedVoiceRef","bargeInCtxRef","bargeInStreamRef","bargeInAnalyserRef","bargeInRafRef","LISTENING_WINDOW_MS","CLOSING_GRACE_MS","NO_INPUT_MESSAGES","listeningTimerRef","activeListenSessionIdRef","beepedThisSessionRef","closingTimerRef","turnLockRef","clearListeningTimers","isSpeakingRef","isUserTurnRef","isExecutingFunctionRef","audioCtxRef","lastBeepAtRef","playReadyBeep","AudioCtx","AudioContext","webkitAudioContext","ctx","osc","createOscillator","gain","createGain","frequency","setValueAtTime","currentTime","exponentialRampToValueAtTime","connect","destination","start","stop","startBargeInMonitor","navigator","mediaDevices","getUserMedia","audio","createMediaStreamSource","analyser","createAnalyser","fftSize","above","thresh","need","Uint8Array","tick","getByteTimeDomainData","sum","sqrt","speechSynthesis","stopBargeInMonitor","requestAnimationFrame","cancelAnimationFrame","getTracks","t","safeStopRecognition","onend","INACTIVITY_TIMEOUT","INTERACTION_CHECK_INTERVAL","getWelcomeMessage","welcomeMessages","shortMessages","browserSupportsSpeechRecognition","selectBestItalianVoice","voices","getVoices","voicePreferences","lang","pref","matchingVoice","voice","langMatch","nameMatch","genderMatch","italianVoice","loadVoices","onvoiceschanged","undefined","segmentTextIntoSentences","split","releaseTurnIfIdle","speaking","executeFunction","functionName","speak","enqueue","scheduleListenAfterNav","currentPath","searchInput","document","querySelector","Event","bubbles","applyUIFilters","canonColor","raw","sizeButtons","querySelectorAll","btn","textContent","click","addBtn","mockProduct","product_name","stopAssistant","guide","table","drainFunctionQueue","restartListening","next","shift","categorySelect","sortSelect","initializeSpeechRecognition","SpeechRecognition","webkitSpeechRecognition","recognition","continuous","interimResults","maxAlternatives","onstart","onresult","finalTranscript","interimTranscript","resultIndex","results","isFinal","resetInactivityTimeout","handleVoiceCommand","onerror","__AIVA_SINGLETON__","ws","queue","lastFnSigTs","Map","WS_SINGLETON","readyState","OPEN","connectWebSocket","onopen","send","onmessage","onclose","attempts","attemptReconnect","pow","sanitizeTextForTTS","onEnd","immediate","sentence","utt","SpeechSynthesisUtterance","pitch","volume","nextUtt","handleWebSocketMessage","sig","fnSignature","function","last","lowerLast","sendMessage","VITE_VERCEL_MODE","VERCEL_MODE","json","session_id","events","evt","lower","goCart","goOffers","goHome","goProducts","describe","readCart","clearCartRe","openByName","addToCartRe","sizeMap","xs","xxs","xl","xxl","colorMap","summary","textDesc","m2","rawSize","rawColor","pid","current_page","cart_count","cart_items_map","session_count","current_product","visible_products","visible_products_map","ui_filters","toggleListening","track","welcomeMsg","close","clearError","VoiceAssistantButton","onToggleListening","handleClick","alert","buttonState","bg","pulse","MicOff","tooltip","bottom","right","backgroundPosition","backgroundSize","Fragment","cartItemsCount","mobileMenuOpen","setMobileMenuOpen","useLocation","navigationItems","label","badge","getCurrentPage","userSelect","WebkitUserSelect","User","Menu","Footer","scrollTop","App","handleCloseAssistant","Routes","Route","globalThis","regeneratorRuntime","Root","ReactDOM","createRoot","getElementById","render","BrowserRouter"],"mappings":"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","x_google_ignoreList":[0,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,56,57,58,59,60,61,62]}